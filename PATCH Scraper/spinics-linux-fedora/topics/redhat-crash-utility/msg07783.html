<!-- MHonArc v2.6.19 -->
<!--X-Subject: Re:  [PATCH] crash: dis: introduce count in reverse and forward mode -->
<!--X-From-R13: Rnir Oaqrefba &#60;naqrefbaNerqung.pbz> -->
<!--X-Date: Wed, 19 Jun 2019 08:28:47 &#45;0700 -->
<!--X-Message-Id: 1650433275.30338736.1560958081161.JavaMail.zimbra@redhat.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 201906182248.x5IMm6Ib032445@lists01.pubmisc.prod.ext.phx2.redhat.com -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-3422782820843221",
          enable_page_level_ads: true
     });
</script>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Re:  [PATCH] crash: dis: introduce count in reverse and forward mode &mdash; Red Hat Crash Utility">
<style>
<!--
 pre {white-space: pre-wrap;}
-->
</style>
<title>Red Hat Crash Utility &mdash;  Re:  [PATCH] crash: dis: introduce count in reverse and forward mode</title>
<link rel="alternate" type="application/rss+xml" title="Red Hat Crash Utility" href="//feeds.feedburner.com/RedHatCrashUtility">
</head>
<body itemscope itemtype="//schema.org/Article" vlink=green>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<form action="//www.google.com" id="cse-search-box" target="_blank">
  <div>
    <input type="hidden" name="cx" value="partner-pub-3422782820843221:9580497365" />
    <input type="hidden" name="ie" value="UTF-8" />
    <input type="text" name="q" size="25" />
    <input type="submit" name="sa" value="Search" />
  </div>
</form>
<script type="text/javascript" src="//www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en"></script>
<h1 itemprop="name">Re:  [PATCH] crash: dis: introduce count in reverse and forward mode</h1>
[<a href="msg07782.html">Date Prev</a>][<a href="msg07784.html">Date Next</a>][<a href="msg07780.html">Thread Prev</a>][<a href="msg07786.html">Thread Next</a>][<a href="maillist.html#07783">Date Index</a>][<a href="index.html#07783">Thread Index</a>]


<p>&nbsp;<br>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive test for archives -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="6345952567"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>Subject</em>: Re:  [PATCH] crash: dis: introduce count in reverse and forward mode</li>
<li><em>From</em>: Dave Anderson &lt;anderson@xxxxxxxxxx&gt;</li>
<li><em>Date</em>: Wed, 19 Jun 2019 11:28:01 -0400 (EDT)</li>
<li><em>In-reply-to</em>: &lt;<a href="msg07780.html">201906182248.x5IMm6Ib032445@lists01.pubmisc.prod.ext.phx2.redhat.com</a>&gt;</li>
<li><em>Reply-to</em>: &quot;Discussion list for crash utility usage,	maintenance and development&quot; &lt;crash-utility@xxxxxxxxxx&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_4"></a>
<a class="addthis_button_compact"></a>
<a class="addthis_counter addthis_bubble_style"></a>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5196c2ae1be43d18&async=1&domready=1" defer async></script>
<!-- AddThis Button END -->
<hr>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive link 1 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="8681825769"
     data-ad-format="link"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>
<div class="content" itemprop="articleBody">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>

----- Original Message -----
&gt;<i> I'm simply doing an in-place update by:</i>
&gt;<i> </i>
&gt;<i> (1) applying your patch to a pre-built git tree, and</i>
&gt;<i> (2) entering &quot;make&quot;.</i>
&gt;<i> </i>
&gt;<i> That should just work. Anyway, I've got an idea on how to address it that</i>
&gt;<i> I'll try tomorrow.</i>
&gt;<i> </i>
&gt;<i></i>

Hi Aaron,

With respect to the &quot;secondary&quot; application of the gdb-7.6.patch
file to a pre-built source tree, I came up with a solution that
allows for the restoration of the original version of any gdb file
prior to the secondary re-application of gdb-7.6.patch.  That scheme
works fine, and prevents the &quot;HUNK # FAILED&quot; messages that are seen
for symtab.c and printcmd.c.  Those occur because &quot;patch -N&quot; doesn't
recognize that the patch had been previously applied, and so it goes
ahead and tries the patch again (with unpredictable results).

But -- after trying it with your patch appended to gdb-7.6.patch,
the build still fails.

So I took the &quot;secondary&quot; re-application of gdb-7.6.patch completely
out of the picture, and as it turns out, there is still a problem 
with your patch to gdb-7.6.patch.  What I did was to:

 (1) check out a clean source tree, 
 (2) apply your patch
 (3) run make

That should absolutely just work.

But your patch does not apply cleanly on the initial application, and
then later on printcmd.c fails to compile.  Here are the relevant portions
of the build log:

$ git clone <a  rel="nofollow" href="https://github.com/crash-utility/crash.git">https://github.com/crash-utility/crash.git</a> crash.git
Cloning into 'crash.git'...
remote: Enumerating objects: 35, done.
remote: Counting objects: 100% (35/35), done.
remote: Compressing objects: 100% (25/25), done.
remote: Total 2719 (delta 15), reused 25 (delta 10), pack-reused 2684
Receiving objects: 100% (2719/2719), 5.41 MiB | 2.05 MiB/s, done.
Resolving deltas: 100% (1818/1818), done.
$ cd crash.git
$ patch -p1 &lt; /root/dis.patch
patching file gdb-7.6.patch
patching file kernel.c
$ make
... [ cut ] ...
if [ -f gdb-7.6.patch ] &amp;&amp; [ -s gdb-7.6.patch ]; then \
        patch -p0 &lt; gdb-7.6.patch; cp gdb-7.6.patch gdb-7.6; fi
patching file gdb-7.6/libiberty/Makefile.in
patching file gdb-7.6/opcodes/i386-dis.c
patching file gdb-7.6/gdb/dwarf2read.c
patching file gdb-7.6/gdb/amd64-linux-nat.c
patching file gdb-7.6/gdb/symfile.c
patching file gdb-7.6/gdb/cli/cli-cmds.c
patching file gdb-7.6/gdb/psymtab.c
patching file gdb-7.6/gdb/symtab.c
patching file gdb-7.6/gdb/c-typeprint.c
patching file gdb-7.6/gdb/xml-syscall.c
patching file gdb-7.6/gdb/exceptions.c
patching file gdb-7.6/gdb/valprint.h
patching file gdb-7.6/gdb/target.c
patching file gdb-7.6/gdb/printcmd.c
patching file gdb-7.6/gdb/ui-file.c
patching file gdb-7.6/gdb/main.c
patching file gdb-7.6/gdb/valprint.c
patching file gdb-7.6/gdb/Makefile.in
patching file gdb-7.6/gdb/c-lang.c
patching file gdb-7.6/readline/rltypedefs.h
patching file gdb-7.6/readline/readline.h
patching file gdb-7.6/readline/misc.c
patching file gdb-7.6/Makefile.in
patching file gdb-7.6/gdb/defs.h
patching file gdb-7.6/bfd/elflink.c
patching file gdb-7.6/gdb/s390-nat.c
patching file gdb-7.6/gdb/printcmd.c
patching file gdb-7.6/bfd/bfd-in.h
patching file gdb-7.6/bfd/bfd-in2.h
patching file gdb-7.6/gdb/symtab.c
patching file gdb-7.6/gdb/aarch64-linux-nat.c
patching file gdb-7.6/sim/igen/Makefile.in
patching file gdb-7.6/sim/mips/cp1.c
patching file gdb-7.6/sim/mips/sim-main.h
patching file gdb-7.6/readline/util.c
patching file gdb-7.6/gdb/symtab.c
patching file gdb-7.6/gdb/symtab.c
patching file gdb-7.6/opcodes/i386-dis.c
patching file gdb-7.6/bfd/coff-i386.c
patching file gdb-7.6/bfd/coff-x86_64.c
patching file gdb-7.6/opcodes/arm-dis.c
patching file gdb-7.6/bfd/elf64-ppc.c
patching file gdb-7.6/include/opcode/ppc.h
patching file gdb-7.6/opcodes/mips-dis.c
patching file gdb-7.6/gdb/ada-lang.c
patching file gdb-7.6/gdb/linux-record.c
patching file gdb-7.6/gdb/inflow.c
patching file gdb-7.6/gdb/printcmd.c
patching file gdb-7.6/gdb/c-typeprint.c
patching file gdb-7.6/gdb/symtab.c
patching file gdb-7.6/bfd/elf64-s390.c
patching file gdb-7.6/gdb/symtab.c
patching file gdb-7.6/bfd/configure
patching file gdb-7.6/opcodes/configure
patching file gdb-7.6/gdb/symtab.c
patching file gdb-7.6/gdb/symtab.c
patching file gdb-7.6/gdb/symtab.c
patching file gdb-7.6/gdb/common/linux-ptrace.c
patching file gdb-7.6/gdb/printcmd.c
Hunk #2 succeeded at 800 with fuzz 2.
Hunk #5 succeeded at 2187 with fuzz 1 (offset 995 lines).
if [ &quot;x86_64&quot; = &quot;ppc64le&quot; ] &amp;&amp; [ -f gdb-7.6-ppc64le-support.patch ]; then \
        patch -d gdb-7.6 -p1 -F0 &lt; gdb-7.6-ppc64le-support.patch ; \
fi

... [ cut ] ...

gcc -g -O2   -I. -I. -I./common -I./config -DLOCALEDIR=&quot;\&quot;/usr/local/share/locale\&quot;&quot; -DCRASH_MERGE -DHAVE_CONFIG_H -I./../include/opcode -I./../opcodes/.. -I./../readline/.. -I../bfd -I./../bfd -I./../include -I../libdecnumber -I./../libdecnumber  -I./gnulib/import -Ibuild-gnulib/import   -DTUI=1  -Wall -Wdeclaration-after-statement -Wpointer-arith -Wformat-nonliteral -Wno-pointer-sign -Wno-unused -Wunused-value -Wunused-function -Wno-switch -Wno-char-subscripts -Wmissing-prototypes -Wdeclaration-after-statement -Wempty-body  `echo &quot; -Wall -Wdeclaration-after-statement -Wpointer-arith -Wformat-nonliteral -Wno-pointer-sign -Wno-unused -Wunused-value -Wunused-function -Wno-switch -Wno-char-subscripts -Wmissing-prototypes -Wdeclaration-after-statement -Wempty-body &quot; | sed &quot;s/ -Wformat-nonliteral / -Wno-format-nonliteral /g&quot;` \
        -c -o printcmd.o -MT printcmd.o -MMD -MP -MF .deps/printcmd.Tpo ./printcmd.c
./printcmd.c: In function &#x2018;display_info&#x2019;:
./printcmd.c:2191:7: error: &#x2018;need_to_update_next_address&#x2019; undeclared (first use in this function); did you mean &#x2018;set_next_address&#x2019;?
   if (need_to_update_next_address)
       ^~~~~~~~~~~~~~~~~~~~~~~~~~~
       set_next_address
./printcmd.c:2191:7: note: each undeclared identifier is reported only once for each function it appears in
./printcmd.c:2192:20: error: &#x2018;addr_rewound&#x2019; undeclared (first use in this function)
     next_address = addr_rewound;
                    ^~~~~~~~~~~~
make[4]: *** [Makefile:1559: printcmd.o] Error 1
make[3]: *** [Makefile:8265: all-gdb] Error 2
make[2]: *** [Makefile:835: all] Error 2

crash build failed

make[1]: *** [Makefile:234: gdb_merge] Error 1
make: *** [Makefile:225: all] Error 2
$

Anyway, can you re-do your patch set so that it applies fuzz-free on the
original attempt?  

Thanks,
  Dave

--
Crash-utility mailing list
Crash-utility@xxxxxxxxxx
<a  rel="nofollow" href="https://www.redhat.com/mailman/listinfo/crash-utility">https://www.redhat.com/mailman/listinfo/crash-utility</a>



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div>
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="07786" href="msg07786.html">Re:  [PATCH] crash: dis: introduce count in reverse and forward mode</a></strong>
<ul><li><em>From:</em> Aaron Tomlin</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="07780" href="msg07780.html">Re:  [PATCH] crash: dis: introduce count in reverse and forward mode</a></strong>
<ul><li><em>From:</em> anderson</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg07782.html">[PATCH] timers: add option to show expired timers	only</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg07784.html">Re:  [PATCH] crash: bt: Introduce -p option</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg07780.html">Re:  [PATCH] crash: dis: introduce count in reverse and forward mode</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg07786.html">Re:  [PATCH] crash: dis: introduce count in reverse and forward mode</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#07783"><strong>Date</strong></a></li>
<li><a href="index.html#07783"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<center>
<font size=-1>
<a href=/lists/>[Index&nbsp;of&nbsp;Archives]</a>
&nbsp;
&nbsp;
<a href=/lists/fedora-devel/>[Fedora&nbsp;Development]</a>
&nbsp;
&nbsp;
<a href=/lists/fedora-desktop/>[Fedora&nbsp;Desktop]</a>
&nbsp;
&nbsp;
<a href=/lists/fedora-selinux/>[Fedora&nbsp;SELinux]</a>
&nbsp;
&nbsp;
<a href=https://yosemitenews.info>[Yosemite&nbsp;News]</a>
&nbsp;
&nbsp;
<a href=/lists/kde/>[KDE&nbsp;Users]</a>
&nbsp;
&nbsp;
<a href=/lists/fedora-tools/>[Fedora&nbsp;Tools]</a>
</font>
</center>
<hr>
<p>
<div>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-format="autorelaxed"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="1424524564"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<table width="100%">
<tr>
<td align=left>&nbsp;</td>
<td valign=top align=right><H1><a href=/lists/><img src=/button_01.gif border=0 alt="Powered by Linux"></a></H1></td>
</tr></table>
<!--X-User-Footer-End-->
<script type="text/javascript"> 
 function initAddThis() {
    addthis.init()
 }
initAddThis();
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-760190-1', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
