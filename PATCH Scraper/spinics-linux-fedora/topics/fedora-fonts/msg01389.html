<!-- MHonArc v2.6.19 -->
<!--X-Subject: [PATCH 4/6] Makefile: add check target using fontlint -->
<!--X-From-R13: Xna Bbxbeal &#60;wcbxbealNerqung.pbz> -->
<!--X-Date: Mon, 20 Feb 2012 08:16:05 &#45;0800 -->
<!--X-Message-Id: df637fdb&#45;f207&#45;4609&#45;8c2e&#45;ee42c6e5115e@zmail17.collab.prod.int.phx2.redhat.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 7020fad5&#45;72e5&#45;48e2&#45;b38f&#45;42311fff97b4@zmail17.collab.prod.int.phx2.redhat.com -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-3422782820843221",
          enable_page_level_ads: true
     });
</script>
<title>Fedora Fonts &mdash; [PATCH 4/6] Makefile: add check target using fontlint</title>
<style>
<!--
 pre {white-space: pre-wrap;}
-->
</style>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Fedora Fonts, [PATCH 4/6] Makefile: add check target using fontlint">
<link rel="alternate" type="application/rss+xml" title="Fedora Fonts" href="//feeds.feedburner.com/FedoraFonts">
</head>
<body itemscope itemtype="//schema.org/Article" vlink=green>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<form action="//www.google.com" id="cse-search-box" target="_blank">
  <div>
    <input type="hidden" name="cx" value="partner-pub-3422782820843221:9580497365" />
    <input type="hidden" name="ie" value="UTF-8" />
    <input type="text" name="q" size="25" />
    <input type="submit" name="sa" value="Search" />
  </div>
</form>
<script type="text/javascript" src="//www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en"></script>
<h1>[PATCH 4/6] Makefile: add check target using fontlint</h1>
[<a href="msg01388.html">Date Prev</a>][<a href="msg01390.html">Date Next</a>][<a href="msg01388.html">Thread Prev</a>][<a href="msg01390.html">Thread Next</a>][<a href="maillist.html#01389">Date Index</a>][<a href="index.html#01389">Thread Index</a>]


<p>&nbsp;<br>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive test for archives -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="6345952567"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>Subject</em>: [PATCH 4/6] Makefile: add check target using fontlint</li>
<li><em>From</em>: Jan Pokorny &lt;<a href="mailto:jpokorny@DOMAIN.HIDDEN">jpokorny@xxxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Mon, 20 Feb 2012 11:16:01 -0500 (EST)</li>
<li><em>Cc</em>: <a href="mailto:fonts@DOMAIN.HIDDEN">fonts@xxxxxxxxxxxxxxxxxxxxxxx</a></li>
<li><em>Delivered-to</em>: <a href="mailto:fonts@DOMAIN.HIDDEN">fonts@xxxxxxxxxxxxxxxxxxxxxxx</a></li>
<li><em>In-reply-to</em>: &lt;<a href="msg01385.html">7020fad5-72e5-48e2-b38f-42311fff97b4@zmail17.collab.prod.int.phx2.redhat.com</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_4"></a>
<a class="addthis_button_compact"></a>
<a class="addthis_counter addthis_bubble_style"></a>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5196c2ae1be43d18&async=1&domready=1" async></script>
<!-- AddThis Button END -->
<hr>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive link 1 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="8681825769"
     data-ad-format="link"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>
<div class="content" itemprop="articleBody">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Fontlint is a font checker accompanying FontForge.
The check will proceed the SFD files through it, outputting the messages
to both standard output and to the per commit specific file (failback
to per date specific if git information not available) for easy
regression checking.  This final part of &quot;check&quot; workflow can be done,
e.g., manually (with diff selecting the right files to compare).

To prevent logs from check messing the repo, capture them in local
.gitignore file that initially includes also archives and directory
with generated TTF files.

See also: <a  rel="nofollow" href="https://bugzilla.redhat.com/show_bug.cgi?id=795465">https://bugzilla.redhat.com/show_bug.cgi?id=795465</a>

Signed-off-by: Jan Pokorn&#xFD; &lt;jpokorny@xxxxxxxxxx&gt;
---
 source/.gitignore |    7 +++++++
 source/Makefile   |   12 +++++++++++-
 2 files changed, 18 insertions(+), 1 deletions(-)
 create mode 100644 source/.gitignore

diff --git a/source/.gitignore b/source/.gitignore
new file mode 100644
index 0000000..0615b11
--- /dev/null
+++ b/source/.gitignore
@@ -0,0 +1,7 @@
+# archives (this dir only)
+/*.tar.gz
+/*.zip
+# generated subdirectories
+/liberation-fonts-ttf-*/
+# logs from check
+/check_*
diff --git a/source/Makefile b/source/Makefile
index eb53799..ff28e79 100644
--- a/source/Makefile
+++ b/source/Makefile
@@ -1,11 +1,13 @@
 VER = 1.07.2
 #VER = 1.06.0.$(shell date +%Y%m%d)
 FONTFORGE = fontforge
+FONTLINT = fontlint
 
 TMPDIR := $(shell mktemp -d)
 SFDFILES := src/LiberationMono-Bold.sfd src/LiberationMono-BoldItalic.sfd src/LiberationMono-Italic.sfd src/LiberationMono-Regular.sfd src/LiberationSans-Bold.sfd src/LiberationSans-BoldItalic.sfd src/LiberationSans-Italic.sfd src/LiberationSans-Regular.sfd src/LiberationSerif-Bold.sfd src/LiberationSerif-BoldItalic.sfd src/LiberationSerif-Italic.sfd src/LiberationSerif-Regular.sfd src/LiberationSansNarrow-Regular.sfd src/LiberationSansNarrow-Bold.sfd src/LiberationSansNarrow-Italic.sfd src/LiberationSansNarrow-BoldItalic.sfd
 SCRIPTS := scripts/sfd2ttf.pe scripts/ttf2sfd.pe
 MISCFILES := AUTHORS ChangeLog COPYING License.txt README TODO
+CHECK_PREFIX = check
 
 all: build
 
@@ -31,7 +33,15 @@ dist-ttf: clean-ttf build
        tar czvhf liberation-fonts-ttf-$(VER).tar.gz liberation-fonts-ttf-$(VER)/
 #      zip -j liberation-fonts-ttf-$(VER).zip liberation-fonts-ttf-$(VER)/*
        rm -rf liberation-fonts-ttf-$(VER)
+
+check:
+       log=&quot;$(CHECK_PREFIX)_$$(git describe --dirty --always 2&gt;/dev/null||date +%Y%m%d)&quot; \
+         &amp;&amp; for sfd in $(SFDFILES); do \
+                $(FONTLINT) $${sfd} 2&gt;/dev/null | tee -a $${log}; echo; \
+            done
+
 clean: clean-ttf clean-src
+       rm -f $(CHECK_PREFIX)_*
 
 clean-ttf:
        rm -rf liberation-fonts-*
@@ -39,4 +49,4 @@ clean-ttf:
 clean-src:
        rm -f *.tar.gz
 
-.PHONY: all build dist dist-src dist-sfd dist-ttf clean clean-ttf clean-src
+.PHONY: all build dist dist-src dist-sfd dist-ttf check clean clean-ttf clean-src
-- 
_______________________________________________
fonts mailing list
fonts@xxxxxxxxxxxxxxxxxxxxxxx
<a  rel="nofollow" href="https://admin.fedoraproject.org/mailman/listinfo/fonts">https://admin.fedoraproject.org/mailman/listinfo/fonts</a>
<a  rel="nofollow" href="http://fonts.fedoraproject.org/">http://fonts.fedoraproject.org/</a>


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div>
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg01388.html">[PATCH 3/6] Makefile: add .PHONY target</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg01390.html">[PATCH 5/6] Makefile: restructure for usability and modularity</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg01388.html">[PATCH 3/6] Makefile: add .PHONY target</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg01390.html">[PATCH 5/6] Makefile: restructure for usability and modularity</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#01389"><strong>Date</strong></a></li>
<li><a href="index.html#01389"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<center>
<font size=-1>
<a href=/lists/>[Index&nbsp;of&nbsp;Archives]</a>
&nbsp;
&nbsp;
<a href=/linux/fedora/fedora-users/>[Fedora&nbsp;Users]</a>
&nbsp;
&nbsp;
<a href=/lists/font-config/>[Font&nbsp;Configuration]</a>
&nbsp;
&nbsp;
<a href=/linux/fedora/fedora-maintainers/>[Fedora&nbsp;Maintainers]</a>
&nbsp;
&nbsp;
<a href=/lists/fedora-desktop/>[Fedora&nbsp;Desktop]</a>
&nbsp;
&nbsp;
<a href=/lists/fedora-selinux/>[Fedora&nbsp;SELinux]</a>
&nbsp;
&nbsp;
<a href=http://www.ske-art.com/z//biglist.php>[Big&nbsp;List&nbsp;of&nbsp;Linux&nbsp;Books]</a>
&nbsp;
&nbsp;
<a href=https://yosemitenews.info>[Yosemite&nbsp;Forum]</a>
&nbsp;
&nbsp;
<a href=/lists/kde/>[KDE&nbsp;Users]</a>
</font>
</center>
<hr>
<p>
<div>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-format="autorelaxed"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="1424524564"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<table width=100%>
<tr>
<td align=left>&nbsp;</td>
<td align=right><a href=/lists/><img src=/button_01.gif border=0 alt="Powered by Linux"></a></td>
</tr>
</table>
<!--X-User-Footer-End-->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-760190-1', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
