<!-- MHonArc v2.6.19 -->
<!--X-Subject: [PATCH] virt&#45;manager: make fullscreen mode -->
<!--X-From-R13: =?WEA&#45;8859&#45;1?C?Uhvqb_U=TQagure?= &#60;ntkNfvtkpch.bet> -->
<!--X-Date: Thu, 19 Feb 2009 07:11:53 &#45;0800 -->
<!--X-Message-Id: 499D76A6.2080805@sigxcpu.org -->
<!--X-Content-Type: multipart/mixed -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-3422782820843221",
          enable_page_level_ads: true
     });
</script>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Fedora Management Tools, [PATCH] virt-manager: make fullscreen mode">
<style>
<!--
 pre {white-space: pre-wrap;}
-->
</style>
<link rel="alternate" type="application/rss+xml" title="Fedora Management Tools" href="//feedproxy.google.com/Fedora/linuxManagementTools">
<title>Fedora Management Tools -- [PATCH] virt-manager: make fullscreen mode</title>
</head>
<body vlink=green>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<form action="//www.google.com" id="cse-search-box" target="_blank">
  <div>
    <input type="hidden" name="cx" value="partner-pub-3422782820843221:9580497365" />
    <input type="hidden" name="ie" value="UTF-8" />
    <input type="text" name="q" size="25" />
    <input type="submit" name="sa" value="Search" />
  </div>
</form>
<script type="text/javascript" src="//www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en"></script>
<h1 itemprop="name">[PATCH] virt-manager: make fullscreen mode</h1>
[<a href="msg04690.html">Date Prev</a>][<a href="msg04692.html">Date Next</a>][<a href="msg04690.html">Thread Prev</a>][<a href="msg04707.html">Thread Next</a>][<a href="maillist.html#04691">Date Index</a>][<a href="index.html#04691">Thread Index</a>]


<p>&nbsp;<br>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive test for archives -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="6345952567"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>Subject</em>: [PATCH] virt-manager: make fullscreen mode</li>
<li><em>From</em>: Guido G&#xFC;nther &lt;<a href="mailto:agx@DOMAIN.HIDDEN">agx@xxxxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Thu, 19 Feb 2009 16:11:34 +0100</li>
<li><em>Reply-to</em>: Fedora/Linux Management Tools &lt;<a href="mailto:et-mgmt-tools@DOMAIN.HIDDEN">et-mgmt-tools@xxxxxxxxxx</a>&gt;</li>
<li><em>User-agent</em>: Mozilla-Thunderbird 2.0.0.19 (X11/20090103)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_4"></a>
<a class="addthis_button_compact"></a>
<a class="addthis_counter addthis_bubble_style"></a>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5196c2ae1be43d18&async=1&domready=1" async></script>
<!-- AddThis Button END -->
<hr>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive link 1 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="8681825769"
     data-ad-format="link"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>
<div class="content" itemprop="articleBody">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">
Hi,
</pre><tt>when a VM uses a video mode that is larger than the mode of the host 
</tt><tt>running virt-manager fullscreen mode isn't particular useful at the 
</tt><tt>moment. Since there are no scroll bars (due to _force_resize), parts of 
</tt><tt>the screen simply get cut off. Attached patch sets the size of the vnc 
</tt><tt>widget to the actual screen size (minus the height of the menu bar) when 
</tt><tt>switching to fullscreen mode with scaling enabled. This makes things 
</tt><tt>work much better for me.
</tt><pre style="margin: 0em;">
Cheers,
-- Guido

</pre><pre>gtk-vnc supports scaling down

so if in fullscreen mode and scaling is enabled set the size of the vnc widget
to the screensize (and substract the height of the menubar).

diff -r e1f1421138dc src/virtManager/details.py
--- a/src/virtManager/details.py	Thu Feb 19 15:23:01 2009 +0100
+++ b/src/virtManager/details.py	Thu Feb 19 15:54:38 2009 +0100
@@ -437,6 +441,16 @@
     def toggle_fullscreen(self, src):
         self.window.get_widget(&quot;control-fullscreen&quot;).set_active(src.get_active())
         if src.get_active():
+
+            # if scaling is enabled make sure we fit onto the root window
+            if self.vncViewer.get_scaling():
+                w, h = self.window.get_widget(&quot;menubar3&quot;).size_request() 
+                rootw = src.get_screen().get_width()
+                rooth = src.get_screen().get_height() - h
+                self.vncViewer.set_size_request(rootw, rooth)
+            else:
+                self.vncViewer.set_size_request(-1, -1)
+
             self.window.get_widget(&quot;vmm-details&quot;).fullscreen()
             if self.config.get_console_keygrab() == 1:
                 gtk.gdk.keyboard_grab(self.vncViewer.window, False, 0L)
</pre><pre>_______________________________________________
et-mgmt-tools mailing list
et-mgmt-tools@xxxxxxxxxx
<a  rel="nofollow" href="https://www.redhat.com/mailman/listinfo/et-mgmt-tools">https://www.redhat.com/mailman/listinfo/et-mgmt-tools</a></pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div>
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="04707" href="msg04707.html">Re:  [PATCH] virt-manager: make fullscreen mode</a></strong>
<ul><li><em>From:</em> Cole Robinson</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg04690.html">Dell 6850</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg04692.html">[PATCH] virt-manager: gtk-vnc 0.3.8 handles	rescaling with compiz</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg04690.html">Dell 6850</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg04707.html">Re:  [PATCH] virt-manager: make fullscreen mode</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#04691"><strong>Date</strong></a></li>
<li><a href="index.html#04691"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<center>
<font size=-1>
<a href=/lists/>[Index&nbsp;of&nbsp;Archives]</a>
&nbsp;
&nbsp;
<a href=/linux/fedora/fedora-users/>[Fedora&nbsp;Users]</a>
&nbsp;
&nbsp;
<a href=/lists/fll/>[Fedora&nbsp;Legacy&nbsp;List]</a>
&nbsp;
&nbsp;
<a href=/linux/fedora/fedora-maintainers/>[Fedora&nbsp;Maintainers]</a>
&nbsp;
&nbsp;
<a href=/lists/fedora-desktop/>[Fedora&nbsp;Desktop]</a>
&nbsp;
&nbsp;
<a href=/lists/fedora-selinux/>[Fedora&nbsp;SELinux]</a>
&nbsp;
&nbsp;
<a href=http://www.ske-art.com/z/biglist.html>[Big&nbsp;List&nbsp;of&nbsp;Linux&nbsp;Books]</a>
&nbsp;
&nbsp;
<a href=https://yosemitenews.info>[Yosemite&nbsp;News]</a>
&nbsp;
&nbsp;
<a href=/lists/kde/>[KDE&nbsp;Users]</a>
&nbsp;
&nbsp;
<a href=/lists/fedora-tools/>[Fedora&nbsp;Tools]</a>
</font>
</center>
<hr>
<p>
<div>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-format="autorelaxed"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="1424524564"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<table width=100%>
<tr>
<td align=left>&nbsp;</td>
<td align=right><a href=/lists/><img src=/button_01.gif border=0 alt="Powered by Linux"></a></td>
</tr>
</table>
<!--X-User-Footer-End-->
<script type="text/javascript"> 
 function initAddThis() {
    addthis.init()
 }
initAddThis();
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-760190-1', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
