<!-- MHonArc v2.6.19 -->
<!--X-Subject: [PATCH] virt&#45;manager: set proper parents for dialogs -->
<!--X-From-R13: Uhvqb =?vfb&#45;8859&#45;1?C?U=TQagure?= &#60;ntkNfvtkpch.bet> -->
<!--X-Date: Fri, 8 May 2009 07:51:11 &#45;0700 -->
<!--X-Message-Id: 20090508144944.GA28169@bogon.ms20.nix -->
<!--X-Content-Type: multipart/mixed -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-3422782820843221",
          enable_page_level_ads: true
     });
</script>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Fedora Management Tools, [PATCH] virt-manager: set proper parents for dialogs">
<style>
<!--
 pre {white-space: pre-wrap;}
-->
</style>
<link rel="alternate" type="application/rss+xml" title="Fedora Management Tools" href="//feedproxy.google.com/Fedora/linuxManagementTools">
<title>Fedora Management Tools -- [PATCH] virt-manager: set proper parents for dialogs</title>
</head>
<body vlink=green>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<form action="//www.google.com" id="cse-search-box" target="_blank">
  <div>
    <input type="hidden" name="cx" value="partner-pub-3422782820843221:9580497365" />
    <input type="hidden" name="ie" value="UTF-8" />
    <input type="text" name="q" size="25" />
    <input type="submit" name="sa" value="Search" />
  </div>
</form>
<script type="text/javascript" src="//www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en"></script>
<h1 itemprop="name">[PATCH] virt-manager: set proper parents for dialogs</h1>
[<a href="msg04875.html">Date Prev</a>][<a href="msg04877.html">Date Next</a>][<a href="msg04875.html">Thread Prev</a>][<a href="msg04877.html">Thread Next</a>][<a href="maillist.html#04876">Date Index</a>][<a href="index.html#04876">Thread Index</a>]


<p>&nbsp;<br>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive test for archives -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="6345952567"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>Subject</em>: [PATCH] virt-manager: set proper parents for dialogs</li>
<li><em>From</em>: Guido G&#xFC;nther &lt;<a href="mailto:agx@DOMAIN.HIDDEN">agx@xxxxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Fri, 8 May 2009 16:49:44 +0200</li>
<li><em>Reply-to</em>: Fedora/Linux Management Tools &lt;<a href="mailto:et-mgmt-tools@DOMAIN.HIDDEN">et-mgmt-tools@xxxxxxxxxx</a>&gt;</li>
<li><em>User-agent</em>: Mutt/1.5.18 (2008-05-17)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_4"></a>
<a class="addthis_button_compact"></a>
<a class="addthis_counter addthis_bubble_style"></a>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5196c2ae1be43d18&async=1&domready=1" async></script>
<!-- AddThis Button END -->
<hr>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive link 1 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="8681825769"
     data-ad-format="link"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>
<div class="content" itemprop="articleBody">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Hi,
the attached patch is a first attempt to make virt-manager better usable
under tiling window managers like awesome[1]. The problem is that
virt-manager opens dialogs without a parent set (like passing NULL as
the first argument of gtk_message_dialog_new). This patch is a first
attempt on fixing that for some of them. This way dialogs like the about
dialog get displayed in the middle of the main window instead of
floating. Does this look like the right thing to do? 
Cheers,
 -- Guido

[1] <a  rel="nofollow" href="http://awesome.naquadah.org/">http://awesome.naquadah.org/</a>
</pre><pre># HG changeset patch
# User Guido G&#xFC;nther &lt;agx@xxxxxxxxxxx&gt;
# Date 1241793452 -7200
# Node ID 357e834adb137baf32276d013188230eb14c73de
# Parent  5b61bd10a66b91d40ad5652a8f39b14273175292
Add a proper parent to dialogs.

diff -r 5b61bd10a66b -r 357e834adb13 src/virtManager/about.py
--- a/src/virtManager/about.py	Thu May 07 19:22:33 2009 +0100
+++ b/src/virtManager/about.py	Fri May 08 16:37:32 2009 +0200
@@ -43,9 +43,10 @@
             &quot;on_vmm_about_response&quot;: self.close,
             })
 
-    def show(self):
+    def show(self, parent):
         dialog = self.window.get_widget(&quot;vmm-about&quot;)
         dialog.set_version(self.config.get_appversion())
+        dialog.set_transient_for(parent)
         dialog.show_all()
         dialog.present()
 
diff -r 5b61bd10a66b -r 357e834adb13 src/virtManager/connect.py
--- a/src/virtManager/connect.py	Thu May 07 19:22:33 2009 +0100
+++ b/src/virtManager/connect.py	Fri May 08 16:37:32 2009 +0200
@@ -102,8 +102,9 @@
         self.window.get_widget(&quot;vmm-open-connection&quot;).hide()
         self.stop_browse()
 
-    def show(self):
+    def show(self, parent):
         win = self.window.get_widget(&quot;vmm-open-connection&quot;)
+        win.set_transient_for(parent)
         win.show_all()
         win.present()
         self.reset_state()
diff -r 5b61bd10a66b -r 357e834adb13 src/virtManager/engine.py
--- a/src/virtManager/engine.py	Thu May 07 19:22:33 2009 +0100
+++ b/src/virtManager/engine.py	Fri May 08 16:37:32 2009 +0200
@@ -210,7 +210,7 @@
     def show_about(self):
         if self.windowAbout == None:
             self.windowAbout = vmmAbout(self.get_config())
-        self.windowAbout.show()
+        self.windowAbout.show(self.windowManager.win)
 
     def show_help(self, index):
         try:
@@ -221,7 +221,8 @@
 
     def show_preferences(self):
         if self.windowPreferences == None:
-            self.windowPreferences = vmmPreferences(self.get_config())
+            self.windowPreferences = vmmPreferences(self.get_config(),
+                                                    self.windowManager.win)
             self.windowPreferences.connect(&quot;action-show-help&quot;, self._do_show_help)
         self.windowPreferences.show()
 
@@ -239,7 +240,7 @@
             self.windowConnect = vmmConnect(self.get_config(), self)
             self.windowConnect.connect(&quot;completed&quot;, self._connect_to_uri)
             self.windowConnect.connect(&quot;cancelled&quot;, self._connect_cancelled)
-        self.windowConnect.show()
+        self.windowConnect.show(self.windowManager.win)
 
     def show_console(self, uri, uuid):
         win = self.show_details(uri, uuid)
diff -r 5b61bd10a66b -r 357e834adb13 src/virtManager/manager.py
--- a/src/virtManager/manager.py	Thu May 07 19:22:33 2009 +0100
+++ b/src/virtManager/manager.py	Fri May 08 16:37:32 2009 +0200
@@ -119,6 +119,7 @@
                                   _(&quot;An unexpected error occurred&quot;))
         self.config = config
         self.engine = engine
+        self.win = self.window.get_widget(&quot;vmm-manager&quot;)
 
         self.delete_dialog = None
         self.startup_error = None
@@ -343,11 +344,10 @@
             vmlist.get_selection().select_iter(vmlist.get_model().get_iter_first())
 
     def show(self):
-        win = self.window.get_widget(&quot;vmm-manager&quot;)
         if self.is_visible():
-            win.present()
+            self.win.present()
             return
-        win.show_all()
+        self.win.show_all()
         self.engine.increment_window_counter()
 
         if self.startup_error:
diff -r 5b61bd10a66b -r 357e834adb13 src/virtManager/preferences.py
--- a/src/virtManager/preferences.py	Thu May 07 19:22:33 2009 +0100
+++ b/src/virtManager/preferences.py	Fri May 08 16:37:32 2009 +0200
@@ -29,12 +29,13 @@
         &quot;action-show-help&quot;: (gobject.SIGNAL_RUN_FIRST,
                              gobject.TYPE_NONE, [str]),
         }
-    def __init__(self, config):
+    def __init__(self, config, parent):
         self.__gobject_init__()
         self.window = gtk.glade.XML(config.get_glade_dir() + &quot;/vmm-preferences.glade&quot;, &quot;vmm-preferences&quot;, domain=&quot;virt-manager&quot;)
         self.config = config
 
         self.topwin = self.window.get_widget(&quot;vmm-preferences&quot;)
+        self.topwin.set_transient_for(parent)
         self.topwin.hide()
 
         self.config.on_console_popup_changed(self.refresh_console_popup)
</pre><pre>_______________________________________________
et-mgmt-tools mailing list
et-mgmt-tools@xxxxxxxxxx
<a  rel="nofollow" href="https://www.redhat.com/mailman/listinfo/et-mgmt-tools">https://www.redhat.com/mailman/listinfo/et-mgmt-tools</a></pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div>
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="04877" href="msg04877.html">Re:  [PATCH] virt-manager: set proper parents for	dialogs</a></strong>
<ul><li><em>From:</em> Cole Robinson</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg04875.html">[PATCH] virt-install: allow to set nic model</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg04877.html">Re:  [PATCH] virt-manager: set proper parents for	dialogs</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg04875.html">[PATCH] virt-install: allow to set nic model</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg04877.html">Re:  [PATCH] virt-manager: set proper parents for	dialogs</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#04876"><strong>Date</strong></a></li>
<li><a href="index.html#04876"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<center>
<font size=-1>
<a href=/lists/>[Index&nbsp;of&nbsp;Archives]</a>
&nbsp;
&nbsp;
<a href=/linux/fedora/fedora-users/>[Fedora&nbsp;Users]</a>
&nbsp;
&nbsp;
<a href=/lists/fll/>[Fedora&nbsp;Legacy&nbsp;List]</a>
&nbsp;
&nbsp;
<a href=/linux/fedora/fedora-maintainers/>[Fedora&nbsp;Maintainers]</a>
&nbsp;
&nbsp;
<a href=/lists/fedora-desktop/>[Fedora&nbsp;Desktop]</a>
&nbsp;
&nbsp;
<a href=/lists/fedora-selinux/>[Fedora&nbsp;SELinux]</a>
&nbsp;
&nbsp;
<a href=http://www.ske-art.com/z/biglist.html>[Big&nbsp;List&nbsp;of&nbsp;Linux&nbsp;Books]</a>
&nbsp;
&nbsp;
<a href=https://yosemitenews.info>[Yosemite&nbsp;News]</a>
&nbsp;
&nbsp;
<a href=/lists/kde/>[KDE&nbsp;Users]</a>
&nbsp;
&nbsp;
<a href=/lists/fedora-tools/>[Fedora&nbsp;Tools]</a>
</font>
</center>
<hr>
<p>
<div>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-format="autorelaxed"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="1424524564"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<table width=100%>
<tr>
<td align=left>&nbsp;</td>
<td align=right><a href=/lists/><img src=/button_01.gif border=0 alt="Powered by Linux"></a></td>
</tr>
</table>
<!--X-User-Footer-End-->
<script type="text/javascript"> 
 function initAddThis() {
    addthis.init()
 }
initAddThis();
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-760190-1', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
