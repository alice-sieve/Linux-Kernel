<!-- MHonArc v2.6.19 -->
<!--X-Subject: Re: [PATCH V2 1/1 (was 0/1 by accident)] tools/dtrace: initial implementation of DTrace -->
<!--X-From-R13: Peraqna Uertt &#60;oeraqna.q.terttNtznvy.pbz> -->
<!--X-Date: Wed, 10 Jul 2019 14:35:30 &#45;0700 -->
<!--X-Message-Id: CAE40pddGhVe=rcEqQUN_=UhRHodfgaRXuLfUqiV6xVkEx_m&#45;yg@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 201907101537.x6AFboMR015946@aserv0122.oracle.com -->
<!--X-Reference: 201907101542.x6AFgOO9012232@userv0121.oracle.com -->
<!--X-Reference: 20190710181227.GA9925@oracle.com -->
<!--X-Reference: c7f15d1d&#45;1696&#45;4d95&#45;1729&#45;4c4e97bdc43e@iogearbox.net -->
<!--X-Reference: 20190710143048.3923d1d9@lwn.net -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-3422782820843221",
          enable_page_level_ads: true
     });
</script>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="BPF: Re: [PATCH V2 1/1 (was 0/1 by accident)] tools/dtrace: initial implementation of DTrace">
<style>
<!--
 pre {white-space: pre-wrap;}
-->
</style>
<title>Re: [PATCH V2 1/1 (was 0/1 by accident)] tools/dtrace: initial implementation of DTrace &mdash; BPF</title>
<link rel="alternate" type="application/rss+xml" title="BPF" href="//feeds.feedburner.com/packetfilters">
<script type="text/javascript">
var addthis_config = addthis_config||{};
addthis_config.data_track_addressbar = false;
</script>
</head>
<body itemscope itemtype="//schema.org/Article" bgcolor=white vlink=green link=blue>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<form action="//www.google.com" id="cse-search-box" target="_blank">
  <div>
    <input type="hidden" name="cx" value="partner-pub-3422782820843221:9580497365" />
    <input type="hidden" name="ie" value="UTF-8" />
    <input type="text" name="q" size="25" />
    <input type="submit" name="sa" value="Search" />
  </div>
</form>
<script type="text/javascript" src="//www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en"></script>
<h1 itemprop="name">Re: [PATCH V2 1/1 (was 0/1 by accident)] tools/dtrace: initial implementation of DTrace</h1>
[<a href="msg05196.html">Date Prev</a>][<a href="msg05198.html">Date Next</a>][<a href="msg05200.html">Thread Prev</a>][<a href="msg05201.html">Thread Next</a>][<a href="maillist.html#05197">Date Index</a>][<a href="index.html#05197">Thread Index</a>]


<p>&nbsp;<br>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive test for archives -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="6345952567"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>Subject</em>: Re: [PATCH V2 1/1 (was 0/1 by accident)] tools/dtrace: initial implementation of DTrace</li>
<li><em>From</em>: Brendan Gregg &lt;brendan.d.gregg@xxxxxxxxx&gt;</li>
<li><em>Date</em>: Wed, 10 Jul 2019 14:35:01 -0700</li>
<li><em>Cc</em>: Daniel Borkmann &lt;daniel@xxxxxxxxxxxxx&gt;,        Kris Van Hees &lt;kris.van.hees@xxxxxxxxxx&gt;, netdev@xxxxxxxxxxxxxxx,        bpf@xxxxxxxxxxxxxxx, dtrace-devel@xxxxxxxxxxxxxx,        LKML &lt;linux-kernel@xxxxxxxxxxxxxxx&gt;,        Steven Rostedt &lt;rostedt@xxxxxxxxxxx&gt;,        Masami Hiramatsu &lt;mhiramat@xxxxxxxxxx&gt;,        Arnaldo Carvalho de Melo &lt;acme@xxxxxxxxxx&gt;,        Alexei Starovoitov &lt;ast@xxxxxxxxxx&gt;,        Peter Zijlstra &lt;peterz@xxxxxxxxxxxxx&gt;, Chris Mason &lt;clm@xxxxxx&gt;,        &quot;David S. Miller&quot; &lt;davem@xxxxxxxxxxxxx&gt;</li>
<li><em>In-reply-to</em>: &lt;<a href="msg05195.html">20190710143048.3923d1d9@lwn.net</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_4"></a>
<a class="addthis_button_compact"></a>
<a class="addthis_counter addthis_bubble_style"></a>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5196c2ae1be43d18&async=1&domready=1" async></script>
<!-- AddThis Button END -->
<hr>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive link 1 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="8681825769"
     data-ad-format="link"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>
<div class="content" itemprop="articleBody">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>On Wed, Jul 10, 2019 at 1:30 PM Jonathan Corbet &lt;corbet@xxxxxxx&gt; wrote:
&gt;<i></i>
&gt;<i> On Wed, 10 Jul 2019 21:32:25 +0200</i>
&gt;<i> Daniel Borkmann &lt;daniel@xxxxxxxxxxxxx&gt; wrote:</i>
&gt;<i></i>
&gt;<i> &gt; Looks like you missed Brendan Gregg's prior feedback from v1 [0]. I haven't</i>
&gt;<i> &gt; seen a strong compelling argument for why this needs to reside in the kernel</i>
&gt;<i> &gt; tree given we also have all the other tracing tools and many of which also</i>
&gt;<i> &gt; rely on BPF such as bcc, bpftrace, ply, systemtap, sysdig, lttng to just name</i>
&gt;<i> &gt; a few.</i>
&gt;<i></i>
&gt;<i> So I'm just watching from the sidelines here, but I do feel the need to</i>
&gt;<i> point out that Kris appears to be trying to follow the previous feedback</i>
&gt;<i> he got from Alexei, where creating tools/dtrace is exactly what he was</i>
&gt;<i> told to do:</i>
&gt;<i></i>
&gt;<i>   <a  rel="nofollow" href="https://lwn.net/ml/netdev/20190521175617.ipry6ue7o24a2e6n@xxxxxxxxxxxxxxxxxxxxxxxxxxxx/">https://lwn.net/ml/netdev/20190521175617.ipry6ue7o24a2e6n@xxxxxxxxxxxxxxxxxxxxxxxxxxxx/</a></i>

&gt;<i>From what I saw, the discussion was about kernel and user bits, where</i>
the user bit was a &quot;little tool is currently hardcoded to process a
single test case&quot;. I missed it first time around, but was going to
make the case that such tests belong in tools/testing/selftests/bpf
rather than tools/dtrace, since we have other similar test cases to
ensure bits of BPF work.

This patchset pivoted from a single test case to the entire DTrace
front end. If this was Kris's intent all along, it wasn't clear to me
(and maybe Alexei either) until now.

&gt;<i></i>
&gt;<i> Now he's being told the exact opposite.  Not the best experience for</i>
&gt;<i> somebody who is trying to make the kernel better.</i>
&gt;<i></i>
&gt;<i> There are still people interested in DTrace out there.</i>

Yes, they can:

apt-get install bpftrace (or snap, yum, whatever)

and start solving production problems today, like we are.

&gt;<i> How would you</i>
&gt;<i> recommend that Kris proceed at this point?</i>

You may not be asking me, but I don't think it's best for Linux to
split our tracing expertise among 13 different tracers (SystemTap,
LTTng, ftrace, perf, dtrace4linux, OEL DTrace, ktap, sysdig, Intel
PIN, bcc, shark, ply, and bpftrace). bpftrace is already far ahead and
in use in production, and Kris is just starting building a new one. I
actually think we need to consolidate our expertise on fewer tracers,
which includes asking developers to jump the fence and work on other
projects (like I did myself). But I also recognize's Kris's need to
support legacy users, so I'll stop short of saying that it shouldn't
exist at all.

Brendan


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div>
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="05175" href="msg05175.html">[PATCH V2 0/1] tools/dtrace: initial implementation of DTrace</a></strong>
<ul><li><em>From:</em> Kris Van Hees</li></ul></li>
<li><strong><a name="05176" href="msg05176.html">[PATCH V2 0/1] tools/dtrace: initial implementation of DTrace</a></strong>
<ul><li><em>From:</em> Kris Van Hees</li></ul></li>
<li><strong><a name="05184" href="msg05184.html">Re: [PATCH V2 1/1 (was 0/1 by accident)] tools/dtrace: initial implementation of DTrace</a></strong>
<ul><li><em>From:</em> Kris Van Hees</li></ul></li>
<li><strong><a name="05190" href="msg05190.html">Re: [PATCH V2 1/1 (was 0/1 by accident)] tools/dtrace: initial implementation of DTrace</a></strong>
<ul><li><em>From:</em> Daniel Borkmann</li></ul></li>
<li><strong><a name="05195" href="msg05195.html">Re: [PATCH V2 1/1 (was 0/1 by accident)] tools/dtrace: initial implementation of DTrace</a></strong>
<ul><li><em>From:</em> Jonathan Corbet</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg05196.html">Re: [PATCH V2 1/1 (was 0/1 by accident)] tools/dtrace: initial implementation of DTrace</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg05198.html">Re: [PATCH V2 1/1 (was 0/1 by accident)] tools/dtrace: initial implementation of DTrace</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg05200.html">Re: [PATCH V2 1/1 (was 0/1 by accident)] tools/dtrace: initial implementation of DTrace</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg05201.html">Re: [PATCH V2 0/1] tools/dtrace: initial implementation of DTrace</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#05197"><strong>Date</strong></a></li>
<li><a href="index.html#05197"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<center>
<font size=-1>
<a href=/lists/>[Index&nbsp;of&nbsp;Archives]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-samsung-soc/>[Linux&nbsp;Samsung&nbsp;SoC]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-rockchip/>[Linux&nbsp;Rockchip&nbsp;SoC]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-actions/>[Linux&nbsp;Actions&nbsp;SoC]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-snps-arc/>[Linux&nbsp;for&nbsp;Synopsys&nbsp;ARC&nbsp;Processors]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-nfs/>[Linux&nbsp;NFS]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-nilfs/>[Linux&nbsp;NILFS]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-usb/>[Linux&nbsp;USB&nbsp;Devel]</a>
&nbsp;
&nbsp;
<a href=/lists/vfl/>[Video&nbsp;for&nbsp;Linux]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-audio-users/>[Linux&nbsp;Audio&nbsp;Users]</a>
&nbsp;
&nbsp;
<a href=https://yosemitenews.info/>[Yosemite&nbsp;News]</a>
&nbsp;
&nbsp;
<a href=/lists/kernel/>[Linux&nbsp;Kernel]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-scsi/>[Linux&nbsp;SCSI]</a>
</font>
</center>
<p>
<hr>
<div>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-format="autorelaxed"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="1424524564"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<table width=100%>
<tr>
<td align=left>&nbsp;</td>
<td align=right><a href=/lists/><img src=/button_01.gif border=0 alt="Powered by Linux"></a></td>
</tr>
</table>
<!--X-User-Footer-End-->
<script type="text/javascript"> 
 function initAddThis() {
    addthis.init()
 }
initAddThis();
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-760190-1', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
