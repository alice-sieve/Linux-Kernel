<!-- MHonArc v2.6.19 -->
<!--X-Subject: [RFC][PATCH] LAN9211 and LAN9221 NFS mounting and overrun fix on omap	LDP -->
<!--X-From-R13: Ehoenznav Hraxngrfu &#60;fhooh31znavNtznvy.pbz> -->
<!--X-Date: Wed, 25 Mar 2009 09:44:33 &#45;0700 -->
<!--X-Message-Id: 25dd9bf10903250938h565ddf49rc556931b3bdc3d55@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-3422782820843221",
          enable_page_level_ads: true
     });
</script>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Linux ARM: [RFC][PATCH] LAN9211 and LAN9221 NFS mounting and overrun fix on omap	LDP">
<style>
<!--
 pre {white-space: pre-wrap;}
-->
</style>
<title>Linux ARM, Xscale &mdash; [RFC][PATCH] LAN9211 and LAN9221 NFS mounting and overrun fix on omap	LDP</title>
<link rel="alternate" type="application/rss+xml" title="Linux ARM" href="//feeds.feedburner.com/LinuxArmxscaleEtc">
</head>
<body itemscope itemtype="//schema.org/Article" vlink=green>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<form action="//www.google.com" id="cse-search-box" target="_blank">
  <div>
    <input type="hidden" name="cx" value="partner-pub-3422782820843221:1790192168" />
    <input type="hidden" name="ie" value="UTF-8" />
    <input type="text" name="q" size="55" />
    <input type="submit" name="sa" value="Search" />
  </div>
</form>
<script type="text/javascript" src="//www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en" async defer></script>
<h1 itemprop="name">[RFC][PATCH] LAN9211 and LAN9221 NFS mounting and overrun fix on omap	LDP</h1>
[<a href="msg15342.html">Date Prev</a>][<a href="msg15344.html">Date Next</a>][<a href="msg15333.html">Thread Prev</a>][<a href="msg15344.html">Thread Next</a>][<a href="maillist.html#15343">Date Index</a>][<a href="threads.html#15343">Thread Index</a>] 


<p>&nbsp;<br>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive test for archives -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="6345952567"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: <a href="mailto:nico@DOMAIN.HIDDEN">nico@xxxxxxx</a></li>
<li><em>Subject</em>: [RFC][PATCH] LAN9211 and LAN9221 NFS mounting and overrun fix on omap	LDP</li>
<li><em>From</em>: Subramani Venkatesh &lt;<a href="mailto:subbu31mani@DOMAIN.HIDDEN">subbu31mani@xxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Wed, 25 Mar 2009 12:38:36 -0400</li>
<li><em>Cc</em>: linux-arm &lt;<a href="mailto:linux-arm@DOMAIN.HIDDEN">linux-arm@xxxxxxxxxxxxxxxxxxxxxx</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_4"></a>
<a class="addthis_button_compact"></a>
<a class="addthis_counter addthis_bubble_style"></a>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5196c2ae1be43d18&async=1&domready=1" defer async></script>
<!-- AddThis Button END -->
<hr>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive link 1 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="8681825769"
     data-ad-format="link"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>
<div class="content" itemprop="articleBody">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Hi,
I need your comment on the patch I generated on 2.6.27 Linux ARM for omap LDP.
With this patch we are able to mount the NFS even with heavy traffic
like ping -f option, without which NFS retrying and hangs.
I am not sure whether this problem is fixed with the new the kernel, I
need your comments whether we can intergrate with the kernel or not.

&gt;From 9bd50055785492f52877fc719ec5ad02dd183a99 Mon Sep 17 00:00:00 2001
From: Subramani Venkatesh &lt;subramani.venkatesh@xxxxxxxxxxxxx&gt;
Date: Wed, 25 Mar 2009 12:23:45 -0400
Subject: [PATCH] LAN9211 NFS bootup fix
 This patch fixs the problem of Mounting NFS file system, when there
is too much traffic on the Network.
 We still face the Overrun issues, but we still have NFS working.

NFS mounting issue is found on Omap LDP target boards.

Signed-off-by: Subramani Venkatesh &lt;subbu.wrs@xxxxxx&gt;
---
 drivers/net/smc911x.c |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

diff --git a/drivers/net/smc911x.c b/drivers/net/smc911x.c
index 7aa8c49..f3343ae 100644
--- a/drivers/net/smc911x.c
+++ b/drivers/net/smc911x.c
@@ -1111,6 +1111,12 @@ static irqreturn_t smc911x_interrupt(int irq,
void *dev_id)
                                smc911x_rcv(dev);
                        }
                        SMC_ACK_INT(lp, INT_STS_RSFL_);
+                       if (rx_overrun) {
+                               DBG(SMC_DEBUG_RX, &quot;%s: RX Enable\n&quot;, dev-&gt;name);
+                               SMC_GET_MAC_CR(lp, cr);
+                               SMC_SET_MAC_CR(lp, cr|MAC_CR_RXEN_);
+                       }
+
                }
                /* Handle transmit FIFO available */
                if (status &amp; INT_STS_TDFA_) {
--
1.5.4.3

Regards,
Subbu

-------------------------------------------------------------------
List admin: <a  rel="nofollow" href="http://lists.arm.linux.org.uk/mailman/listinfo/linux-arm">http://lists.arm.linux.org.uk/mailman/listinfo/linux-arm</a>
FAQ:        <a  rel="nofollow" href="http://www.arm.linux.org.uk/mailinglists/faq.php">http://www.arm.linux.org.uk/mailinglists/faq.php</a>
Etiquette:  <a  rel="nofollow" href="http://www.arm.linux.org.uk/mailinglists/etiquette.php">http://www.arm.linux.org.uk/mailinglists/etiquette.php</a>
</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="15350" href="msg15350.html">Fwd: [RFC][PATCH] LAN9211 and LAN9221 NFS mounting and overrun fix on	omap LDP</a></strong>
<ul><li><em>From:</em> Subramani Venkatesh</li></ul></li>
<li><strong><a name="15344" href="msg15344.html">Re: [RFC][PATCH] LAN9211 and LAN9221 NFS mounting and overrun fix	on omap LDP</a></strong>
<ul><li><em>From:</em> Russell King - ARM Linux</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg15342.html">Re: s3c6410 resume problem</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg15344.html">Re: [RFC][PATCH] LAN9211 and LAN9221 NFS mounting and overrun fix	on omap LDP</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg15333.html">nand flash connected to PCMCIA on a pxa27x based board</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg15344.html">Re: [RFC][PATCH] LAN9211 and LAN9221 NFS mounting and overrun fix	on omap LDP</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#15343"><strong>Date</strong></a></li>
<li><a href="threads.html#15343"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<center>
<font size=-1>
<a href=/lists/>[Index&nbsp;of&nbsp;Archives]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-arm/>[Linux&nbsp;ARM]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-arm-msm/>[Linux&nbsp;ARM&nbsp;MSM]</a>
&nbsp;
&nbsp;
<a href=/lists/arm-kernel/>[Linux&nbsp;ARM&nbsp;Kernel]</a>
&nbsp;
&nbsp;
<a href=/linux/fedora/fedora-arm/>[Fedora&nbsp;ARM]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-arm-msm/>[Linux&nbsp;ARM&nbsp;MSM]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-omap/>[Linux&nbsp;OMAP]</a>
&nbsp;
&nbsp;
<a href=/lists/mips/>[Linux&nbsp;MIPS]</a>
&nbsp;
&nbsp;
<a href=/lists/ecos/>[ECOS]</a>
&nbsp;
&nbsp;
<a href=/lists/asterisk/>[Asterisk&nbsp;Internet&nbsp;PBX]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-api/>[Linux&nbsp;API]</a>
</font>
</center>
<hr>
<p>
<div>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-format="autorelaxed"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="1424524564"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<table width=100%>
<tr>
<td align=left>&nbsp;</td>
<td align=right><a href=/lists/><img src=/button_01.gif border=0 alt="Powered by Linux"></a></td>
</tr>
</table>
<!--X-User-Footer-End-->
<script type="text/javascript"> 
 function initAddThis() {
    addthis.init()
 }
initAddThis();
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-760190-1', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
