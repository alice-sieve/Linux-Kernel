<!-- MHonArc v2.6.19 -->
<!--X-Subject: Re:  [PATCH 1/2] ASoC: SOF: ipc: update sof_ipc_stream_params -->
<!--X-From-R13: Yrlba Xvr &#60;lnat.wvrNyvahk.vagry.pbz> -->
<!--X-Date: Tue, 2 Jul 2019 18:48:22 &#45;0700 -->
<!--X-Message-Id: 8e81bbac&#45;8b5a&#45;9bc0&#45;60ed&#45;115429b07e82@linux.intel.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20190702121144.7809&#45;1&#45;yang.jie@linux.intel.com -->
<!--X-Reference: a233dfdbb973251d439197d13b69c867667d3f76.camel@linux.intel.com -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-3422782820843221",
          enable_page_level_ads: true
     });
</script>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Re:  [PATCH 1/2] ASoC: SOF: ipc: update sof_ipc_stream_params &mdash; ALSA Devel">
<style>
<!--
 pre {white-space: pre-wrap;}
-->
</style>
<title>Re:  [PATCH 1/2] ASoC: SOF: ipc: update sof_ipc_stream_params &mdash; ALSA Devel</title>
<link rel="alternate" type="application/rss+xml" title="ALSA Devel" href="//feedproxy.google.com/AlsaDevel">
</head>
<body itemscope itemtype="//schema.org/Article" vlink=green>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<form action="//www.google.com" id="cse-search-box" target="_blank">
  <div>
    <input type="hidden" name="cx" value="partner-pub-3422782820843221:9580497365" />
    <input type="hidden" name="ie" value="UTF-8" />
    <input type="text" name="q" size="25" />
    <input type="submit" name="sa" value="Search" />
  </div>
</form>
<script type="text/javascript" src="//www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en"></script>
<h1 itemprop="name">Re:  [PATCH 1/2] ASoC: SOF: ipc: update sof_ipc_stream_params</h1>
[<a href="msg93463.html">Date Prev</a>][<a href="msg93465.html">Date Next</a>][<a href="msg93462.html">Thread Prev</a>][<a href="msg93435.html">Thread Next</a>][<a href="maillist.html#93464">Date Index</a>][<a href="threads.html#93464">Thread Index</a>]


<p>&nbsp;<br>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive test for archives -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="6345952567"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: Ranjani Sridharan &lt;ranjani.sridharan@xxxxxxxxxxxxxxx&gt;,        alsa-devel@xxxxxxxxxxxxxxxx</li>
<li><em>Subject</em>: Re:  [PATCH 1/2] ASoC: SOF: ipc: update sof_ipc_stream_params</li>
<li><em>From</em>: Keyon Jie &lt;yang.jie@xxxxxxxxxxxxxxx&gt;</li>
<li><em>Date</em>: Wed, 3 Jul 2019 09:52:39 +0800</li>
<li><em>Cc</em>: marcin.rajwa@xxxxxxxxx, &quot;Lin, Mengdong&quot; &lt;mengdong.lin@xxxxxxxxx&gt;,        pierre-louis.bossart@xxxxxxxxxxxxxxx,        Marcin Rajwa &lt;marcin.rajwa@xxxxxxxxxxxxxxx&gt;</li>
<li><em>In-reply-to</em>: &lt;<a href="msg93462.html">a233dfdbb973251d439197d13b69c867667d3f76.camel@linux.intel.com</a>&gt;</li>
<li><em>References</em>: &lt;<a href="msg93425.html">20190702121144.7809-1-yang.jie@linux.intel.com</a>&gt; &lt;<a href="msg93462.html">a233dfdbb973251d439197d13b69c867667d3f76.camel@linux.intel.com</a>&gt;</li>
<li><em>User-agent</em>: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101 Thunderbird/60.7.1</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_4"></a>
<a class="addthis_button_compact"></a>
<a class="addthis_counter addthis_bubble_style"></a>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5196c2ae1be43d18&async=1&domready=1" async></script>
<!-- AddThis Button END -->
<hr>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive link 1 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="8681825769"
     data-ad-format="link"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>
<div class="content" itemprop="articleBody">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">


On 2019/7/3 &#x4E0A;&#x5348;7:29, Ranjani Sridharan wrote:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
On Tue, 2019-07-02 at 20:11 +0800, Keyon Jie wrote:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
From: Marcin Rajwa &lt;marcin.rajwa@xxxxxxxxxxxxxxx&gt;

The host period bytes needs to be passed to firmware.
Currently this field is used as notification for host
about period copy completion. Therefore we need to split these
two informations.
</pre></blockquote><pre style="margin: 0em;">
Keyon/Marcin,

Could you please add a bit more context in the commit message on the
need to split these two fields ie.. what usecases need this?
</pre></blockquote><pre style="margin: 0em;">

Sure, previously I wrote the commit message like this:

ASoC: SOF: add flag for position update ipc

In some cases, FW might need use the host_period_bytes even no position
update ipc reqiured from driver, here add another flag for position update,
and preserve host_period_bytes for FW to use.

This might require corresponding FW change and ABI alignment.

Thanks,
~Keyon

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">

Thanks,
Ranjani
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">

Signed-off-by: Marcin Rajwa &lt;marcin.rajwa@xxxxxxxxxxxxxxx&gt;
Signed-off-by: Keyon Jie &lt;yang.jie@xxxxxxxxxxxxxxx&gt;
---
  include/sound/sof/stream.h | 4 ++--
  1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/include/sound/sof/stream.h b/include/sound/sof/stream.h
index 643f175cb479..44acfa62fa69 100644
--- a/include/sound/sof/stream.h
+++ b/include/sound/sof/stream.h
@@ -83,10 +83,10 @@ struct sof_ipc_stream_params {
  	uint16_t sample_valid_bytes;
  	uint16_t sample_container_bytes;
</pre><tt>  
</tt><tt>-	/* for notifying host period has completed - 0 means no period
</tt><pre style="margin: 0em;">
IRQ */
  	uint32_t host_period_bytes;
+	uint16_t no_period_irq; /* 1 means period IRQ mode OFF */
</pre><tt>  
</tt><tt>-	uint32_t reserved[2];
</tt><pre style="margin: 0em;">
+	uint16_t reserved[3];
  	uint16_t chmap[SOF_IPC_MAX_CHANNELS];	/**&lt; channel map -
SOF_CHMAP_ */
  } __packed;
</pre><tt>  
</tt></blockquote><pre style="margin: 0em;">


</pre></blockquote><pre style="margin: 0em;">
_______________________________________________
Alsa-devel mailing list
Alsa-devel@xxxxxxxxxxxxxxxx
<a  rel="nofollow" href="https://mailman.alsa-project.org/mailman/listinfo/alsa-devel">https://mailman.alsa-project.org/mailman/listinfo/alsa-devel</a>



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div>
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="93425" href="msg93425.html">[PATCH 1/2] ASoC: SOF: ipc: update	sof_ipc_stream_params</a></strong>
<ul><li><em>From:</em> Keyon Jie</li></ul></li>
<li><strong><a name="93462" href="msg93462.html">Re:  [PATCH 1/2] ASoC: SOF: ipc: update sof_ipc_stream_params</a></strong>
<ul><li><em>From:</em> Ranjani Sridharan</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg93463.html">Re:  [PATCH v2 07/23] ASoC: au1x: psc-ac97.c: use	devm_snd_soc_register_component()</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg93465.html">Re:  [PATCH 46/46] ASoC: soc-utils: respawn dummy	Platform</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg93462.html">Re:  [PATCH 1/2] ASoC: SOF: ipc: update sof_ipc_stream_params</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg93435.html">Applied &quot;ASoC: cirrus: ep93xx-i2s.c: use	devm_snd_soc_register_component()&quot; to the asoc tree</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#93464"><strong>Date</strong></a></li>
<li><a href="threads.html#93464"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<center>
<font size=-1>
<a href=/lists/>[Index&nbsp;of&nbsp;Archives]</a>
&nbsp;
&nbsp;
<a href=/linux/fedora/alsa-user/>[ALSA&nbsp;User]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-audio-users/>[Linux&nbsp;Audio&nbsp;Users]</a>
&nbsp;
&nbsp;
<a href=/lists/pulse-audio/>[Pulse&nbsp;Audio]</a>
&nbsp;
&nbsp;
<a href=/lists/kernel/>[Kernel&nbsp;Archive]</a>
&nbsp;
&nbsp;
<a href=/lists/asterisk/>[Asterisk&nbsp;PBX]</a>
&nbsp;
&nbsp;
<a href=http://yosemitephotos.net/>[Photo&nbsp;Sharing]</a>
&nbsp;
&nbsp;
<a href=/linux/fedora/linux-sound/>[Linux&nbsp;Sound]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-media/>[Video&nbsp;4&nbsp;Linux]</a>
&nbsp;
&nbsp;
<a href=/lists/gimp/>[Gimp]</a>
&nbsp;
&nbsp;
<a href=https://yosemitenews.info>[Yosemite&nbsp;News]</a>
</font>
</center>
<hr>
<p>
<div>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-format="autorelaxed"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="1424524564"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<table width=100%>
<tr>
<td align=left>&nbsp;</td>
<td align=right><a href=/lists/><img src=/button_01.gif border=0 alt="Powered by Linux"></a></td>
</tr>
</table>
<!--X-User-Footer-End-->
<script type="text/javascript"> 
 function initAddThis() {
    addthis.init()
 }
initAddThis();
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-760190-1', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
