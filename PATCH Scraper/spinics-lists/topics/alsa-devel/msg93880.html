<!-- MHonArc v2.6.19 -->
<!--X-Subject: [PATCH v3 1/2] ASoC: SOF: add flag for position update	ipc -->
<!--X-From-R13: Yrlba Xvr &#60;lnat.wvrNyvahk.vagry.pbz> -->
<!--X-Date: Wed, 17 Jul 2019 20:06:56 &#45;0700 -->
<!--X-Message-Id: 20190718031113.25040&#45;1&#45;yang.jie@linux.intel.com -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-3422782820843221",
          enable_page_level_ads: true
     });
</script>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="[PATCH v3 1/2] ASoC: SOF: add flag for position update	ipc &mdash; ALSA Devel">
<style>
<!--
 pre {white-space: pre-wrap;}
-->
</style>
<title>[PATCH v3 1/2] ASoC: SOF: add flag for position update	ipc &mdash; ALSA Devel</title>
<link rel="alternate" type="application/rss+xml" title="ALSA Devel" href="//feedproxy.google.com/AlsaDevel">
</head>
<body itemscope itemtype="//schema.org/Article" vlink=green>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<form action="//www.google.com" id="cse-search-box" target="_blank">
  <div>
    <input type="hidden" name="cx" value="partner-pub-3422782820843221:9580497365" />
    <input type="hidden" name="ie" value="UTF-8" />
    <input type="text" name="q" size="25" />
    <input type="submit" name="sa" value="Search" />
  </div>
</form>
<script type="text/javascript" src="//www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en"></script>
<h1 itemprop="name">[PATCH v3 1/2] ASoC: SOF: add flag for position update	ipc</h1>
[<a href="msg93879.html">Date Prev</a>][<a href="msg93881.html">Date Next</a>][<a href="msg93863.html">Thread Prev</a>][<a href="msg93881.html">Thread Next</a>][<a href="maillist.html#93880">Date Index</a>][<a href="threads.html#93880">Thread Index</a>]


<p>&nbsp;<br>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive test for archives -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="6345952567"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: alsa-devel@xxxxxxxxxxxxxxxx</li>
<li><em>Subject</em>: [PATCH v3 1/2] ASoC: SOF: add flag for position update	ipc</li>
<li><em>From</em>: Keyon Jie &lt;yang.jie@xxxxxxxxxxxxxxx&gt;</li>
<li><em>Date</em>: Thu, 18 Jul 2019 11:11:12 +0800</li>
<li><em>Cc</em>: kai.vehmanen@xxxxxxxxxxxxxxx, Marcin Rajwa &lt;marcin.rajwa@xxxxxxxxxxxxxxx&gt;,        marcin.rajwa@xxxxxxxxx, Keyon Jie &lt;yang.jie@xxxxxxxxxxxxxxx&gt;,        ranjani.sridharan@xxxxxxxxxxxxxxx,        pierre-louis.bossart@xxxxxxxxxxxxxxx</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_4"></a>
<a class="addthis_button_compact"></a>
<a class="addthis_counter addthis_bubble_style"></a>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5196c2ae1be43d18&async=1&domready=1" async></script>
<!-- AddThis Button END -->
<hr>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive link 1 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="8681825769"
     data-ad-format="link"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>
<div class="content" itemprop="articleBody">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>From: Marcin Rajwa &lt;marcin.rajwa@xxxxxxxxxxxxxxx&gt;

In some cases, FW might need to use the host_period_bytes field to
synchronize the DMA copying (with host side) but the driver does not
need any position information returned over the IPC channel by the
firmware. The current IPC definition prevents this capability, so add
new field.

Signed-off-by: Marcin Rajwa &lt;marcin.rajwa@xxxxxxxxxxxxxxx&gt;
Signed-off-by: Keyon Jie &lt;yang.jie@xxxxxxxxxxxxxxx&gt;
Reviewed-by: Ranjani Sridharan &lt;ranjani.sridharan@xxxxxxxxxxxxxxx&gt;
---
 include/sound/sof/stream.h | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/include/sound/sof/stream.h b/include/sound/sof/stream.h
index 643f175cb479..06af4ecb2584 100644
--- a/include/sound/sof/stream.h
+++ b/include/sound/sof/stream.h
@@ -83,10 +83,10 @@ struct sof_ipc_stream_params {
 	uint16_t sample_valid_bytes;
 	uint16_t sample_container_bytes;
 
-	/* for notifying host period has completed - 0 means no period IRQ */
 	uint32_t host_period_bytes;
+	uint32_t no_position_ipc; /* 1 means no IPC for position upadte */
 
-	uint32_t reserved[2];
+	uint16_t reserved[3];
 	uint16_t chmap[SOF_IPC_MAX_CHANNELS];	/**&lt; channel map - SOF_CHMAP_ */
 } __packed;
 
-- 
2.20.1

_______________________________________________
Alsa-devel mailing list
Alsa-devel@xxxxxxxxxxxxxxxx
<a  rel="nofollow" href="https://mailman.alsa-project.org/mailman/listinfo/alsa-devel">https://mailman.alsa-project.org/mailman/listinfo/alsa-devel</a>


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div>
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="93882" href="msg93882.html">Re:  [PATCH v3 1/2] ASoC: SOF: add flag for position	update ipc</a></strong>
<ul><li><em>From:</em> Pierre-Louis Bossart</li></ul></li>
<li><strong><a name="93881" href="msg93881.html">[PATCH v3 2/2] ASoC: SOF: Intel: fix reset of	host_period_bytes</a></strong>
<ul><li><em>From:</em> Keyon Jie</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg93879.html">Re:  [PATCH v2 1/2] ASoC: SOF: add flag for position update ipc</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg93881.html">[PATCH v3 2/2] ASoC: SOF: Intel: fix reset of	host_period_bytes</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg93863.html">[PATCH v4 0/6] VAG power control improvement for	sgtl5000 codec</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg93881.html">[PATCH v3 2/2] ASoC: SOF: Intel: fix reset of	host_period_bytes</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#93880"><strong>Date</strong></a></li>
<li><a href="threads.html#93880"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<center>
<font size=-1>
<a href=/lists/>[Index&nbsp;of&nbsp;Archives]</a>
&nbsp;
&nbsp;
<a href=/linux/fedora/alsa-user/>[ALSA&nbsp;User]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-audio-users/>[Linux&nbsp;Audio&nbsp;Users]</a>
&nbsp;
&nbsp;
<a href=/lists/pulse-audio/>[Pulse&nbsp;Audio]</a>
&nbsp;
&nbsp;
<a href=/lists/kernel/>[Kernel&nbsp;Archive]</a>
&nbsp;
&nbsp;
<a href=/lists/asterisk/>[Asterisk&nbsp;PBX]</a>
&nbsp;
&nbsp;
<a href=http://yosemitephotos.net/>[Photo&nbsp;Sharing]</a>
&nbsp;
&nbsp;
<a href=/linux/fedora/linux-sound/>[Linux&nbsp;Sound]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-media/>[Video&nbsp;4&nbsp;Linux]</a>
&nbsp;
&nbsp;
<a href=/lists/gimp/>[Gimp]</a>
&nbsp;
&nbsp;
<a href=https://yosemitenews.info>[Yosemite&nbsp;News]</a>
</font>
</center>
<hr>
<p>
<div>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-format="autorelaxed"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="1424524564"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<table width=100%>
<tr>
<td align=left>&nbsp;</td>
<td align=right><a href=/lists/><img src=/button_01.gif border=0 alt="Powered by Linux"></a></td>
</tr>
</table>
<!--X-User-Footer-End-->
<script type="text/javascript"> 
 function initAddThis() {
    addthis.init()
 }
initAddThis();
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-760190-1', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
