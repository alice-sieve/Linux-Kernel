<!-- MHonArc v2.6.19 -->
<!--X-Subject: [PATCH 1/7] ASoC: Intel: Skylake: Merge skl_sst and	skl into skl_dev struct -->
<!--X-From-R13: Qrmnel Dbwrjfxv &#60;prmnel.ebwrjfxvNvagry.pbz> -->
<!--X-Date: Thu, 4 Jul 2019 13:03:37 &#45;0700 -->
<!--X-Message-Id: 20190704200106.11289&#45;2&#45;cezary.rojewski@intel.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20190704200106.11289&#45;1&#45;cezary.rojewski@intel.com -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-3422782820843221",
          enable_page_level_ads: true
     });
</script>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="[PATCH 1/7] ASoC: Intel: Skylake: Merge skl_sst and	skl into skl_dev struct &mdash; ALSA Devel">
<style>
<!--
 pre {white-space: pre-wrap;}
-->
</style>
<title>[PATCH 1/7] ASoC: Intel: Skylake: Merge skl_sst and	skl into skl_dev struct &mdash; ALSA Devel</title>
<link rel="alternate" type="application/rss+xml" title="ALSA Devel" href="//feedproxy.google.com/AlsaDevel">
</head>
<body itemscope itemtype="//schema.org/Article" vlink=green>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<form action="//www.google.com" id="cse-search-box" target="_blank">
  <div>
    <input type="hidden" name="cx" value="partner-pub-3422782820843221:9580497365" />
    <input type="hidden" name="ie" value="UTF-8" />
    <input type="text" name="q" size="25" />
    <input type="submit" name="sa" value="Search" />
  </div>
</form>
<script type="text/javascript" src="//www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en"></script>
<h1 itemprop="name">[PATCH 1/7] ASoC: Intel: Skylake: Merge skl_sst and	skl into skl_dev struct</h1>
[<a href="msg93535.html">Date Prev</a>][<a href="msg93537.html">Date Next</a>][<a href="msg93535.html">Thread Prev</a>][<a href="msg93537.html">Thread Next</a>][<a href="maillist.html#93536">Date Index</a>][<a href="threads.html#93536">Thread Index</a>]


<p>&nbsp;<br>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive test for archives -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="6345952567"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: alsa-devel@xxxxxxxxxxxxxxxx</li>
<li><em>Subject</em>: [PATCH 1/7] ASoC: Intel: Skylake: Merge skl_sst and	skl into skl_dev struct</li>
<li><em>From</em>: Cezary Rojewski &lt;cezary.rojewski@xxxxxxxxx&gt;</li>
<li><em>Date</em>: Thu,  4 Jul 2019 22:01:00 +0200</li>
<li><em>Cc</em>: pierre-louis.bossart@xxxxxxxxxxxxxxx,        Cezary Rojewski &lt;cezary.rojewski@xxxxxxxxx&gt;, lgirdwood@xxxxxxxxx,        tiwai@xxxxxxxx, broonie@xxxxxxxxxx,        Piotr Maziarz &lt;piotrx.maziarz@xxxxxxxxx&gt;</li>
<li><em>In-reply-to</em>: &lt;<a href="msg93535.html">20190704200106.11289-1-cezary.rojewski@intel.com</a>&gt;</li>
<li><em>References</em>: &lt;<a href="msg93535.html">20190704200106.11289-1-cezary.rojewski@intel.com</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_4"></a>
<a class="addthis_button_compact"></a>
<a class="addthis_counter addthis_bubble_style"></a>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5196c2ae1be43d18&async=1&domready=1" async></script>
<!-- AddThis Button END -->
<hr>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive link 1 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="8681825769"
     data-ad-format="link"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>
<div class="content" itemprop="articleBody">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Skylake driver is divided into two modules:
- snd_soc_skl
- snd_soc_skl_ipc

and nothing would be wrong if not for the fact that both cannot exist
without one another. IPC module is not some kind of extension, as it is
the case for snd_hda_ext_core which is separated from snd_hda_core -
legacy hda interface. It's as much core Skylake module as snd_soc_skl
is.

Statement backed up by existence of circular dependency between this
two. To eliminate said problem, struct skl_sst has been created. From
that very momment, Skylake has been plagued by header errors (incomplete
structs, unknown references etc.) whenever something new is to be added
or code is cleaned up.

As this design is being corrected, struct skl_sst is no longer needed,
so combine it with struct skl. To avoid ambiguity when searching for skl
stuff (struct skl *skl) it has also been renamed to skl_dev.

No functional changes.

Signed-off-by: Piotr Maziarz &lt;piotrx.maziarz@xxxxxxxxx&gt;
Signed-off-by: Cezary Rojewski &lt;cezary.rojewski@xxxxxxxxx&gt;
---
 sound/soc/intel/common/sst-ipc.h        |   1 +
 sound/soc/intel/skylake/bxt-sst.c       |  50 ++--
 sound/soc/intel/skylake/cnl-sst-dsp.h   |   7 +-
 sound/soc/intel/skylake/cnl-sst.c       |  37 ++-
 sound/soc/intel/skylake/skl-debug.c     |   8 +-
 sound/soc/intel/skylake/skl-messages.c  | 229 +++++++++--------
 sound/soc/intel/skylake/skl-nhlt.c      |  18 +-
 sound/soc/intel/skylake/skl-pcm.c       |  75 +++---
 sound/soc/intel/skylake/skl-ssp-clk.c   |   4 +-
 sound/soc/intel/skylake/skl-sst-dsp.c   |  10 +-
 sound/soc/intel/skylake/skl-sst-dsp.h   |  30 +--
 sound/soc/intel/skylake/skl-sst-ipc.c   |   8 +-
 sound/soc/intel/skylake/skl-sst-ipc.h   |  52 +---
 sound/soc/intel/skylake/skl-sst-utils.c |  37 ++-
 sound/soc/intel/skylake/skl-sst.c       |  51 ++--
 sound/soc/intel/skylake/skl-topology.c  | 320 ++++++++++++------------
 sound/soc/intel/skylake/skl-topology.h  |  32 +--
 sound/soc/intel/skylake/skl.c           |  54 ++--
 sound/soc/intel/skylake/skl.h           |  94 +++++--
 19 files changed, 545 insertions(+), 572 deletions(-)

diff --git a/sound/soc/intel/common/sst-ipc.h b/sound/soc/intel/common/sst-ipc.h
index c6779e2ac830..ef38600e88f7 100644
--- a/sound/soc/intel/common/sst-ipc.h
+++ b/sound/soc/intel/common/sst-ipc.h
@@ -35,6 +35,7 @@ struct ipc_message {
 };
 
 struct sst_generic_ipc;
+struct sst_dsp;
 
 struct sst_plat_ipc_ops {
 	void (*tx_msg)(struct sst_generic_ipc *, struct ipc_message *);
diff --git a/sound/soc/intel/skylake/bxt-sst.c b/sound/soc/intel/skylake/bxt-sst.c
index 46d5159cf905..92a82e6b5fe6 100644
--- a/sound/soc/intel/skylake/bxt-sst.c
+++ b/sound/soc/intel/skylake/bxt-sst.c
@@ -14,7 +14,7 @@
 
 #include &quot;../common/sst-dsp.h&quot;
 #include &quot;../common/sst-dsp-priv.h&quot;
-#include &quot;skl-sst-ipc.h&quot;
+#include &quot;skl.h&quot;
 
 #define BXT_BASEFW_TIMEOUT	3000
 #define BXT_INIT_TIMEOUT	300
@@ -49,7 +49,7 @@ static int
 bxt_load_library(struct sst_dsp *ctx, struct skl_lib_info *linfo, int lib_count)
 {
 	struct snd_dma_buffer dmab;
-	struct skl_sst *skl = ctx-&gt;thread_context;
+	struct skl_dev *skl = ctx-&gt;thread_context;
 	struct firmware stripped_fw;
 	int ret = 0, i, dma_id, stream_tag;
 
@@ -184,7 +184,7 @@ static int sst_transfer_fw_host_dma(struct sst_dsp *ctx)
 static int bxt_load_base_firmware(struct sst_dsp *ctx)
 {
 	struct firmware stripped_fw;
-	struct skl_sst *skl = ctx-&gt;thread_context;
+	struct skl_dev *skl = ctx-&gt;thread_context;
 	int ret, i;
 
 	if (ctx-&gt;fw == NULL) {
@@ -268,7 +268,7 @@ static int bxt_load_base_firmware(struct sst_dsp *ctx)
  */
 static int bxt_d0i3_target_state(struct sst_dsp *ctx)
 {
-	struct skl_sst *skl = ctx-&gt;thread_context;
+	struct skl_dev *skl = ctx-&gt;thread_context;
 	struct skl_d0i3_data *d0i3 = &amp;skl-&gt;d0i3;
 
 	if (skl-&gt;cores.state[SKL_DSP_CORE0_ID] != SKL_DSP_RUNNING)
@@ -288,8 +288,8 @@ static void bxt_set_dsp_D0i3(struct work_struct *work)
 {
 	int ret;
 	struct skl_ipc_d0ix_msg msg;
-	struct skl_sst *skl = container_of(work,
-			struct skl_sst, d0i3.work.work);
+	struct skl_dev *skl = container_of(work,
+			struct skl_dev, d0i3.work.work);
 	struct sst_dsp *ctx = skl-&gt;dsp;
 	struct skl_d0i3_data *d0i3 = &amp;skl-&gt;d0i3;
 	int target_state;
@@ -331,7 +331,7 @@ static void bxt_set_dsp_D0i3(struct work_struct *work)
 
 static int bxt_schedule_dsp_D0i3(struct sst_dsp *ctx)
 {
-	struct skl_sst *skl = ctx-&gt;thread_context;
+	struct skl_dev *skl = ctx-&gt;thread_context;
 	struct skl_d0i3_data *d0i3 = &amp;skl-&gt;d0i3;
 
 	/* Schedule D0i3 only if the usecase ref counts are appropriate */
@@ -350,7 +350,7 @@ static int bxt_set_dsp_D0i0(struct sst_dsp *ctx)
 {
 	int ret;
 	struct skl_ipc_d0ix_msg msg;
-	struct skl_sst *skl = ctx-&gt;thread_context;
+	struct skl_dev *skl = ctx-&gt;thread_context;
 
 	dev_dbg(ctx-&gt;dev, &quot;In %s:\n&quot;, __func__);
 
@@ -389,7 +389,7 @@ static int bxt_set_dsp_D0i0(struct sst_dsp *ctx)
 
 static int bxt_set_dsp_D0(struct sst_dsp *ctx, unsigned int core_id)
 {
-	struct skl_sst *skl = ctx-&gt;thread_context;
+	struct skl_dev *skl = ctx-&gt;thread_context;
 	int ret;
 	struct skl_ipc_dxstate_info dx;
 	unsigned int core_mask = SKL_DSP_CORE_MASK(core_id);
@@ -486,7 +486,7 @@ static int bxt_set_dsp_D3(struct sst_dsp *ctx, unsigned int core_id)
 {
 	int ret;
 	struct skl_ipc_dxstate_info dx;
-	struct skl_sst *skl = ctx-&gt;thread_context;
+	struct skl_dev *skl = ctx-&gt;thread_context;
 	unsigned int core_mask = SKL_DSP_CORE_MASK(core_id);
 
 	dx.core_mask = core_mask;
@@ -548,9 +548,9 @@ static struct sst_dsp_device skl_dev = {
 
 int bxt_sst_dsp_init(struct device *dev, void __iomem *mmio_base, int irq,
 			const char *fw_name, struct skl_dsp_loader_ops dsp_ops,
-			struct skl_sst **dsp)
+			struct skl_dev **dsp)
 {
-	struct skl_sst *skl;
+	struct skl_dev *skl;
 	struct sst_dsp *sst;
 	int ret;
 
@@ -591,10 +591,10 @@ int bxt_sst_dsp_init(struct device *dev, void __iomem *mmio_base, int irq,
 }
 EXPORT_SYMBOL_GPL(bxt_sst_dsp_init);
 
-int bxt_sst_init_fw(struct device *dev, struct skl_sst *ctx)
+int bxt_sst_init_fw(struct device *dev, struct skl_dev *skl)
 {
 	int ret;
-	struct sst_dsp *sst = ctx-&gt;dsp;
+	struct sst_dsp *sst = skl-&gt;dsp;
 
 	ret = sst-&gt;fw_ops.load_fw(sst);
 	if (ret &lt; 0) {
@@ -604,29 +604,29 @@ int bxt_sst_init_fw(struct device *dev, struct skl_sst *ctx)
 
 	skl_dsp_init_core_state(sst);
 
-	if (ctx-&gt;lib_count &gt; 1) {
-		ret = sst-&gt;fw_ops.load_library(sst, ctx-&gt;lib_info,
-						ctx-&gt;lib_count);
+	if (skl-&gt;lib_count &gt; 1) {
+		ret = sst-&gt;fw_ops.load_library(sst, skl-&gt;lib_info,
+						skl-&gt;lib_count);
 		if (ret &lt; 0) {
 			dev_err(dev, &quot;Load Library failed : %x\n&quot;, ret);
 			return ret;
 		}
 	}
-	ctx-&gt;is_first_boot = false;
+	skl-&gt;is_first_boot = false;
 
 	return 0;
 }
 EXPORT_SYMBOL_GPL(bxt_sst_init_fw);
 
-void bxt_sst_dsp_cleanup(struct device *dev, struct skl_sst *ctx)
+void bxt_sst_dsp_cleanup(struct device *dev, struct skl_dev *skl)
 {
 
-	skl_release_library(ctx-&gt;lib_info, ctx-&gt;lib_count);
-	if (ctx-&gt;dsp-&gt;fw)
-		release_firmware(ctx-&gt;dsp-&gt;fw);
-	skl_freeup_uuid_list(ctx);
-	skl_ipc_free(&amp;ctx-&gt;ipc);
-	ctx-&gt;dsp-&gt;ops-&gt;free(ctx-&gt;dsp);
+	skl_release_library(skl-&gt;lib_info, skl-&gt;lib_count);
+	if (skl-&gt;dsp-&gt;fw)
+		release_firmware(skl-&gt;dsp-&gt;fw);
+	skl_freeup_uuid_list(skl);
+	skl_ipc_free(&amp;skl-&gt;ipc);
+	skl-&gt;dsp-&gt;ops-&gt;free(skl-&gt;dsp);
 }
 EXPORT_SYMBOL_GPL(bxt_sst_dsp_cleanup);
 
diff --git a/sound/soc/intel/skylake/cnl-sst-dsp.h b/sound/soc/intel/skylake/cnl-sst-dsp.h
index 426515faab52..7bd4d2a8fdfa 100644
--- a/sound/soc/intel/skylake/cnl-sst-dsp.h
+++ b/sound/soc/intel/skylake/cnl-sst-dsp.h
@@ -9,7 +9,6 @@
 #define __CNL_SST_DSP_H__
 
 struct sst_dsp;
-struct skl_sst;
 struct sst_dsp_device;
 struct sst_generic_ipc;
 
@@ -97,8 +96,8 @@ void cnl_ipc_free(struct sst_generic_ipc *ipc);
 
 int cnl_sst_dsp_init(struct device *dev, void __iomem *mmio_base, int irq,
 		     const char *fw_name, struct skl_dsp_loader_ops dsp_ops,
-		     struct skl_sst **dsp);
-int cnl_sst_init_fw(struct device *dev, struct skl_sst *ctx);
-void cnl_sst_dsp_cleanup(struct device *dev, struct skl_sst *ctx);
+		     struct skl_dev **dsp);
+int cnl_sst_init_fw(struct device *dev, struct skl_dev *skl);
+void cnl_sst_dsp_cleanup(struct device *dev, struct skl_dev *skl);
 
 #endif /*__CNL_SST_DSP_H__*/
diff --git a/sound/soc/intel/skylake/cnl-sst.c b/sound/soc/intel/skylake/cnl-sst.c
index f2c09fa6ea40..2d748a335bcf 100644
--- a/sound/soc/intel/skylake/cnl-sst.c
+++ b/sound/soc/intel/skylake/cnl-sst.c
@@ -24,8 +24,7 @@
 #include &quot;../common/sst-dsp-priv.h&quot;
 #include &quot;../common/sst-ipc.h&quot;
 #include &quot;cnl-sst-dsp.h&quot;
-#include &quot;skl-sst-dsp.h&quot;
-#include &quot;skl-sst-ipc.h&quot;
+#include &quot;skl.h&quot;
 
 #define CNL_FW_ROM_INIT		0x1
 #define CNL_FW_INIT		0x5
@@ -109,7 +108,7 @@ static int sst_transfer_fw_host_dma(struct sst_dsp *ctx)
 static int cnl_load_base_firmware(struct sst_dsp *ctx)
 {
 	struct firmware stripped_fw;
-	struct skl_sst *cnl = ctx-&gt;thread_context;
+	struct skl_dev *cnl = ctx-&gt;thread_context;
 	int ret;
 
 	if (!ctx-&gt;fw) {
@@ -167,7 +166,7 @@ static int cnl_load_base_firmware(struct sst_dsp *ctx)
 
 static int cnl_set_dsp_D0(struct sst_dsp *ctx, unsigned int core_id)
 {
-	struct skl_sst *cnl = ctx-&gt;thread_context;
+	struct skl_dev *cnl = ctx-&gt;thread_context;
 	unsigned int core_mask = SKL_DSP_CORE_MASK(core_id);
 	struct skl_ipc_dxstate_info dx;
 	int ret;
@@ -229,7 +228,7 @@ static int cnl_set_dsp_D0(struct sst_dsp *ctx, unsigned int core_id)
 
 static int cnl_set_dsp_D3(struct sst_dsp *ctx, unsigned int core_id)
 {
-	struct skl_sst *cnl = ctx-&gt;thread_context;
+	struct skl_dev *cnl = ctx-&gt;thread_context;
 	unsigned int core_mask = SKL_DSP_CORE_MASK(core_id);
 	struct skl_ipc_dxstate_info dx;
 	int ret;
@@ -293,7 +292,7 @@ static struct sst_ops cnl_ops = {
 static irqreturn_t cnl_dsp_irq_thread_handler(int irq, void *context)
 {
 	struct sst_dsp *dsp = context;
-	struct skl_sst *cnl = sst_dsp_get_thread_context(dsp);
+	struct skl_dev *cnl = sst_dsp_get_thread_context(dsp);
 	struct sst_generic_ipc *ipc = &amp;cnl-&gt;ipc;
 	struct skl_ipc_header header = {0};
 	u32 hipcida, hipctdr, hipctdd;
@@ -386,7 +385,7 @@ static bool cnl_ipc_is_dsp_busy(struct sst_dsp *dsp)
 	return (hipcidr &amp; CNL_ADSP_REG_HIPCIDR_BUSY);
 }
 
-static int cnl_ipc_init(struct device *dev, struct skl_sst *cnl)
+static int cnl_ipc_init(struct device *dev, struct skl_dev *cnl)
 {
 	struct sst_generic_ipc *ipc;
 	int err;
@@ -415,9 +414,9 @@ static int cnl_ipc_init(struct device *dev, struct skl_sst *cnl)
 
 int cnl_sst_dsp_init(struct device *dev, void __iomem *mmio_base, int irq,
 		     const char *fw_name, struct skl_dsp_loader_ops dsp_ops,
-		     struct skl_sst **dsp)
+		     struct skl_dev **dsp)
 {
-	struct skl_sst *cnl;
+	struct skl_dev *cnl;
 	struct sst_dsp *sst;
 	int ret;
 
@@ -454,12 +453,12 @@ int cnl_sst_dsp_init(struct device *dev, void __iomem *mmio_base, int irq,
 }
 EXPORT_SYMBOL_GPL(cnl_sst_dsp_init);
 
-int cnl_sst_init_fw(struct device *dev, struct skl_sst *ctx)
+int cnl_sst_init_fw(struct device *dev, struct skl_dev *skl)
 {
 	int ret;
-	struct sst_dsp *sst = ctx-&gt;dsp;
+	struct sst_dsp *sst = skl-&gt;dsp;
 
-	ret = ctx-&gt;dsp-&gt;fw_ops.load_fw(sst);
+	ret = skl-&gt;dsp-&gt;fw_ops.load_fw(sst);
 	if (ret &lt; 0) {
 		dev_err(dev, &quot;load base fw failed: %d&quot;, ret);
 		return ret;
@@ -467,21 +466,21 @@ int cnl_sst_init_fw(struct device *dev, struct skl_sst *ctx)
 
 	skl_dsp_init_core_state(sst);
 
-	ctx-&gt;is_first_boot = false;
+	skl-&gt;is_first_boot = false;
 
 	return 0;
 }
 EXPORT_SYMBOL_GPL(cnl_sst_init_fw);
 
-void cnl_sst_dsp_cleanup(struct device *dev, struct skl_sst *ctx)
+void cnl_sst_dsp_cleanup(struct device *dev, struct skl_dev *skl)
 {
-	if (ctx-&gt;dsp-&gt;fw)
-		release_firmware(ctx-&gt;dsp-&gt;fw);
+	if (skl-&gt;dsp-&gt;fw)
+		release_firmware(skl-&gt;dsp-&gt;fw);
 
-	skl_freeup_uuid_list(ctx);
-	cnl_ipc_free(&amp;ctx-&gt;ipc);
+	skl_freeup_uuid_list(skl);
+	cnl_ipc_free(&amp;skl-&gt;ipc);
 
-	ctx-&gt;dsp-&gt;ops-&gt;free(ctx-&gt;dsp);
+	skl-&gt;dsp-&gt;ops-&gt;free(skl-&gt;dsp);
 }
 EXPORT_SYMBOL_GPL(cnl_sst_dsp_cleanup);
 
diff --git a/sound/soc/intel/skylake/skl-debug.c b/sound/soc/intel/skylake/skl-debug.c
index b9b4a72a4334..c43aa4081232 100644
--- a/sound/soc/intel/skylake/skl-debug.c
+++ b/sound/soc/intel/skylake/skl-debug.c
@@ -20,7 +20,7 @@
 #define FW_REG_SIZE	0x60
 
 struct skl_debug {
-	struct skl *skl;
+	struct skl_dev *skl;
 	struct device *dev;
 
 	struct dentry *fs;
@@ -172,7 +172,7 @@ static ssize_t fw_softreg_read(struct file *file, char __user *user_buf,
 			       size_t count, loff_t *ppos)
 {
 	struct skl_debug *d = file-&gt;private_data;
-	struct sst_dsp *sst = d-&gt;skl-&gt;skl_sst-&gt;dsp;
+	struct sst_dsp *sst = d-&gt;skl-&gt;dsp;
 	size_t w0_stat_sz = sst-&gt;addr.w0_stat_sz;
 	void __iomem *in_base = sst-&gt;mailbox.in_base;
 	void __iomem *fw_reg_addr;
@@ -213,7 +213,7 @@ static const struct file_operations soft_regs_ctrl_fops = {
 	.llseek = default_llseek,
 };
 
-struct skl_debug *skl_debugfs_init(struct skl *skl)
+struct skl_debug *skl_debugfs_init(struct skl_dev *skl)
 {
 	struct skl_debug *d;
 
@@ -252,7 +252,7 @@ struct skl_debug *skl_debugfs_init(struct skl *skl)
 	return NULL;
 }
 
-void skl_debugfs_exit(struct skl *skl)
+void skl_debugfs_exit(struct skl_dev *skl)
 {
 	struct skl_debug *d = skl-&gt;debugfs;
 
diff --git a/sound/soc/intel/skylake/skl-messages.c b/sound/soc/intel/skylake/skl-messages.c
index febc070839e0..f604d9c6824d 100644
--- a/sound/soc/intel/skylake/skl-messages.c
+++ b/sound/soc/intel/skylake/skl-messages.c
@@ -47,7 +47,7 @@ static int skl_free_dma_buf(struct device *dev, struct snd_dma_buffer *dmab)
 
 #define SKL_ASTATE_PARAM_ID	4
 
-void skl_dsp_set_astate_cfg(struct skl_sst *ctx, u32 cnt, void *data)
+void skl_dsp_set_astate_cfg(struct skl_dev *skl, u32 cnt, void *data)
 {
 	struct skl_ipc_large_config_msg	msg = {0};
 
@@ -55,14 +55,14 @@ void skl_dsp_set_astate_cfg(struct skl_sst *ctx, u32 cnt, void *data)
 	msg.param_data_size = (cnt * sizeof(struct skl_astate_param) +
 				sizeof(cnt));
 
-	skl_ipc_set_large_config(&amp;ctx-&gt;ipc, &amp;msg, data);
+	skl_ipc_set_large_config(&amp;skl-&gt;ipc, &amp;msg, data);
 }
 
 #define NOTIFICATION_PARAM_ID 3
 #define NOTIFICATION_MASK 0xf
 
 /* disable notfication for underruns/overruns from firmware module */
-void skl_dsp_enable_notification(struct skl_sst *ctx, bool enable)
+void skl_dsp_enable_notification(struct skl_dev *skl, bool enable)
 {
 	struct notification_mask mask;
 	struct skl_ipc_large_config_msg	msg = {0};
@@ -73,7 +73,7 @@ void skl_dsp_enable_notification(struct skl_sst *ctx, bool enable)
 	msg.large_param_id = NOTIFICATION_PARAM_ID;
 	msg.param_data_size = sizeof(mask);
 
-	skl_ipc_set_large_config(&amp;ctx-&gt;ipc, &amp;msg, (u32 *)&amp;mask);
+	skl_ipc_set_large_config(&amp;skl-&gt;ipc, &amp;msg, (u32 *)&amp;mask);
 }
 
 static int skl_dsp_setup_spib(struct device *dev, unsigned int size,
@@ -277,7 +277,7 @@ const struct skl_dsp_ops *skl_get_dsp_ops(int pci_id)
 	return NULL;
 }
 
-int skl_init_dsp(struct skl *skl)
+int skl_init_dsp(struct skl_dev *skl)
 {
 	void __iomem *mmio_base;
 	struct hdac_bus *bus = skl_to_bus(skl);
@@ -307,13 +307,13 @@ int skl_init_dsp(struct skl *skl)
 	loader_ops = ops-&gt;loader_ops();
 	ret = ops-&gt;init(bus-&gt;dev, mmio_base, irq,
 				skl-&gt;fw_name, loader_ops,
-				&amp;skl-&gt;skl_sst);
+				&amp;skl);
 
 	if (ret &lt; 0)
 		goto unmap_mmio;
 
-	skl-&gt;skl_sst-&gt;dsp_ops = ops;
-	cores = &amp;skl-&gt;skl_sst-&gt;cores;
+	skl-&gt;dsp_ops = ops;
+	cores = &amp;skl-&gt;cores;
 	cores-&gt;count = ops-&gt;num_cores;
 
 	cores-&gt;state = kcalloc(cores-&gt;count, sizeof(*cores-&gt;state), GFP_KERNEL);
@@ -342,21 +342,20 @@ int skl_init_dsp(struct skl *skl)
 	return ret;
 }
 
-int skl_free_dsp(struct skl *skl)
+int skl_free_dsp(struct skl_dev *skl)
 {
 	struct hdac_bus *bus = skl_to_bus(skl);
-	struct skl_sst *ctx = skl-&gt;skl_sst;
 
 	/* disable  ppcap interrupt */
 	snd_hdac_ext_bus_ppcap_int_enable(bus, false);
 
-	ctx-&gt;dsp_ops-&gt;cleanup(bus-&gt;dev, ctx);
+	skl-&gt;dsp_ops-&gt;cleanup(bus-&gt;dev, skl);
 
-	kfree(ctx-&gt;cores.state);
-	kfree(ctx-&gt;cores.usage_count);
+	kfree(skl-&gt;cores.state);
+	kfree(skl-&gt;cores.usage_count);
 
-	if (ctx-&gt;dsp-&gt;addr.lpe)
-		iounmap(ctx-&gt;dsp-&gt;addr.lpe);
+	if (skl-&gt;dsp-&gt;addr.lpe)
+		iounmap(skl-&gt;dsp-&gt;addr.lpe);
 
 	return 0;
 }
@@ -368,15 +367,14 @@ int skl_free_dsp(struct skl *skl)
  * mode during system suspend. In the case of normal suspend, cancel
  * any pending D0i3 work.
  */
-int skl_suspend_late_dsp(struct skl *skl)
+int skl_suspend_late_dsp(struct skl_dev *skl)
 {
-	struct skl_sst *ctx = skl-&gt;skl_sst;
 	struct delayed_work *dwork;
 
-	if (!ctx)
+	if (!skl)
 		return 0;
 
-	dwork = &amp;ctx-&gt;d0i3.work;
+	dwork = &amp;skl-&gt;d0i3.work;
 
 	if (dwork-&gt;work.func) {
 		if (skl-&gt;supend_active)
@@ -388,9 +386,8 @@ int skl_suspend_late_dsp(struct skl *skl)
 	return 0;
 }
 
-int skl_suspend_dsp(struct skl *skl)
+int skl_suspend_dsp(struct skl_dev *skl)
 {
-	struct skl_sst *ctx = skl-&gt;skl_sst;
 	struct hdac_bus *bus = skl_to_bus(skl);
 	int ret;
 
@@ -398,7 +395,7 @@ int skl_suspend_dsp(struct skl *skl)
 	if (!bus-&gt;ppcap)
 		return 0;
 
-	ret = skl_dsp_sleep(ctx-&gt;dsp);
+	ret = skl_dsp_sleep(skl-&gt;dsp);
 	if (ret &lt; 0)
 		return ret;
 
@@ -409,9 +406,8 @@ int skl_suspend_dsp(struct skl *skl)
 	return 0;
 }
 
-int skl_resume_dsp(struct skl *skl)
+int skl_resume_dsp(struct skl_dev *skl)
 {
-	struct skl_sst *ctx = skl-&gt;skl_sst;
 	struct hdac_bus *bus = skl_to_bus(skl);
 	int ret;
 
@@ -424,26 +420,26 @@ int skl_resume_dsp(struct skl *skl)
 	snd_hdac_ext_bus_ppcap_int_enable(bus, true);
 
 	/* check if DSP 1st boot is done */
-	if (skl-&gt;skl_sst-&gt;is_first_boot)
+	if (skl-&gt;is_first_boot)
 		return 0;
 
 	/*
 	 * Disable dynamic clock and power gating during firmware
 	 * and library download
 	 */
-	ctx-&gt;enable_miscbdcge(ctx-&gt;dev, false);
-	ctx-&gt;clock_power_gating(ctx-&gt;dev, false);
+	skl-&gt;enable_miscbdcge(skl-&gt;dev, false);
+	skl-&gt;clock_power_gating(skl-&gt;dev, false);
 
-	ret = skl_dsp_wake(ctx-&gt;dsp);
-	ctx-&gt;enable_miscbdcge(ctx-&gt;dev, true);
-	ctx-&gt;clock_power_gating(ctx-&gt;dev, true);
+	ret = skl_dsp_wake(skl-&gt;dsp);
+	skl-&gt;enable_miscbdcge(skl-&gt;dev, true);
+	skl-&gt;clock_power_gating(skl-&gt;dev, true);
 	if (ret &lt; 0)
 		return ret;
 
-	skl_dsp_enable_notification(skl-&gt;skl_sst, false);
+	skl_dsp_enable_notification(skl, false);
 
 	if (skl-&gt;cfg.astate_cfg != NULL) {
-		skl_dsp_set_astate_cfg(skl-&gt;skl_sst, skl-&gt;cfg.astate_cfg-&gt;count,
+		skl_dsp_set_astate_cfg(skl, skl-&gt;cfg.astate_cfg-&gt;count,
 					skl-&gt;cfg.astate_cfg);
 	}
 	return ret;
@@ -476,7 +472,7 @@ enum skl_bitdepth skl_get_bit_depth(int params)
  * which are read from widget information passed through topology binary
  * This is send when we create a module with INIT_INSTANCE IPC msg
  */
-static void skl_set_base_module_format(struct skl_sst *ctx,
+static void skl_set_base_module_format(struct skl_dev *skl,
 			struct skl_module_cfg *mconfig,
 			struct skl_base_cfg *base_cfg)
 {
@@ -493,7 +489,7 @@ static void skl_set_base_module_format(struct skl_sst *ctx,
 	base_cfg-&gt;audio_fmt.ch_cfg = format-&gt;ch_cfg;
 	base_cfg-&gt;audio_fmt.sample_type = format-&gt;sample_type;
 
-	dev_dbg(ctx-&gt;dev, &quot;bit_depth=%x valid_bd=%x ch_config=%x\n&quot;,
+	dev_dbg(skl-&gt;dev, &quot;bit_depth=%x valid_bd=%x ch_config=%x\n&quot;,
 			format-&gt;bit_depth, format-&gt;valid_bit_depth,
 			format-&gt;ch_cfg);
 
@@ -530,7 +526,7 @@ static void skl_copy_copier_caps(struct skl_module_cfg *mconfig,
  * Calculate the gatewat settings required for copier module, type of
  * gateway and index of gateway to use
  */
-static u32 skl_get_node_id(struct skl_sst *ctx,
+static u32 skl_get_node_id(struct skl_dev *skl,
 			struct skl_module_cfg *mconfig)
 {
 	union skl_connector_node_id node_id = {0};
@@ -587,16 +583,15 @@ static u32 skl_get_node_id(struct skl_sst *ctx,
 	return node_id.val;
 }
 
-static void skl_setup_cpr_gateway_cfg(struct skl_sst *ctx,
+static void skl_setup_cpr_gateway_cfg(struct skl_dev *skl,
 			struct skl_module_cfg *mconfig,
 			struct skl_cpr_cfg *cpr_mconfig)
 {
 	u32 dma_io_buf;
 	struct skl_module_res *res;
 	int res_idx = mconfig-&gt;res_idx;
-	struct skl *skl = get_skl_ctx(ctx-&gt;dev);
 
-	cpr_mconfig-&gt;gtw_cfg.node_id = skl_get_node_id(ctx, mconfig);
+	cpr_mconfig-&gt;gtw_cfg.node_id = skl_get_node_id(skl, mconfig);
 
 	if (cpr_mconfig-&gt;gtw_cfg.node_id == SKL_NON_GATEWAY_CPR_NODE_ID) {
 		cpr_mconfig-&gt;cpr_feature_mask = 0;
@@ -627,7 +622,7 @@ static void skl_setup_cpr_gateway_cfg(struct skl_sst *ctx,
 		break;
 
 	default:
-		dev_warn(ctx-&gt;dev, &quot;wrong connection type: %d\n&quot;,
+		dev_warn(skl-&gt;dev, &quot;wrong connection type: %d\n&quot;,
 				mconfig-&gt;hw_conn_type);
 		return;
 	}
@@ -653,7 +648,7 @@ static void skl_setup_cpr_gateway_cfg(struct skl_sst *ctx,
 #define DMA_CONTROL_ID 5
 #define DMA_I2S_BLOB_SIZE 21
 
-int skl_dsp_set_dma_control(struct skl_sst *ctx, u32 *caps,
+int skl_dsp_set_dma_control(struct skl_dev *skl, u32 *caps,
 				u32 caps_size, u32 node_id)
 {
 	struct skl_dma_control *dma_ctrl;
@@ -686,14 +681,14 @@ int skl_dsp_set_dma_control(struct skl_sst *ctx, u32 *caps,
 
 	memcpy(dma_ctrl-&gt;config_data, caps, caps_size);
 
-	err = skl_ipc_set_large_config(&amp;ctx-&gt;ipc, &amp;msg, (u32 *)dma_ctrl);
+	err = skl_ipc_set_large_config(&amp;skl-&gt;ipc, &amp;msg, (u32 *)dma_ctrl);
 
 	kfree(dma_ctrl);
 	return err;
 }
 EXPORT_SYMBOL_GPL(skl_dsp_set_dma_control);
 
-static void skl_setup_out_format(struct skl_sst *ctx,
+static void skl_setup_out_format(struct skl_dev *skl,
 			struct skl_module_cfg *mconfig,
 			struct skl_audio_data_format *out_fmt)
 {
@@ -711,7 +706,7 @@ static void skl_setup_out_format(struct skl_sst *ctx,
 	out_fmt-&gt;interleaving = format-&gt;interleaving_style;
 	out_fmt-&gt;sample_type = format-&gt;sample_type;
 
-	dev_dbg(ctx-&gt;dev, &quot;copier out format chan=%d fre=%d bitdepth=%d\n&quot;,
+	dev_dbg(skl-&gt;dev, &quot;copier out format chan=%d fre=%d bitdepth=%d\n&quot;,
 		out_fmt-&gt;number_of_channels, format-&gt;s_freq, format-&gt;bit_depth);
 }
 
@@ -720,7 +715,7 @@ static void skl_setup_out_format(struct skl_sst *ctx,
  * configuration and the target frequency as extra parameter passed as src
  * config
  */
-static void skl_set_src_format(struct skl_sst *ctx,
+static void skl_set_src_format(struct skl_dev *skl,
 			struct skl_module_cfg *mconfig,
 			struct skl_src_module_cfg *src_mconfig)
 {
@@ -728,7 +723,7 @@ static void skl_set_src_format(struct skl_sst *ctx,
 	struct skl_module_iface *iface = &amp;module-&gt;formats[mconfig-&gt;fmt_idx];
 	struct skl_module_fmt *fmt = &amp;iface-&gt;outputs[0].fmt;
 
-	skl_set_base_module_format(ctx, mconfig,
+	skl_set_base_module_format(skl, mconfig,
 		(struct skl_base_cfg *)src_mconfig);
 
 	src_mconfig-&gt;src_cfg = fmt-&gt;s_freq;
@@ -739,7 +734,7 @@ static void skl_set_src_format(struct skl_sst *ctx,
  * module configuration and channel configuration
  * It also take coefficients and now we have defaults applied here
  */
-static void skl_set_updown_mixer_format(struct skl_sst *ctx,
+static void skl_set_updown_mixer_format(struct skl_dev *skl,
 			struct skl_module_cfg *mconfig,
 			struct skl_up_down_mixer_cfg *mixer_mconfig)
 {
@@ -747,7 +742,7 @@ static void skl_set_updown_mixer_format(struct skl_sst *ctx,
 	struct skl_module_iface *iface = &amp;module-&gt;formats[mconfig-&gt;fmt_idx];
 	struct skl_module_fmt *fmt = &amp;iface-&gt;outputs[0].fmt;
 
-	skl_set_base_module_format(ctx,	mconfig,
+	skl_set_base_module_format(skl,	mconfig,
 		(struct skl_base_cfg *)mixer_mconfig);
 	mixer_mconfig-&gt;out_ch_cfg = fmt-&gt;ch_cfg;
 	mixer_mconfig-&gt;ch_map = fmt-&gt;ch_map;
@@ -760,17 +755,17 @@ static void skl_set_updown_mixer_format(struct skl_sst *ctx,
  * format, gateway settings
  * copier_module_config is sent as input buffer with INIT_INSTANCE IPC msg
  */
-static void skl_set_copier_format(struct skl_sst *ctx,
+static void skl_set_copier_format(struct skl_dev *skl,
 			struct skl_module_cfg *mconfig,
 			struct skl_cpr_cfg *cpr_mconfig)
 {
 	struct skl_audio_data_format *out_fmt = &amp;cpr_mconfig-&gt;out_fmt;
 	struct skl_base_cfg *base_cfg = (struct skl_base_cfg *)cpr_mconfig;
 
-	skl_set_base_module_format(ctx, mconfig, base_cfg);
+	skl_set_base_module_format(skl, mconfig, base_cfg);
 
-	skl_setup_out_format(ctx, mconfig, out_fmt);
-	skl_setup_cpr_gateway_cfg(ctx, mconfig, cpr_mconfig);
+	skl_setup_out_format(skl, mconfig, out_fmt);
+	skl_setup_cpr_gateway_cfg(skl, mconfig, cpr_mconfig);
 }
 
 /*
@@ -778,13 +773,13 @@ static void skl_set_copier_format(struct skl_sst *ctx,
  * configuration and params
  */
 
-static void skl_set_algo_format(struct skl_sst *ctx,
+static void skl_set_algo_format(struct skl_dev *skl,
 			struct skl_module_cfg *mconfig,
 			struct skl_algo_cfg *algo_mcfg)
 {
 	struct skl_base_cfg *base_cfg = (struct skl_base_cfg *)algo_mcfg;
 
-	skl_set_base_module_format(ctx, mconfig, base_cfg);
+	skl_set_base_module_format(skl, mconfig, base_cfg);
 
 	if (mconfig-&gt;formats_config.caps_size == 0)
 		return;
@@ -802,7 +797,7 @@ static void skl_set_algo_format(struct skl_sst *ctx,
  * Mic select module take base module configuration and out-format
  * configuration
  */
-static void skl_set_base_outfmt_format(struct skl_sst *ctx,
+static void skl_set_base_outfmt_format(struct skl_dev *skl,
 			struct skl_module_cfg *mconfig,
 			struct skl_base_outfmt_cfg *base_outfmt_mcfg)
 {
@@ -810,11 +805,11 @@ static void skl_set_base_outfmt_format(struct skl_sst *ctx,
 	struct skl_base_cfg *base_cfg =
 				(struct skl_base_cfg *)base_outfmt_mcfg;
 
-	skl_set_base_module_format(ctx, mconfig, base_cfg);
-	skl_setup_out_format(ctx, mconfig, out_fmt);
+	skl_set_base_module_format(skl, mconfig, base_cfg);
+	skl_setup_out_format(skl, mconfig, out_fmt);
 }
 
-static u16 skl_get_module_param_size(struct skl_sst *ctx,
+static u16 skl_get_module_param_size(struct skl_dev *skl,
 			struct skl_module_cfg *mconfig)
 {
 	u16 param_size;
@@ -859,14 +854,14 @@ static u16 skl_get_module_param_size(struct skl_sst *ctx,
  * base module format configuration
  */
 
-static int skl_set_module_format(struct skl_sst *ctx,
+static int skl_set_module_format(struct skl_dev *skl,
 			struct skl_module_cfg *module_config,
 			u16 *module_config_size,
 			void **param_data)
 {
 	u16 param_size;
 
-	param_size  = skl_get_module_param_size(ctx, module_config);
+	param_size  = skl_get_module_param_size(skl, module_config);
 
 	*param_data = kzalloc(param_size, GFP_KERNEL);
 	if (NULL == *param_data)
@@ -876,34 +871,34 @@ static int skl_set_module_format(struct skl_sst *ctx,
 
 	switch (module_config-&gt;m_type) {
 	case SKL_MODULE_TYPE_COPIER:
-		skl_set_copier_format(ctx, module_config, *param_data);
+		skl_set_copier_format(skl, module_config, *param_data);
 		break;
 
 	case SKL_MODULE_TYPE_SRCINT:
-		skl_set_src_format(ctx, module_config, *param_data);
+		skl_set_src_format(skl, module_config, *param_data);
 		break;
 
 	case SKL_MODULE_TYPE_UPDWMIX:
-		skl_set_updown_mixer_format(ctx, module_config, *param_data);
+		skl_set_updown_mixer_format(skl, module_config, *param_data);
 		break;
 
 	case SKL_MODULE_TYPE_ALGO:
-		skl_set_algo_format(ctx, module_config, *param_data);
+		skl_set_algo_format(skl, module_config, *param_data);
 		break;
 
 	case SKL_MODULE_TYPE_BASE_OUTFMT:
 	case SKL_MODULE_TYPE_MIC_SELECT:
 	case SKL_MODULE_TYPE_KPB:
-		skl_set_base_outfmt_format(ctx, module_config, *param_data);
+		skl_set_base_outfmt_format(skl, module_config, *param_data);
 		break;
 
 	default:
-		skl_set_base_module_format(ctx, module_config, *param_data);
+		skl_set_base_module_format(skl, module_config, *param_data);
 		break;
 
 	}
 
-	dev_dbg(ctx-&gt;dev, &quot;Module type=%d config size: %d bytes\n&quot;,
+	dev_dbg(skl-&gt;dev, &quot;Module type=%d config size: %d bytes\n&quot;,
 			module_config-&gt;id.module_id, param_size);
 	print_hex_dump_debug(&quot;Module params:&quot;, DUMP_PREFIX_OFFSET, 8, 4,
 			*param_data, param_size, false);
@@ -1004,7 +999,7 @@ static void skl_clear_module_state(struct skl_module_pin *mpin, int max,
  * We first calculate the module format, based on module type and then
  * invoke the DSP by sending IPC INIT_INSTANCE using ipc helper
  */
-int skl_init_module(struct skl_sst *ctx,
+int skl_init_module(struct skl_dev *skl,
 			struct skl_module_cfg *mconfig)
 {
 	u16 module_config_size = 0;
@@ -1012,19 +1007,19 @@ int skl_init_module(struct skl_sst *ctx,
 	int ret;
 	struct skl_ipc_init_instance_msg msg;
 
-	dev_dbg(ctx-&gt;dev, &quot;%s: module_id = %d instance=%d\n&quot;, __func__,
+	dev_dbg(skl-&gt;dev, &quot;%s: module_id = %d instance=%d\n&quot;, __func__,
 		 mconfig-&gt;id.module_id, mconfig-&gt;id.pvt_id);
 
 	if (mconfig-&gt;pipe-&gt;state != SKL_PIPE_CREATED) {
-		dev_err(ctx-&gt;dev, &quot;Pipe not created state= %d pipe_id= %d\n&quot;,
+		dev_err(skl-&gt;dev, &quot;Pipe not created state= %d pipe_id= %d\n&quot;,
 				 mconfig-&gt;pipe-&gt;state, mconfig-&gt;pipe-&gt;ppl_id);
 		return -EIO;
 	}
 
-	ret = skl_set_module_format(ctx, mconfig,
+	ret = skl_set_module_format(skl, mconfig,
 			&amp;module_config_size, &amp;param_data);
 	if (ret &lt; 0) {
-		dev_err(ctx-&gt;dev, &quot;Failed to set module format ret=%d\n&quot;, ret);
+		dev_err(skl-&gt;dev, &quot;Failed to set module format ret=%d\n&quot;, ret);
 		return ret;
 	}
 
@@ -1035,9 +1030,9 @@ int skl_init_module(struct skl_sst *ctx,
 	msg.core_id = mconfig-&gt;core_id;
 	msg.domain = mconfig-&gt;domain;
 
-	ret = skl_ipc_init_instance(&amp;ctx-&gt;ipc, &amp;msg, param_data);
+	ret = skl_ipc_init_instance(&amp;skl-&gt;ipc, &amp;msg, param_data);
 	if (ret &lt; 0) {
-		dev_err(ctx-&gt;dev, &quot;Failed to init instance ret=%d\n&quot;, ret);
+		dev_err(skl-&gt;dev, &quot;Failed to init instance ret=%d\n&quot;, ret);
 		kfree(param_data);
 		return ret;
 	}
@@ -1046,15 +1041,15 @@ int skl_init_module(struct skl_sst *ctx,
 	return ret;
 }
 
-static void skl_dump_bind_info(struct skl_sst *ctx, struct skl_module_cfg
+static void skl_dump_bind_info(struct skl_dev *skl, struct skl_module_cfg
 	*src_module, struct skl_module_cfg *dst_module)
 {
-	dev_dbg(ctx-&gt;dev, &quot;%s: src module_id = %d  src_instance=%d\n&quot;,
+	dev_dbg(skl-&gt;dev, &quot;%s: src module_id = %d  src_instance=%d\n&quot;,
 		__func__, src_module-&gt;id.module_id, src_module-&gt;id.pvt_id);
-	dev_dbg(ctx-&gt;dev, &quot;%s: dst_module=%d dst_instance=%d\n&quot;, __func__,
+	dev_dbg(skl-&gt;dev, &quot;%s: dst_module=%d dst_instance=%d\n&quot;, __func__,
 		 dst_module-&gt;id.module_id, dst_module-&gt;id.pvt_id);
 
-	dev_dbg(ctx-&gt;dev, &quot;src_module state = %d dst module state = %d\n&quot;,
+	dev_dbg(skl-&gt;dev, &quot;src_module state = %d dst module state = %d\n&quot;,
 		src_module-&gt;m_state, dst_module-&gt;m_state);
 }
 
@@ -1063,7 +1058,7 @@ static void skl_dump_bind_info(struct skl_sst *ctx, struct skl_module_cfg
  * it is already bind.
  * Find the pin allocated and unbind then using bind_unbind IPC
  */
-int skl_unbind_modules(struct skl_sst *ctx,
+int skl_unbind_modules(struct skl_dev *skl,
 			struct skl_module_cfg *src_mcfg,
 			struct skl_module_cfg *dst_mcfg)
 {
@@ -1075,7 +1070,7 @@ int skl_unbind_modules(struct skl_sst *ctx,
 	int out_max = src_mcfg-&gt;module-&gt;max_output_pins;
 	int src_index, dst_index, src_pin_state, dst_pin_state;
 
-	skl_dump_bind_info(ctx, src_mcfg, dst_mcfg);
+	skl_dump_bind_info(skl, src_mcfg, dst_mcfg);
 
 	/* get src queue index */
 	src_index = skl_get_queue_index(src_mcfg-&gt;m_out_pin, dst_id, out_max);
@@ -1104,7 +1099,7 @@ int skl_unbind_modules(struct skl_sst *ctx,
 	msg.dst_instance_id = dst_mcfg-&gt;id.pvt_id;
 	msg.bind = false;
 
-	ret = skl_ipc_bind_unbind(&amp;ctx-&gt;ipc, &amp;msg);
+	ret = skl_ipc_bind_unbind(&amp;skl-&gt;ipc, &amp;msg);
 	if (!ret) {
 		/* free queue only if unbind is success */
 		skl_free_queue(src_mcfg-&gt;m_out_pin, src_index);
@@ -1142,7 +1137,7 @@ static void fill_pin_params(struct skl_audio_data_format *pin_fmt,
  * This function finds the pins and then sends bund_unbind IPC message to
  * DSP using IPC helper
  */
-int skl_bind_modules(struct skl_sst *ctx,
+int skl_bind_modules(struct skl_dev *skl,
 			struct skl_module_cfg *src_mcfg,
 			struct skl_module_cfg *dst_mcfg)
 {
@@ -1156,7 +1151,7 @@ int skl_bind_modules(struct skl_sst *ctx,
 	struct skl_module *module;
 	struct skl_module_iface *fmt;
 
-	skl_dump_bind_info(ctx, src_mcfg, dst_mcfg);
+	skl_dump_bind_info(skl, src_mcfg, dst_mcfg);
 
 	if (src_mcfg-&gt;m_state &lt; SKL_MODULE_INIT_DONE ||
 		dst_mcfg-&gt;m_state &lt; SKL_MODULE_INIT_DONE)
@@ -1188,7 +1183,7 @@ int skl_bind_modules(struct skl_sst *ctx,
 
 		format = &amp;fmt-&gt;outputs[src_index].fmt;
 		fill_pin_params(&amp;(pin_fmt.dst_fmt), format);
-		ret = skl_set_module_params(ctx, (void *)&amp;pin_fmt,
+		ret = skl_set_module_params(skl, (void *)&amp;pin_fmt,
 					sizeof(struct skl_cpr_pin_fmt),
 					CPR_SINK_FMT_PARAM_ID, src_mcfg);
 
@@ -1198,7 +1193,7 @@ int skl_bind_modules(struct skl_sst *ctx,
 
 	msg.dst_queue = dst_index;
 
-	dev_dbg(ctx-&gt;dev, &quot;src queue = %d dst queue =%d\n&quot;,
+	dev_dbg(skl-&gt;dev, &quot;src queue = %d dst queue =%d\n&quot;,
 			 msg.src_queue, msg.dst_queue);
 
 	msg.module_id = src_mcfg-&gt;id.module_id;
@@ -1207,7 +1202,7 @@ int skl_bind_modules(struct skl_sst *ctx,
 	msg.dst_instance_id = dst_mcfg-&gt;id.pvt_id;
 	msg.bind = true;
 
-	ret = skl_ipc_bind_unbind(&amp;ctx-&gt;ipc, &amp;msg);
+	ret = skl_ipc_bind_unbind(&amp;skl-&gt;ipc, &amp;msg);
 
 	if (!ret) {
 		src_mcfg-&gt;m_state = SKL_MODULE_BIND_DONE;
@@ -1223,12 +1218,12 @@ int skl_bind_modules(struct skl_sst *ctx,
 	return ret;
 }
 
-static int skl_set_pipe_state(struct skl_sst *ctx, struct skl_pipe *pipe,
+static int skl_set_pipe_state(struct skl_dev *skl, struct skl_pipe *pipe,
 	enum skl_ipc_pipeline_state state)
 {
-	dev_dbg(ctx-&gt;dev, &quot;%s: pipe_state = %d\n&quot;, __func__, state);
+	dev_dbg(skl-&gt;dev, &quot;%s: pipe_state = %d\n&quot;, __func__, state);
 
-	return skl_ipc_set_pipeline_state(&amp;ctx-&gt;ipc, pipe-&gt;ppl_id, state);
+	return skl_ipc_set_pipeline_state(&amp;skl-&gt;ipc, pipe-&gt;ppl_id, state);
 }
 
 /*
@@ -1237,17 +1232,17 @@ static int skl_set_pipe_state(struct skl_sst *ctx, struct skl_pipe *pipe,
  * This function creates pipeline, by sending create pipeline IPC messages
  * to FW
  */
-int skl_create_pipeline(struct skl_sst *ctx, struct skl_pipe *pipe)
+int skl_create_pipeline(struct skl_dev *skl, struct skl_pipe *pipe)
 {
 	int ret;
 
-	dev_dbg(ctx-&gt;dev, &quot;%s: pipe_id = %d\n&quot;, __func__, pipe-&gt;ppl_id);
+	dev_dbg(skl-&gt;dev, &quot;%s: pipe_id = %d\n&quot;, __func__, pipe-&gt;ppl_id);
 
-	ret = skl_ipc_create_pipeline(&amp;ctx-&gt;ipc, pipe-&gt;memory_pages,
+	ret = skl_ipc_create_pipeline(&amp;skl-&gt;ipc, pipe-&gt;memory_pages,
 				pipe-&gt;pipe_priority, pipe-&gt;ppl_id,
 				pipe-&gt;lp_mode);
 	if (ret &lt; 0) {
-		dev_err(ctx-&gt;dev, &quot;Failed to create pipeline\n&quot;);
+		dev_err(skl-&gt;dev, &quot;Failed to create pipeline\n&quot;);
 		return ret;
 	}
 
@@ -1262,11 +1257,11 @@ int skl_create_pipeline(struct skl_sst *ctx, struct skl_pipe *pipe)
  * reset state. Finish the procedure by sending delete pipeline IPC.
  * DSP will stop the DMA engines and release resources
  */
-int skl_delete_pipe(struct skl_sst *ctx, struct skl_pipe *pipe)
+int skl_delete_pipe(struct skl_dev *skl, struct skl_pipe *pipe)
 {
 	int ret;
 
-	dev_dbg(ctx-&gt;dev, &quot;%s: pipe = %d\n&quot;, __func__, pipe-&gt;ppl_id);
+	dev_dbg(skl-&gt;dev, &quot;%s: pipe = %d\n&quot;, __func__, pipe-&gt;ppl_id);
 
 	/* If pipe was not created in FW, do not try to delete it */
 	if (pipe-&gt;state &lt; SKL_PIPE_CREATED)
@@ -1274,9 +1269,9 @@ int skl_delete_pipe(struct skl_sst *ctx, struct skl_pipe *pipe)
 
 	/* If pipe is started, do stop the pipe in FW. */
 	if (pipe-&gt;state &gt;= SKL_PIPE_STARTED) {
-		ret = skl_set_pipe_state(ctx, pipe, PPL_PAUSED);
+		ret = skl_set_pipe_state(skl, pipe, PPL_PAUSED);
 		if (ret &lt; 0) {
-			dev_err(ctx-&gt;dev, &quot;Failed to stop pipeline\n&quot;);
+			dev_err(skl-&gt;dev, &quot;Failed to stop pipeline\n&quot;);
 			return ret;
 		}
 
@@ -1284,17 +1279,17 @@ int skl_delete_pipe(struct skl_sst *ctx, struct skl_pipe *pipe)
 	}
 
 	/* reset pipe state before deletion */
-	ret = skl_set_pipe_state(ctx, pipe, PPL_RESET);
+	ret = skl_set_pipe_state(skl, pipe, PPL_RESET);
 	if (ret &lt; 0) {
-		dev_err(ctx-&gt;dev, &quot;Failed to reset pipe ret=%d\n&quot;, ret);
+		dev_err(skl-&gt;dev, &quot;Failed to reset pipe ret=%d\n&quot;, ret);
 		return ret;
 	}
 
 	pipe-&gt;state = SKL_PIPE_RESET;
 
-	ret = skl_ipc_delete_pipeline(&amp;ctx-&gt;ipc, pipe-&gt;ppl_id);
+	ret = skl_ipc_delete_pipeline(&amp;skl-&gt;ipc, pipe-&gt;ppl_id);
 	if (ret &lt; 0) {
-		dev_err(ctx-&gt;dev, &quot;Failed to delete pipeline\n&quot;);
+		dev_err(skl-&gt;dev, &quot;Failed to delete pipeline\n&quot;);
 		return ret;
 	}
 
@@ -1308,28 +1303,28 @@ int skl_delete_pipe(struct skl_sst *ctx, struct skl_pipe *pipe)
  * For processing data the pipe need to be run by sending IPC set pipe state
  * to DSP
  */
-int skl_run_pipe(struct skl_sst *ctx, struct skl_pipe *pipe)
+int skl_run_pipe(struct skl_dev *skl, struct skl_pipe *pipe)
 {
 	int ret;
 
-	dev_dbg(ctx-&gt;dev, &quot;%s: pipe = %d\n&quot;, __func__, pipe-&gt;ppl_id);
+	dev_dbg(skl-&gt;dev, &quot;%s: pipe = %d\n&quot;, __func__, pipe-&gt;ppl_id);
 
 	/* If pipe was not created in FW, do not try to pause or delete */
 	if (pipe-&gt;state &lt; SKL_PIPE_CREATED)
 		return 0;
 
 	/* Pipe has to be paused before it is started */
-	ret = skl_set_pipe_state(ctx, pipe, PPL_PAUSED);
+	ret = skl_set_pipe_state(skl, pipe, PPL_PAUSED);
 	if (ret &lt; 0) {
-		dev_err(ctx-&gt;dev, &quot;Failed to pause pipe\n&quot;);
+		dev_err(skl-&gt;dev, &quot;Failed to pause pipe\n&quot;);
 		return ret;
 	}
 
 	pipe-&gt;state = SKL_PIPE_PAUSED;
 
-	ret = skl_set_pipe_state(ctx, pipe, PPL_RUNNING);
+	ret = skl_set_pipe_state(skl, pipe, PPL_RUNNING);
 	if (ret &lt; 0) {
-		dev_err(ctx-&gt;dev, &quot;Failed to start pipe\n&quot;);
+		dev_err(skl-&gt;dev, &quot;Failed to start pipe\n&quot;);
 		return ret;
 	}
 
@@ -1342,19 +1337,19 @@ int skl_run_pipe(struct skl_sst *ctx, struct skl_pipe *pipe)
  * Stop the pipeline by sending set pipe state IPC
  * DSP doesnt implement stop so we always send pause message
  */
-int skl_stop_pipe(struct skl_sst *ctx, struct skl_pipe *pipe)
+int skl_stop_pipe(struct skl_dev *skl, struct skl_pipe *pipe)
 {
 	int ret;
 
-	dev_dbg(ctx-&gt;dev, &quot;In %s pipe=%d\n&quot;, __func__, pipe-&gt;ppl_id);
+	dev_dbg(skl-&gt;dev, &quot;In %s pipe=%d\n&quot;, __func__, pipe-&gt;ppl_id);
 
 	/* If pipe was not created in FW, do not try to pause or delete */
 	if (pipe-&gt;state &lt; SKL_PIPE_PAUSED)
 		return 0;
 
-	ret = skl_set_pipe_state(ctx, pipe, PPL_PAUSED);
+	ret = skl_set_pipe_state(skl, pipe, PPL_PAUSED);
 	if (ret &lt; 0) {
-		dev_dbg(ctx-&gt;dev, &quot;Failed to stop pipe\n&quot;);
+		dev_dbg(skl-&gt;dev, &quot;Failed to stop pipe\n&quot;);
 		return ret;
 	}
 
@@ -1367,7 +1362,7 @@ int skl_stop_pipe(struct skl_sst *ctx, struct skl_pipe *pipe)
  * Reset the pipeline by sending set pipe state IPC this will reset the DMA
  * from the DSP side
  */
-int skl_reset_pipe(struct skl_sst *ctx, struct skl_pipe *pipe)
+int skl_reset_pipe(struct skl_dev *skl, struct skl_pipe *pipe)
 {
 	int ret;
 
@@ -1375,9 +1370,9 @@ int skl_reset_pipe(struct skl_sst *ctx, struct skl_pipe *pipe)
 	if (pipe-&gt;state &lt; SKL_PIPE_PAUSED)
 		return 0;
 
-	ret = skl_set_pipe_state(ctx, pipe, PPL_RESET);
+	ret = skl_set_pipe_state(skl, pipe, PPL_RESET);
 	if (ret &lt; 0) {
-		dev_dbg(ctx-&gt;dev, &quot;Failed to reset pipe ret=%d\n&quot;, ret);
+		dev_dbg(skl-&gt;dev, &quot;Failed to reset pipe ret=%d\n&quot;, ret);
 		return ret;
 	}
 
@@ -1387,7 +1382,7 @@ int skl_reset_pipe(struct skl_sst *ctx, struct skl_pipe *pipe)
 }
 
 /* Algo parameter set helper function */
-int skl_set_module_params(struct skl_sst *ctx, u32 *params, int size,
+int skl_set_module_params(struct skl_dev *skl, u32 *params, int size,
 				u32 param_id, struct skl_module_cfg *mcfg)
 {
 	struct skl_ipc_large_config_msg msg;
@@ -1397,10 +1392,10 @@ int skl_set_module_params(struct skl_sst *ctx, u32 *params, int size,
 	msg.param_data_size = size;
 	msg.large_param_id = param_id;
 
-	return skl_ipc_set_large_config(&amp;ctx-&gt;ipc, &amp;msg, params);
+	return skl_ipc_set_large_config(&amp;skl-&gt;ipc, &amp;msg, params);
 }
 
-int skl_get_module_params(struct skl_sst *ctx, u32 *params, int size,
+int skl_get_module_params(struct skl_dev *skl, u32 *params, int size,
 			  u32 param_id, struct skl_module_cfg *mcfg)
 {
 	struct skl_ipc_large_config_msg msg;
@@ -1410,5 +1405,5 @@ int skl_get_module_params(struct skl_sst *ctx, u32 *params, int size,
 	msg.param_data_size = size;
 	msg.large_param_id = param_id;
 
-	return skl_ipc_get_large_config(&amp;ctx-&gt;ipc, &amp;msg, params);
+	return skl_ipc_get_large_config(&amp;skl-&gt;ipc, &amp;msg, params);
 }
diff --git a/sound/soc/intel/skylake/skl-nhlt.c b/sound/soc/intel/skylake/skl-nhlt.c
index 1132109cb992..6fc3a190067e 100644
--- a/sound/soc/intel/skylake/skl-nhlt.c
+++ b/sound/soc/intel/skylake/skl-nhlt.c
@@ -126,7 +126,7 @@ static bool skl_check_ep_match(struct device *dev, struct nhlt_endpoint *epnt,
 }
 
 struct nhlt_specific_cfg
-*skl_get_ep_blob(struct skl *skl, u32 instance, u8 link_type,
+*skl_get_ep_blob(struct skl_dev *skl, u32 instance, u8 link_type,
 			u8 s_fmt, u8 num_ch, u32 s_rate,
 			u8 dirn, u8 dev_type)
 {
@@ -162,7 +162,7 @@ struct nhlt_specific_cfg
 	return NULL;
 }
 
-int skl_get_dmic_geo(struct skl *skl)
+int skl_get_dmic_geo(struct skl_dev *skl)
 {
 	struct nhlt_acpi_table *nhlt = (struct nhlt_acpi_table *)skl-&gt;nhlt;
 	struct nhlt_endpoint *epnt;
@@ -219,7 +219,7 @@ static void skl_nhlt_trim_space(char *trim)
 	s[cnt] = '\0';
 }
 
-int skl_nhlt_update_topology_bin(struct skl *skl)
+int skl_nhlt_update_topology_bin(struct skl_dev *skl)
 {
 	struct nhlt_acpi_table *nhlt = (struct nhlt_acpi_table *)skl-&gt;nhlt;
 	struct hdac_bus *bus = skl_to_bus(skl);
@@ -243,7 +243,7 @@ static ssize_t skl_nhlt_platform_id_show(struct device *dev,
 {
 	struct pci_dev *pci = to_pci_dev(dev);
 	struct hdac_bus *bus = pci_get_drvdata(pci);
-	struct skl *skl = bus_to_skl(bus);
+	struct skl_dev *skl = bus_to_skl(bus);
 	struct nhlt_acpi_table *nhlt = (struct nhlt_acpi_table *)skl-&gt;nhlt;
 	char platform_id[32];
 
@@ -257,7 +257,7 @@ static ssize_t skl_nhlt_platform_id_show(struct device *dev,
 
 static DEVICE_ATTR(platform_id, 0444, skl_nhlt_platform_id_show, NULL);
 
-int skl_nhlt_create_sysfs(struct skl *skl)
+int skl_nhlt_create_sysfs(struct skl_dev *skl)
 {
 	struct device *dev = &amp;skl-&gt;pci-&gt;dev;
 
@@ -267,7 +267,7 @@ int skl_nhlt_create_sysfs(struct skl *skl)
 	return 0;
 }
 
-void skl_nhlt_remove_sysfs(struct skl *skl)
+void skl_nhlt_remove_sysfs(struct skl_dev *skl)
 {
 	struct device *dev = &amp;skl-&gt;pci-&gt;dev;
 
@@ -279,7 +279,7 @@ void skl_nhlt_remove_sysfs(struct skl *skl)
  * stores all possible rates supported in a rate table for the corresponding
  * sclk/sclkfs.
  */
-static void skl_get_ssp_clks(struct skl *skl, struct skl_ssp_clk *ssp_clks,
+static void skl_get_ssp_clks(struct skl_dev *skl, struct skl_ssp_clk *ssp_clks,
 				struct nhlt_fmt *fmt, u8 id)
 {
 	struct skl_i2s_config_blob_ext *i2s_config_ext;
@@ -377,7 +377,7 @@ static void skl_get_ssp_clks(struct skl *skl, struct skl_ssp_clk *ssp_clks,
 	}
 }
 
-static void skl_get_mclk(struct skl *skl, struct skl_ssp_clk *mclk,
+static void skl_get_mclk(struct skl_dev *skl, struct skl_ssp_clk *mclk,
 				struct nhlt_fmt *fmt, u8 id)
 {
 	struct skl_i2s_config_blob_ext *i2s_config_ext;
@@ -421,7 +421,7 @@ static void skl_get_mclk(struct skl *skl, struct skl_ssp_clk *mclk,
 	mclk[id].parent_name = parent-&gt;name;
 }
 
-void skl_get_clks(struct skl *skl, struct skl_ssp_clk *ssp_clks)
+void skl_get_clks(struct skl_dev *skl, struct skl_ssp_clk *ssp_clks)
 {
 	struct nhlt_acpi_table *nhlt = (struct nhlt_acpi_table *)skl-&gt;nhlt;
 	struct nhlt_endpoint *epnt;
diff --git a/sound/soc/intel/skylake/skl-pcm.c b/sound/soc/intel/skylake/skl-pcm.c
index 760bbcf9a469..2ae5d09d7228 100644
--- a/sound/soc/intel/skylake/skl-pcm.c
+++ b/sound/soc/intel/skylake/skl-pcm.c
@@ -116,7 +116,7 @@ static void skl_set_suspend_active(struct snd_pcm_substream *substream,
 {
 	struct hdac_bus *bus = dev_get_drvdata(dai-&gt;dev);
 	struct snd_soc_dapm_widget *w;
-	struct skl *skl = bus_to_skl(bus);
+	struct skl_dev *skl = bus_to_skl(bus);
 
 	if (substream-&gt;stream == SNDRV_PCM_STREAM_PLAYBACK)
 		w = dai-&gt;playback_widget;
@@ -132,7 +132,7 @@ static void skl_set_suspend_active(struct snd_pcm_substream *substream,
 int skl_pcm_host_dma_prepare(struct device *dev, struct skl_pipe_params *params)
 {
 	struct hdac_bus *bus = dev_get_drvdata(dev);
-	struct skl *skl = bus_to_skl(bus);
+	struct skl_dev *skl = bus_to_skl(bus);
 	unsigned int format_val;
 	struct hdac_stream *hstream;
 	struct hdac_ext_stream *stream;
@@ -224,7 +224,7 @@ static int skl_pcm_open(struct snd_pcm_substream *substream,
 	struct hdac_ext_stream *stream;
 	struct snd_pcm_runtime *runtime = substream-&gt;runtime;
 	struct skl_dma_params *dma_params;
-	struct skl *skl = get_skl_ctx(dai-&gt;dev);
+	struct skl_dev *skl = get_skl_ctx(dai-&gt;dev);
 	struct skl_module_cfg *mconfig;
 
 	dev_dbg(dai-&gt;dev, &quot;%s: %s\n&quot;, __func__, dai-&gt;name);
@@ -271,7 +271,7 @@ static int skl_pcm_open(struct snd_pcm_substream *substream,
 static int skl_pcm_prepare(struct snd_pcm_substream *substream,
 		struct snd_soc_dai *dai)
 {
-	struct skl *skl = get_skl_ctx(dai-&gt;dev);
+	struct skl_dev *skl = get_skl_ctx(dai-&gt;dev);
 	struct skl_module_cfg *mconfig;
 	int ret;
 
@@ -288,7 +288,7 @@ static int skl_pcm_prepare(struct snd_pcm_substream *substream,
 		 mconfig-&gt;pipe-&gt;state == SKL_PIPE_CREATED ||
 		 mconfig-&gt;pipe-&gt;state == SKL_PIPE_PAUSED)) {
 
-		ret = skl_reset_pipe(skl-&gt;skl_sst, mconfig-&gt;pipe);
+		ret = skl_reset_pipe(skl, mconfig-&gt;pipe);
 
 		if (ret &lt; 0)
 			return ret;
@@ -350,7 +350,7 @@ static void skl_pcm_close(struct snd_pcm_substream *substream,
 	struct hdac_ext_stream *stream = get_hdac_ext_stream(substream);
 	struct hdac_bus *bus = dev_get_drvdata(dai-&gt;dev);
 	struct skl_dma_params *dma_params = NULL;
-	struct skl *skl = bus_to_skl(bus);
+	struct skl_dev *skl = bus_to_skl(bus);
 	struct skl_module_cfg *mconfig;
 
 	dev_dbg(dai-&gt;dev, &quot;%s: %s\n&quot;, __func__, dai-&gt;name);
@@ -370,9 +370,9 @@ static void skl_pcm_close(struct snd_pcm_substream *substream,
 	 * CGCTL.MISCBDCGE if disabled by driver
 	 */
 	if (!strncmp(dai-&gt;name, &quot;Reference Pin&quot;, 13) &amp;&amp;
-			skl-&gt;skl_sst-&gt;miscbdcg_disabled) {
-		skl-&gt;skl_sst-&gt;enable_miscbdcge(dai-&gt;dev, true);
-		skl-&gt;skl_sst-&gt;miscbdcg_disabled = false;
+			skl-&gt;miscbdcg_disabled) {
+		skl-&gt;enable_miscbdcge(dai-&gt;dev, true);
+		skl-&gt;miscbdcg_disabled = false;
 	}
 
 	mconfig = skl_tplg_fe_get_cpr_module(dai, substream-&gt;stream);
@@ -387,7 +387,7 @@ static int skl_pcm_hw_free(struct snd_pcm_substream *substream,
 {
 	struct hdac_bus *bus = dev_get_drvdata(dai-&gt;dev);
 	struct hdac_ext_stream *stream = get_hdac_ext_stream(substream);
-	struct skl *skl = get_skl_ctx(dai-&gt;dev);
+	struct skl_dev *skl = get_skl_ctx(dai-&gt;dev);
 	struct skl_module_cfg *mconfig;
 	int ret;
 
@@ -396,7 +396,7 @@ static int skl_pcm_hw_free(struct snd_pcm_substream *substream,
 	mconfig = skl_tplg_fe_get_cpr_module(dai, substream-&gt;stream);
 
 	if (mconfig) {
-		ret = skl_reset_pipe(skl-&gt;skl_sst, mconfig-&gt;pipe);
+		ret = skl_reset_pipe(skl, mconfig-&gt;pipe);
 		if (ret &lt; 0)
 			dev_err(dai-&gt;dev, &quot;%s:Reset failed ret =%d&quot;,
 						__func__, ret);
@@ -471,8 +471,7 @@ static int skl_decoupled_trigger(struct snd_pcm_substream *substream,
 static int skl_pcm_trigger(struct snd_pcm_substream *substream, int cmd,
 		struct snd_soc_dai *dai)
 {
-	struct skl *skl = get_skl_ctx(dai-&gt;dev);
-	struct skl_sst *ctx = skl-&gt;skl_sst;
+	struct skl_dev *skl = get_skl_ctx(dai-&gt;dev);
 	struct skl_module_cfg *mconfig;
 	struct hdac_bus *bus = get_bus_ctx(substream);
 	struct hdac_ext_stream *stream = get_hdac_ext_stream(substream);
@@ -515,7 +514,7 @@ static int skl_pcm_trigger(struct snd_pcm_substream *substream, int cmd,
 		ret = skl_decoupled_trigger(substream, cmd);
 		if (ret &lt; 0)
 			return ret;
-		return skl_run_pipe(ctx, mconfig-&gt;pipe);
+		return skl_run_pipe(skl, mconfig-&gt;pipe);
 		break;
 
 	case SNDRV_PCM_TRIGGER_PAUSE_PUSH:
@@ -526,7 +525,7 @@ static int skl_pcm_trigger(struct snd_pcm_substream *substream, int cmd,
 		 * there are no underrun/overrun in the case if there is a delay
 		 * between the two operations.
 		 */
-		ret = skl_stop_pipe(ctx, mconfig-&gt;pipe);
+		ret = skl_stop_pipe(skl, mconfig-&gt;pipe);
 		if (ret &lt; 0)
 			return ret;
 
@@ -602,14 +601,14 @@ static int skl_link_hw_params(struct snd_pcm_substream *substream,
 static int skl_link_pcm_prepare(struct snd_pcm_substream *substream,
 		struct snd_soc_dai *dai)
 {
-	struct skl *skl = get_skl_ctx(dai-&gt;dev);
+	struct skl_dev *skl = get_skl_ctx(dai-&gt;dev);
 	struct skl_module_cfg *mconfig = NULL;
 
 	/* In case of XRUN recovery, reset the FW pipe to clean state */
 	mconfig = skl_tplg_be_get_cpr_module(dai, substream-&gt;stream);
 	if (mconfig &amp;&amp; !mconfig-&gt;pipe-&gt;passthru &amp;&amp;
 		(substream-&gt;runtime-&gt;status-&gt;state == SNDRV_PCM_STATE_XRUN))
-		skl_reset_pipe(skl-&gt;skl_sst, mconfig-&gt;pipe);
+		skl_reset_pipe(skl, mconfig-&gt;pipe);
 
 	return 0;
 }
@@ -1301,7 +1300,7 @@ static int skl_pcm_new(struct snd_soc_pcm_runtime *rtd)
 	struct hdac_bus *bus = dev_get_drvdata(dai-&gt;dev);
 	struct snd_pcm *pcm = rtd-&gt;pcm;
 	unsigned int size;
-	struct skl *skl = bus_to_skl(bus);
+	struct skl_dev *skl = bus_to_skl(bus);
 
 	if (dai-&gt;driver-&gt;playback.channels_min ||
 		dai-&gt;driver-&gt;capture.channels_min) {
@@ -1318,9 +1317,9 @@ static int skl_pcm_new(struct snd_soc_pcm_runtime *rtd)
 	return 0;
 }
 
-static int skl_get_module_info(struct skl *skl, struct skl_module_cfg *mconfig)
+static int skl_get_module_info(struct skl_dev *skl,
+		struct skl_module_cfg *mconfig)
 {
-	struct skl_sst *ctx = skl-&gt;skl_sst;
 	struct skl_module_inst_id *pin_id;
 	guid_t *uuid_mod, *uuid_tplg;
 	struct skl_module *skl_module;
@@ -1329,12 +1328,12 @@ static int skl_get_module_info(struct skl *skl, struct skl_module_cfg *mconfig)
 
 	uuid_mod = (guid_t *)mconfig-&gt;guid;
 
-	if (list_empty(&amp;ctx-&gt;uuid_list)) {
-		dev_err(ctx-&gt;dev, &quot;Module list is empty\n&quot;);
+	if (list_empty(&amp;skl-&gt;uuid_list)) {
+		dev_err(skl-&gt;dev, &quot;Module list is empty\n&quot;);
 		return -EIO;
 	}
 
-	list_for_each_entry(module, &amp;ctx-&gt;uuid_list, list) {
+	list_for_each_entry(module, &amp;skl-&gt;uuid_list, list) {
 		if (guid_equal(uuid_mod, &amp;module-&gt;uuid)) {
 			mconfig-&gt;id.module_id = module-&gt;id;
 			if (mconfig-&gt;module)
@@ -1361,7 +1360,7 @@ static int skl_get_module_info(struct skl *skl, struct skl_module_cfg *mconfig)
 	if (skl-&gt;nr_modules &amp;&amp; ret)
 		return ret;
 
-	list_for_each_entry(module, &amp;ctx-&gt;uuid_list, list) {
+	list_for_each_entry(module, &amp;skl-&gt;uuid_list, list) {
 		for (i = 0; i &lt; MAX_IN_QUEUE; i++) {
 			pin_id = &amp;mconfig-&gt;m_in_pin[i].id;
 			if (guid_equal(&amp;pin_id-&gt;mod_uuid, &amp;module-&gt;uuid))
@@ -1378,7 +1377,7 @@ static int skl_get_module_info(struct skl *skl, struct skl_module_cfg *mconfig)
 	return 0;
 }
 
-static int skl_populate_modules(struct skl *skl)
+static int skl_populate_modules(struct skl_dev *skl)
 {
 	struct skl_pipeline *p;
 	struct skl_pipe_module *m;
@@ -1393,7 +1392,7 @@ static int skl_populate_modules(struct skl *skl)
 
 			ret = skl_get_module_info(skl, mconfig);
 			if (ret &lt; 0) {
-				dev_err(skl-&gt;skl_sst-&gt;dev,
+				dev_err(skl-&gt;dev,
 					&quot;query module info failed\n&quot;);
 				return ret;
 			}
@@ -1408,7 +1407,7 @@ static int skl_populate_modules(struct skl *skl)
 static int skl_platform_soc_probe(struct snd_soc_component *component)
 {
 	struct hdac_bus *bus = dev_get_drvdata(component-&gt;dev);
-	struct skl *skl = bus_to_skl(bus);
+	struct skl_dev *skl = bus_to_skl(bus);
 	const struct skl_dsp_ops *ops;
 	int ret;
 
@@ -1434,22 +1433,22 @@ static int skl_platform_soc_probe(struct snd_soc_component *component)
 		 * Disable dynamic clock and power gating during firmware
 		 * and library download
 		 */
-		skl-&gt;skl_sst-&gt;enable_miscbdcge(component-&gt;dev, false);
-		skl-&gt;skl_sst-&gt;clock_power_gating(component-&gt;dev, false);
+		skl-&gt;enable_miscbdcge(component-&gt;dev, false);
+		skl-&gt;clock_power_gating(component-&gt;dev, false);
 
-		ret = ops-&gt;init_fw(component-&gt;dev, skl-&gt;skl_sst);
-		skl-&gt;skl_sst-&gt;enable_miscbdcge(component-&gt;dev, true);
-		skl-&gt;skl_sst-&gt;clock_power_gating(component-&gt;dev, true);
+		ret = ops-&gt;init_fw(component-&gt;dev, skl);
+		skl-&gt;enable_miscbdcge(component-&gt;dev, true);
+		skl-&gt;clock_power_gating(component-&gt;dev, true);
 		if (ret &lt; 0) {
 			dev_err(component-&gt;dev, &quot;Failed to boot first fw: %d\n&quot;, ret);
 			return ret;
 		}
 		skl_populate_modules(skl);
-		skl-&gt;skl_sst-&gt;update_d0i3c = skl_update_d0i3c;
-		skl_dsp_enable_notification(skl-&gt;skl_sst, false);
+		skl-&gt;update_d0i3c = skl_update_d0i3c;
+		skl_dsp_enable_notification(skl, false);
 
 		if (skl-&gt;cfg.astate_cfg != NULL) {
-			skl_dsp_set_astate_cfg(skl-&gt;skl_sst,
+			skl_dsp_set_astate_cfg(skl,
 					skl-&gt;cfg.astate_cfg-&gt;count,
 					skl-&gt;cfg.astate_cfg);
 		}
@@ -1463,7 +1462,7 @@ static int skl_platform_soc_probe(struct snd_soc_component *component)
 static void skl_pcm_remove(struct snd_soc_component *component)
 {
 	struct hdac_bus *bus = dev_get_drvdata(component-&gt;dev);
-	struct skl *skl = bus_to_skl(bus);
+	struct skl_dev *skl = bus_to_skl(bus);
 
 	skl_tplg_exit(component, bus);
 
@@ -1486,7 +1485,7 @@ int skl_platform_register(struct device *dev)
 	struct snd_soc_dai_driver *dais;
 	int num_dais = ARRAY_SIZE(skl_platform_dai);
 	struct hdac_bus *bus = dev_get_drvdata(dev);
-	struct skl *skl = bus_to_skl(bus);
+	struct skl_dev *skl = bus_to_skl(bus);
 
 	skl-&gt;dais = kmemdup(skl_platform_dai, sizeof(skl_platform_dai),
 			    GFP_KERNEL);
@@ -1520,7 +1519,7 @@ int skl_platform_register(struct device *dev)
 int skl_platform_unregister(struct device *dev)
 {
 	struct hdac_bus *bus = dev_get_drvdata(dev);
-	struct skl *skl = bus_to_skl(bus);
+	struct skl_dev *skl = bus_to_skl(bus);
 	struct skl_module_deferred_bind *modules, *tmp;
 
 	if (!list_empty(&amp;skl-&gt;bind_list)) {
diff --git a/sound/soc/intel/skylake/skl-ssp-clk.c b/sound/soc/intel/skylake/skl-ssp-clk.c
index 5bb6e40d4d3e..1608d21bcba1 100644
--- a/sound/soc/intel/skylake/skl-ssp-clk.c
+++ b/sound/soc/intel/skylake/skl-ssp-clk.c
@@ -101,7 +101,7 @@ static void skl_fill_clk_ipc(struct skl_clk_rate_cfg_table *rcfg, u8 clk_type)
 }
 
 /* Sends dma control IPC to turn the clock ON/OFF */
-static int skl_send_clk_dma_control(struct skl *skl,
+static int skl_send_clk_dma_control(struct skl_dev *skl,
 				struct skl_clk_rate_cfg_table *rcfg,
 				u32 vbus_id, u8 clk_type,
 				bool enable)
@@ -152,7 +152,7 @@ static int skl_send_clk_dma_control(struct skl *skl,
 	memcpy(i2s_config + sp_cfg-&gt;size, data, size);
 
 	node_id = ((SKL_DMA_I2S_LINK_INPUT_CLASS &lt;&lt; 8) | (vbus_id &lt;&lt; 4));
-	ret = skl_dsp_set_dma_control(skl-&gt;skl_sst, (u32 *)i2s_config,
+	ret = skl_dsp_set_dma_control(skl, (u32 *)i2s_config,
 					i2s_config_size, node_id);
 	kfree(i2s_config);
 
diff --git a/sound/soc/intel/skylake/skl-sst-dsp.c b/sound/soc/intel/skylake/skl-sst-dsp.c
index 36590c5b4673..225706d148d8 100644
--- a/sound/soc/intel/skylake/skl-sst-dsp.c
+++ b/sound/soc/intel/skylake/skl-sst-dsp.c
@@ -12,7 +12,7 @@
 #include &quot;../common/sst-dsp.h&quot;
 #include &quot;../common/sst-ipc.h&quot;
 #include &quot;../common/sst-dsp-priv.h&quot;
-#include &quot;skl-sst-ipc.h&quot;
+#include &quot;skl.h&quot;
 
 /* various timeout values */
 #define SKL_DSP_PU_TO		50
@@ -33,7 +33,7 @@ void skl_dsp_set_state_locked(struct sst_dsp *ctx, int state)
  */
 void skl_dsp_init_core_state(struct sst_dsp *ctx)
 {
-	struct skl_sst *skl = ctx-&gt;thread_context;
+	struct skl_dev *skl = ctx-&gt;thread_context;
 	int i;
 
 	skl-&gt;cores.state[SKL_DSP_CORE0_ID] = SKL_DSP_RUNNING;
@@ -48,7 +48,7 @@ void skl_dsp_init_core_state(struct sst_dsp *ctx)
 /* Get the mask for all enabled cores */
 unsigned int skl_dsp_get_enabled_cores(struct sst_dsp *ctx)
 {
-	struct skl_sst *skl = ctx-&gt;thread_context;
+	struct skl_dev *skl = ctx-&gt;thread_context;
 	unsigned int core_mask, en_cores_mask;
 	u32 val;
 
@@ -335,7 +335,7 @@ irqreturn_t skl_dsp_sst_interrupt(int irq, void *dev_id)
  */
 int skl_dsp_get_core(struct sst_dsp *ctx, unsigned int core_id)
 {
-	struct skl_sst *skl = ctx-&gt;thread_context;
+	struct skl_dev *skl = ctx-&gt;thread_context;
 	int ret = 0;
 
 	if (core_id &gt;= skl-&gt;cores.count) {
@@ -364,7 +364,7 @@ EXPORT_SYMBOL_GPL(skl_dsp_get_core);
 
 int skl_dsp_put_core(struct sst_dsp *ctx, unsigned int core_id)
 {
-	struct skl_sst *skl = ctx-&gt;thread_context;
+	struct skl_dev *skl = ctx-&gt;thread_context;
 	int ret = 0;
 
 	if (core_id &gt;= skl-&gt;cores.count) {
diff --git a/sound/soc/intel/skylake/skl-sst-dsp.h b/sound/soc/intel/skylake/skl-sst-dsp.h
index a80219562036..ed968f1042c7 100644
--- a/sound/soc/intel/skylake/skl-sst-dsp.h
+++ b/sound/soc/intel/skylake/skl-sst-dsp.h
@@ -15,9 +15,9 @@
 #include &quot;skl-sst-cldma.h&quot;
 
 struct sst_dsp;
-struct skl_sst;
 struct sst_dsp_device;
 struct skl_lib_info;
+struct skl_dev;
 
 /* Intel HD Audio General DSP Registers */
 #define SKL_ADSP_GEN_BASE		0x0
@@ -222,32 +222,32 @@ int skl_dsp_put_core(struct sst_dsp *ctx, unsigned int core_id);
 int skl_dsp_boot(struct sst_dsp *ctx);
 int skl_sst_dsp_init(struct device *dev, void __iomem *mmio_base, int irq,
 		const char *fw_name, struct skl_dsp_loader_ops dsp_ops,
-		struct skl_sst **dsp);
+		struct skl_dev **dsp);
 int bxt_sst_dsp_init(struct device *dev, void __iomem *mmio_base, int irq,
 		const char *fw_name, struct skl_dsp_loader_ops dsp_ops,
-		struct skl_sst **dsp);
-int skl_sst_init_fw(struct device *dev, struct skl_sst *ctx);
-int bxt_sst_init_fw(struct device *dev, struct skl_sst *ctx);
-void skl_sst_dsp_cleanup(struct device *dev, struct skl_sst *ctx);
-void bxt_sst_dsp_cleanup(struct device *dev, struct skl_sst *ctx);
+		struct skl_dev **dsp);
+int skl_sst_init_fw(struct device *dev, struct skl_dev *skl);
+int bxt_sst_init_fw(struct device *dev, struct skl_dev *skl);
+void skl_sst_dsp_cleanup(struct device *dev, struct skl_dev *skl);
+void bxt_sst_dsp_cleanup(struct device *dev, struct skl_dev *skl);
 
 int snd_skl_parse_uuids(struct sst_dsp *ctx, const struct firmware *fw,
 				unsigned int offset, int index);
-int skl_get_pvt_id(struct skl_sst *ctx, guid_t *uuid_mod, int instance_id);
-int skl_put_pvt_id(struct skl_sst *ctx, guid_t *uuid_mod, int *pvt_id);
-int skl_get_pvt_instance_id_map(struct skl_sst *ctx,
+int skl_get_pvt_id(struct skl_dev *skl, guid_t *uuid_mod, int instance_id);
+int skl_put_pvt_id(struct skl_dev *skl, guid_t *uuid_mod, int *pvt_id);
+int skl_get_pvt_instance_id_map(struct skl_dev *skl,
 				int module_id, int instance_id);
-void skl_freeup_uuid_list(struct skl_sst *ctx);
+void skl_freeup_uuid_list(struct skl_dev *skl);
 
 int skl_dsp_strip_extended_manifest(struct firmware *fw);
-void skl_dsp_enable_notification(struct skl_sst *ctx, bool enable);
+void skl_dsp_enable_notification(struct skl_dev *skl, bool enable);
 
-void skl_dsp_set_astate_cfg(struct skl_sst *ctx, u32 cnt, void *data);
+void skl_dsp_set_astate_cfg(struct skl_dev *skl, u32 cnt, void *data);
 
 int skl_sst_ctx_init(struct device *dev, int irq, const char *fw_name,
-		struct skl_dsp_loader_ops dsp_ops, struct skl_sst **dsp,
+		struct skl_dsp_loader_ops dsp_ops, struct skl_dev **dsp,
 		struct sst_dsp_device *skl_dev);
-int skl_prepare_lib_load(struct skl_sst *skl, struct skl_lib_info *linfo,
+int skl_prepare_lib_load(struct skl_dev *skl, struct skl_lib_info *linfo,
 			struct firmware *stripped_fw,
 			unsigned int hdr_offset, int index);
 void skl_release_library(struct skl_lib_info *linfo, int lib_count);
diff --git a/sound/soc/intel/skylake/skl-sst-ipc.c b/sound/soc/intel/skylake/skl-sst-ipc.c
index 2cc8f7d2d319..ee1493acc9a8 100644
--- a/sound/soc/intel/skylake/skl-sst-ipc.c
+++ b/sound/soc/intel/skylake/skl-sst-ipc.c
@@ -345,7 +345,7 @@ static struct ipc_message *skl_ipc_reply_get_msg(struct sst_generic_ipc *ipc,
 int skl_ipc_process_notification(struct sst_generic_ipc *ipc,
 		struct skl_ipc_header header)
 {
-	struct skl_sst *skl = container_of(ipc, struct skl_sst, ipc);
+	struct skl_dev *skl = container_of(ipc, struct skl_dev, ipc);
 
 	if (IPC_GLB_NOTIFY_MSG_TYPE(header.primary)) {
 		switch (IPC_GLB_NOTIFY_TYPE(header.primary)) {
@@ -436,7 +436,7 @@ void skl_ipc_process_reply(struct sst_generic_ipc *ipc,
 	struct ipc_message *msg;
 	u32 reply = header.primary &amp; IPC_GLB_REPLY_STATUS_MASK;
 	u64 *ipc_header = (u64 *)(&amp;header);
-	struct skl_sst *skl = container_of(ipc, struct skl_sst, ipc);
+	struct skl_dev *skl = container_of(ipc, struct skl_dev, ipc);
 	unsigned long flags;
 
 	spin_lock_irqsave(&amp;ipc-&gt;dsp-&gt;spinlock, flags);
@@ -488,7 +488,7 @@ void skl_ipc_process_reply(struct sst_generic_ipc *ipc,
 irqreturn_t skl_dsp_irq_thread_handler(int irq, void *context)
 {
 	struct sst_dsp *dsp = context;
-	struct skl_sst *skl = sst_dsp_get_thread_context(dsp);
+	struct skl_dev *skl = sst_dsp_get_thread_context(dsp);
 	struct sst_generic_ipc *ipc = &amp;skl-&gt;ipc;
 	struct skl_ipc_header header = {0};
 	u32 hipcie, hipct, hipcte;
@@ -595,7 +595,7 @@ bool skl_ipc_int_status(struct sst_dsp *ctx)
 			SKL_ADSP_REG_ADSPIS) &amp; SKL_ADSPIS_IPC;
 }
 
-int skl_ipc_init(struct device *dev, struct skl_sst *skl)
+int skl_ipc_init(struct device *dev, struct skl_dev *skl)
 {
 	struct sst_generic_ipc *ipc;
 	int err;
diff --git a/sound/soc/intel/skylake/skl-sst-ipc.h b/sound/soc/intel/skylake/skl-sst-ipc.h
index 9c31a48e99dd..93af08cf41d2 100644
--- a/sound/soc/intel/skylake/skl-sst-ipc.h
+++ b/sound/soc/intel/skylake/skl-sst-ipc.h
@@ -10,9 +10,9 @@
 
 #include &lt;linux/irqreturn.h&gt;
 #include &quot;../common/sst-ipc.h&quot;
+#include &quot;skl-sst-dsp.h&quot;
 
 struct sst_dsp;
-struct skl_sst;
 struct sst_generic_ipc;
 
 enum skl_ipc_pipeline_state {
@@ -67,54 +67,6 @@ struct skl_lib_info {
 	const struct firmware *fw;
 };
 
-struct skl_sst {
-	struct device *dev;
-	struct sst_dsp *dsp;
-
-	/* boot */
-	wait_queue_head_t boot_wait;
-	bool boot_complete;
-
-	/* module load */
-	wait_queue_head_t mod_load_wait;
-	bool mod_load_complete;
-	bool mod_load_status;
-
-	/* IPC messaging */
-	struct sst_generic_ipc ipc;
-
-	/* callback for miscbdge */
-	void (*enable_miscbdcge)(struct device *dev, bool enable);
-	/* Is CGCTL.MISCBDCGE disabled */
-	bool miscbdcg_disabled;
-
-	/* Populate module information */
-	struct list_head uuid_list;
-
-	/* Is firmware loaded */
-	bool fw_loaded;
-
-	/* first boot ? */
-	bool is_first_boot;
-
-	/* multi-core */
-	struct skl_dsp_cores cores;
-
-	/* library info */
-	struct skl_lib_info  lib_info[SKL_MAX_LIB];
-	int lib_count;
-
-	/* Callback to update D0i3C register */
-	void (*update_d0i3c)(struct device *dev, bool enable);
-
-	struct skl_d0i3_data d0i3;
-
-	const struct skl_dsp_ops *dsp_ops;
-
-	/* Callback to update dynamic clock and power gating registers */
-	void (*clock_power_gating)(struct device *dev, bool enable);
-};
-
 struct skl_ipc_init_instance_msg {
 	u32 module_id;
 	u32 instance_id;
@@ -204,7 +156,7 @@ void skl_ipc_int_disable(struct sst_dsp *dsp);
 
 bool skl_ipc_int_status(struct sst_dsp *dsp);
 void skl_ipc_free(struct sst_generic_ipc *ipc);
-int skl_ipc_init(struct device *dev, struct skl_sst *skl);
+int skl_ipc_init(struct device *dev, struct skl_dev *skl);
 void skl_clear_module_cnt(struct sst_dsp *ctx);
 
 void skl_ipc_process_reply(struct sst_generic_ipc *ipc,
diff --git a/sound/soc/intel/skylake/skl-sst-utils.c b/sound/soc/intel/skylake/skl-sst-utils.c
index 928c677b506c..d43cbf4a71ef 100644
--- a/sound/soc/intel/skylake/skl-sst-utils.c
+++ b/sound/soc/intel/skylake/skl-sst-utils.c
@@ -8,10 +8,9 @@
 #include &lt;linux/device.h&gt;
 #include &lt;linux/slab.h&gt;
 #include &lt;linux/uuid.h&gt;
-#include &quot;skl-sst-dsp.h&quot;
 #include &quot;../common/sst-dsp.h&quot;
 #include &quot;../common/sst-dsp-priv.h&quot;
-#include &quot;skl-sst-ipc.h&quot;
+#include &quot;skl.h&quot;
 
 #define DEFAULT_HASH_SHA256_LEN 32
 
@@ -99,12 +98,12 @@ static int skl_get_pvtid_map(struct uuid_module *module, int instance_id)
 	return -EINVAL;
 }
 
-int skl_get_pvt_instance_id_map(struct skl_sst *ctx,
+int skl_get_pvt_instance_id_map(struct skl_dev *skl,
 				int module_id, int instance_id)
 {
 	struct uuid_module *module;
 
-	list_for_each_entry(module, &amp;ctx-&gt;uuid_list, list) {
+	list_for_each_entry(module, &amp;skl-&gt;uuid_list, list) {
 		if (module-&gt;id == module_id)
 			return skl_get_pvtid_map(module, instance_id);
 	}
@@ -163,19 +162,19 @@ static inline int skl_pvtid_128(struct uuid_module *module)
 /**
  * skl_get_pvt_id: generate a private id for use as module id
  *
- * @ctx: driver context
+ * @skl: driver context
  * @uuid_mod: module's uuid
  * @instance_id: module's instance id
  *
  * This generates a 128 bit private unique id for a module TYPE so that
  * module instance is unique
  */
-int skl_get_pvt_id(struct skl_sst *ctx, guid_t *uuid_mod, int instance_id)
+int skl_get_pvt_id(struct skl_dev *skl, guid_t *uuid_mod, int instance_id)
 {
 	struct uuid_module *module;
 	int pvt_id;
 
-	list_for_each_entry(module, &amp;ctx-&gt;uuid_list, list) {
+	list_for_each_entry(module, &amp;skl-&gt;uuid_list, list) {
 		if (guid_equal(uuid_mod, &amp;module-&gt;uuid)) {
 
 			pvt_id = skl_pvtid_128(module);
@@ -194,18 +193,18 @@ EXPORT_SYMBOL_GPL(skl_get_pvt_id);
 /**
  * skl_put_pvt_id: free up the private id allocated
  *
- * @ctx: driver context
+ * @skl: driver context
  * @uuid_mod: module's uuid
  * @pvt_id: module pvt id
  *
  * This frees a 128 bit private unique id previously generated
  */
-int skl_put_pvt_id(struct skl_sst *ctx, guid_t *uuid_mod, int *pvt_id)
+int skl_put_pvt_id(struct skl_dev *skl, guid_t *uuid_mod, int *pvt_id)
 {
 	int i;
 	struct uuid_module *module;
 
-	list_for_each_entry(module, &amp;ctx-&gt;uuid_list, list) {
+	list_for_each_entry(module, &amp;skl-&gt;uuid_list, list) {
 		if (guid_equal(uuid_mod, &amp;module-&gt;uuid)) {
 
 			if (*pvt_id != 0)
@@ -234,7 +233,7 @@ int snd_skl_parse_uuids(struct sst_dsp *ctx, const struct firmware *fw,
 	struct adsp_module_entry *mod_entry;
 	int i, num_entry, size;
 	const char *buf;
-	struct skl_sst *skl = ctx-&gt;thread_context;
+	struct skl_dev *skl = ctx-&gt;thread_context;
 	struct uuid_module *module;
 	struct firmware stripped_fw;
 	unsigned int safe_file;
@@ -317,11 +316,11 @@ int snd_skl_parse_uuids(struct sst_dsp *ctx, const struct firmware *fw,
 	return ret;
 }
 
-void skl_freeup_uuid_list(struct skl_sst *ctx)
+void skl_freeup_uuid_list(struct skl_dev *skl)
 {
 	struct uuid_module *uuid, *_uuid;
 
-	list_for_each_entry_safe(uuid, _uuid, &amp;ctx-&gt;uuid_list, list) {
+	list_for_each_entry_safe(uuid, _uuid, &amp;skl-&gt;uuid_list, list) {
 		list_del(&amp;uuid-&gt;list);
 		kfree(uuid);
 	}
@@ -355,16 +354,12 @@ int skl_dsp_strip_extended_manifest(struct firmware *fw)
 }
 
 int skl_sst_ctx_init(struct device *dev, int irq, const char *fw_name,
-	struct skl_dsp_loader_ops dsp_ops, struct skl_sst **dsp,
+	struct skl_dsp_loader_ops dsp_ops, struct skl_dev **dsp,
 	struct sst_dsp_device *skl_dev)
 {
-	struct skl_sst *skl;
+	struct skl_dev *skl = *dsp;
 	struct sst_dsp *sst;
 
-	skl = devm_kzalloc(dev, sizeof(*skl), GFP_KERNEL);
-	if (skl == NULL)
-		return -ENOMEM;
-
 	skl-&gt;dev = dev;
 	skl_dev-&gt;thread_context = skl;
 	INIT_LIST_HEAD(&amp;skl-&gt;uuid_list);
@@ -381,13 +376,11 @@ int skl_sst_ctx_init(struct device *dev, int irq, const char *fw_name,
 	INIT_LIST_HEAD(&amp;sst-&gt;module_list);
 
 	skl-&gt;is_first_boot = true;
-	if (dsp)
-		*dsp = skl;
 
 	return 0;
 }
 
-int skl_prepare_lib_load(struct skl_sst *skl, struct skl_lib_info *linfo,
+int skl_prepare_lib_load(struct skl_dev *skl, struct skl_lib_info *linfo,
 		struct firmware *stripped_fw,
 		unsigned int hdr_offset, int index)
 {
diff --git a/sound/soc/intel/skylake/skl-sst.c b/sound/soc/intel/skylake/skl-sst.c
index 70c3a604c381..8af7546def1f 100644
--- a/sound/soc/intel/skylake/skl-sst.c
+++ b/sound/soc/intel/skylake/skl-sst.c
@@ -16,7 +16,7 @@
 #include &quot;../common/sst-dsp.h&quot;
 #include &quot;../common/sst-dsp-priv.h&quot;
 #include &quot;../common/sst-ipc.h&quot;
-#include &quot;skl-sst-ipc.h&quot;
+#include &quot;skl.h&quot;
 
 #define SKL_BASEFW_TIMEOUT	300
 #define SKL_INIT_TIMEOUT	1000
@@ -66,7 +66,7 @@ static int skl_transfer_firmware(struct sst_dsp *ctx,
 static int skl_load_base_firmware(struct sst_dsp *ctx)
 {
 	int ret = 0, i;
-	struct skl_sst *skl = ctx-&gt;thread_context;
+	struct skl_dev *skl = ctx-&gt;thread_context;
 	struct firmware stripped_fw;
 	u32 reg;
 
@@ -161,7 +161,7 @@ static int skl_set_dsp_D0(struct sst_dsp *ctx, unsigned int core_id)
 {
 	int ret;
 	struct skl_ipc_dxstate_info dx;
-	struct skl_sst *skl = ctx-&gt;thread_context;
+	struct skl_dev *skl = ctx-&gt;thread_context;
 	unsigned int core_mask = SKL_DSP_CORE_MASK(core_id);
 
 	/* If core0 is being turned on, we need to load the FW */
@@ -215,7 +215,7 @@ static int skl_set_dsp_D3(struct sst_dsp *ctx, unsigned int core_id)
 {
 	int ret;
 	struct skl_ipc_dxstate_info dx;
-	struct skl_sst *skl = ctx-&gt;thread_context;
+	struct skl_dev *skl = ctx-&gt;thread_context;
 	unsigned int core_mask = SKL_DSP_CORE_MASK(core_id);
 
 	dx.core_mask = core_mask;
@@ -332,7 +332,7 @@ static int skl_transfer_module(struct sst_dsp *ctx, const void *data,
 			u32 size, u16 mod_id, u8 table_id, bool is_module)
 {
 	int ret, bytes_left, curr_pos;
-	struct skl_sst *skl = ctx-&gt;thread_context;
+	struct skl_dev *skl = ctx-&gt;thread_context;
 	skl-&gt;mod_load_complete = false;
 
 	bytes_left = ctx-&gt;cl_dev.ops.cl_copy_to_dmabuf(ctx, data, size, false);
@@ -384,7 +384,7 @@ static int skl_transfer_module(struct sst_dsp *ctx, const void *data,
 static int
 skl_load_library(struct sst_dsp *ctx, struct skl_lib_info *linfo, int lib_count)
 {
-	struct skl_sst *skl = ctx-&gt;thread_context;
+	struct skl_dev *skl = ctx-&gt;thread_context;
 	struct firmware stripped_fw;
 	int ret, i;
 
@@ -443,7 +443,7 @@ static int skl_load_module(struct sst_dsp *ctx, u16 mod_id, u8 *guid)
 static int skl_unload_module(struct sst_dsp *ctx, u16 mod_id)
 {
 	int usage_cnt;
-	struct skl_sst *skl = ctx-&gt;thread_context;
+	struct skl_dev *skl = ctx-&gt;thread_context;
 	int ret = 0;
 
 	usage_cnt = skl_put_module(ctx, mod_id);
@@ -518,9 +518,10 @@ static struct sst_dsp_device skl_dev = {
 };
 
 int skl_sst_dsp_init(struct device *dev, void __iomem *mmio_base, int irq,
-		const char *fw_name, struct skl_dsp_loader_ops dsp_ops, struct skl_sst **dsp)
+		const char *fw_name, struct skl_dsp_loader_ops dsp_ops,
+		struct skl_dev **dsp)
 {
-	struct skl_sst *skl;
+	struct skl_dev *skl;
 	struct sst_dsp *sst;
 	int ret;
 
@@ -554,10 +555,10 @@ int skl_sst_dsp_init(struct device *dev, void __iomem *mmio_base, int irq,
 }
 EXPORT_SYMBOL_GPL(skl_sst_dsp_init);
 
-int skl_sst_init_fw(struct device *dev, struct skl_sst *ctx)
+int skl_sst_init_fw(struct device *dev, struct skl_dev *skl)
 {
 	int ret;
-	struct sst_dsp *sst = ctx-&gt;dsp;
+	struct sst_dsp *sst = skl-&gt;dsp;
 
 	ret = sst-&gt;fw_ops.load_fw(sst);
 	if (ret &lt; 0) {
@@ -567,32 +568,32 @@ int skl_sst_init_fw(struct device *dev, struct skl_sst *ctx)
 
 	skl_dsp_init_core_state(sst);
 
-	if (ctx-&gt;lib_count &gt; 1) {
-		ret = sst-&gt;fw_ops.load_library(sst, ctx-&gt;lib_info,
-						ctx-&gt;lib_count);
+	if (skl-&gt;lib_count &gt; 1) {
+		ret = sst-&gt;fw_ops.load_library(sst, skl-&gt;lib_info,
+						skl-&gt;lib_count);
 		if (ret &lt; 0) {
 			dev_err(dev, &quot;Load Library failed : %x\n&quot;, ret);
 			return ret;
 		}
 	}
-	ctx-&gt;is_first_boot = false;
+	skl-&gt;is_first_boot = false;
 
 	return 0;
 }
 EXPORT_SYMBOL_GPL(skl_sst_init_fw);
 
-void skl_sst_dsp_cleanup(struct device *dev, struct skl_sst *ctx)
+void skl_sst_dsp_cleanup(struct device *dev, struct skl_dev *skl)
 {
 
-	if (ctx-&gt;dsp-&gt;fw)
-		release_firmware(ctx-&gt;dsp-&gt;fw);
-	skl_clear_module_table(ctx-&gt;dsp);
-	skl_freeup_uuid_list(ctx);
-	skl_ipc_free(&amp;ctx-&gt;ipc);
-	ctx-&gt;dsp-&gt;ops-&gt;free(ctx-&gt;dsp);
-	if (ctx-&gt;boot_complete) {
-		ctx-&gt;dsp-&gt;cl_dev.ops.cl_cleanup_controller(ctx-&gt;dsp);
-		skl_cldma_int_disable(ctx-&gt;dsp);
+	if (skl-&gt;dsp-&gt;fw)
+		release_firmware(skl-&gt;dsp-&gt;fw);
+	skl_clear_module_table(skl-&gt;dsp);
+	skl_freeup_uuid_list(skl);
+	skl_ipc_free(&amp;skl-&gt;ipc);
+	skl-&gt;dsp-&gt;ops-&gt;free(skl-&gt;dsp);
+	if (skl-&gt;boot_complete) {
+		skl-&gt;dsp-&gt;cl_dev.ops.cl_cleanup_controller(skl-&gt;dsp);
+		skl_cldma_int_disable(skl-&gt;dsp);
 	}
 }
 EXPORT_SYMBOL_GPL(skl_sst_dsp_cleanup);
diff --git a/sound/soc/intel/skylake/skl-topology.c b/sound/soc/intel/skylake/skl-topology.c
index 6241e35213af..abf860109607 100644
--- a/sound/soc/intel/skylake/skl-topology.c
+++ b/sound/soc/intel/skylake/skl-topology.c
@@ -45,9 +45,9 @@ static const int mic_quatro_list[][SKL_CH_QUATRO] = {
 #define CHECK_HW_PARAMS(ch, freq, bps, prm_ch, prm_freq, prm_bps) \
 	((ch == prm_ch) &amp;&amp; (bps == prm_bps) &amp;&amp; (freq == prm_freq))
 
-void skl_tplg_d0i3_get(struct skl *skl, enum d0i3_capability caps)
+void skl_tplg_d0i3_get(struct skl_dev *skl, enum d0i3_capability caps)
 {
-	struct skl_d0i3_data *d0i3 =  &amp;skl-&gt;skl_sst-&gt;d0i3;
+	struct skl_d0i3_data *d0i3 =  &amp;skl-&gt;d0i3;
 
 	switch (caps) {
 	case SKL_D0I3_NONE:
@@ -64,9 +64,9 @@ void skl_tplg_d0i3_get(struct skl *skl, enum d0i3_capability caps)
 	}
 }
 
-void skl_tplg_d0i3_put(struct skl *skl, enum d0i3_capability caps)
+void skl_tplg_d0i3_put(struct skl_dev *skl, enum d0i3_capability caps)
 {
-	struct skl_d0i3_data *d0i3 =  &amp;skl-&gt;skl_sst-&gt;d0i3;
+	struct skl_d0i3_data *d0i3 =  &amp;skl-&gt;d0i3;
 
 	switch (caps) {
 	case SKL_D0I3_NONE:
@@ -113,18 +113,16 @@ static int is_skl_dsp_widget_type(struct snd_soc_dapm_widget *w,
  * Each pipelines needs memory to be allocated. Check if we have free memory
  * from available pool.
  */
-static bool skl_is_pipe_mem_avail(struct skl *skl,
+static bool skl_is_pipe_mem_avail(struct skl_dev *skl,
 				struct skl_module_cfg *mconfig)
 {
-	struct skl_sst *ctx = skl-&gt;skl_sst;
-
 	if (skl-&gt;resource.mem + mconfig-&gt;pipe-&gt;memory_pages &gt;
 				skl-&gt;resource.max_mem) {
-		dev_err(ctx-&gt;dev,
+		dev_err(skl-&gt;dev,
 				&quot;%s: module_id %d instance %d\n&quot;, __func__,
 				mconfig-&gt;id.module_id,
 				mconfig-&gt;id.instance_id);
-		dev_err(ctx-&gt;dev,
+		dev_err(skl-&gt;dev,
 				&quot;exceeds ppl memory available %d mem %d\n&quot;,
 				skl-&gt;resource.max_mem, skl-&gt;resource.mem);
 		return false;
@@ -138,7 +136,7 @@ static bool skl_is_pipe_mem_avail(struct skl *skl,
  * Note: DSP does actual memory management we only keep track for complete
  * pool
  */
-static void skl_tplg_alloc_pipe_mem(struct skl *skl,
+static void skl_tplg_alloc_pipe_mem(struct skl_dev *skl,
 				struct skl_module_cfg *mconfig)
 {
 	skl-&gt;resource.mem += mconfig-&gt;pipe-&gt;memory_pages;
@@ -152,18 +150,17 @@ static void skl_tplg_alloc_pipe_mem(struct skl *skl,
  * pipe.
  */
 
-static bool skl_is_pipe_mcps_avail(struct skl *skl,
+static bool skl_is_pipe_mcps_avail(struct skl_dev *skl,
 				struct skl_module_cfg *mconfig)
 {
-	struct skl_sst *ctx = skl-&gt;skl_sst;
 	u8 res_idx = mconfig-&gt;res_idx;
 	struct skl_module_res *res = &amp;mconfig-&gt;module-&gt;resources[res_idx];
 
 	if (skl-&gt;resource.mcps + res-&gt;cps &gt; skl-&gt;resource.max_mcps) {
-		dev_err(ctx-&gt;dev,
+		dev_err(skl-&gt;dev,
 			&quot;%s: module_id %d instance %d\n&quot;, __func__,
 			mconfig-&gt;id.module_id, mconfig-&gt;id.instance_id);
-		dev_err(ctx-&gt;dev,
+		dev_err(skl-&gt;dev,
 			&quot;exceeds ppl mcps available %d &gt; mem %d\n&quot;,
 			skl-&gt;resource.max_mcps, skl-&gt;resource.mcps);
 		return false;
@@ -172,7 +169,7 @@ static bool skl_is_pipe_mcps_avail(struct skl *skl,
 	}
 }
 
-static void skl_tplg_alloc_pipe_mcps(struct skl *skl,
+static void skl_tplg_alloc_pipe_mcps(struct skl_dev *skl,
 				struct skl_module_cfg *mconfig)
 {
 	u8 res_idx = mconfig-&gt;res_idx;
@@ -185,7 +182,7 @@ static void skl_tplg_alloc_pipe_mcps(struct skl *skl,
  * Free the mcps when tearing down
  */
 static void
-skl_tplg_free_pipe_mcps(struct skl *skl, struct skl_module_cfg *mconfig)
+skl_tplg_free_pipe_mcps(struct skl_dev *skl, struct skl_module_cfg *mconfig)
 {
 	u8 res_idx = mconfig-&gt;res_idx;
 	struct skl_module_res *res = &amp;mconfig-&gt;module-&gt;resources[res_idx];
@@ -197,30 +194,29 @@ skl_tplg_free_pipe_mcps(struct skl *skl, struct skl_module_cfg *mconfig)
  * Free the memory when tearing down
  */
 static void
-skl_tplg_free_pipe_mem(struct skl *skl, struct skl_module_cfg *mconfig)
+skl_tplg_free_pipe_mem(struct skl_dev *skl, struct skl_module_cfg *mconfig)
 {
 	skl-&gt;resource.mem -= mconfig-&gt;pipe-&gt;memory_pages;
 }
 
 
-static void skl_dump_mconfig(struct skl_sst *ctx,
-					struct skl_module_cfg *mcfg)
+static void skl_dump_mconfig(struct skl_dev *skl, struct skl_module_cfg *mcfg)
 {
 	struct skl_module_iface *iface = &amp;mcfg-&gt;module-&gt;formats[0];
 
-	dev_dbg(ctx-&gt;dev, &quot;Dumping config\n&quot;);
-	dev_dbg(ctx-&gt;dev, &quot;Input Format:\n&quot;);
-	dev_dbg(ctx-&gt;dev, &quot;channels = %d\n&quot;, iface-&gt;inputs[0].fmt.channels);
-	dev_dbg(ctx-&gt;dev, &quot;s_freq = %d\n&quot;, iface-&gt;inputs[0].fmt.s_freq);
-	dev_dbg(ctx-&gt;dev, &quot;ch_cfg = %d\n&quot;, iface-&gt;inputs[0].fmt.ch_cfg);
-	dev_dbg(ctx-&gt;dev, &quot;valid bit depth = %d\n&quot;,
+	dev_dbg(skl-&gt;dev, &quot;Dumping config\n&quot;);
+	dev_dbg(skl-&gt;dev, &quot;Input Format:\n&quot;);
+	dev_dbg(skl-&gt;dev, &quot;channels = %d\n&quot;, iface-&gt;inputs[0].fmt.channels);
+	dev_dbg(skl-&gt;dev, &quot;s_freq = %d\n&quot;, iface-&gt;inputs[0].fmt.s_freq);
+	dev_dbg(skl-&gt;dev, &quot;ch_cfg = %d\n&quot;, iface-&gt;inputs[0].fmt.ch_cfg);
+	dev_dbg(skl-&gt;dev, &quot;valid bit depth = %d\n&quot;,
 				iface-&gt;inputs[0].fmt.valid_bit_depth);
-	dev_dbg(ctx-&gt;dev, &quot;Output Format:\n&quot;);
-	dev_dbg(ctx-&gt;dev, &quot;channels = %d\n&quot;, iface-&gt;outputs[0].fmt.channels);
-	dev_dbg(ctx-&gt;dev, &quot;s_freq = %d\n&quot;, iface-&gt;outputs[0].fmt.s_freq);
-	dev_dbg(ctx-&gt;dev, &quot;valid bit depth = %d\n&quot;,
+	dev_dbg(skl-&gt;dev, &quot;Output Format:\n&quot;);
+	dev_dbg(skl-&gt;dev, &quot;channels = %d\n&quot;, iface-&gt;outputs[0].fmt.channels);
+	dev_dbg(skl-&gt;dev, &quot;s_freq = %d\n&quot;, iface-&gt;outputs[0].fmt.s_freq);
+	dev_dbg(skl-&gt;dev, &quot;valid bit depth = %d\n&quot;,
 				iface-&gt;outputs[0].fmt.valid_bit_depth);
-	dev_dbg(ctx-&gt;dev, &quot;ch_cfg = %d\n&quot;, iface-&gt;outputs[0].fmt.ch_cfg);
+	dev_dbg(skl-&gt;dev, &quot;ch_cfg = %d\n&quot;, iface-&gt;outputs[0].fmt.ch_cfg);
 }
 
 static void skl_tplg_update_chmap(struct skl_module_fmt *fmt, int chs)
@@ -322,7 +318,7 @@ static void skl_tplg_update_params_fixup(struct skl_module_cfg *m_cfg,
  * params, so once we have calculate params, we need buffer calculation as
  * well.
  */
-static void skl_tplg_update_buffer_size(struct skl_sst *ctx,
+static void skl_tplg_update_buffer_size(struct skl_dev *skl,
 				struct skl_module_cfg *mcfg)
 {
 	int multiplier = 1;
@@ -374,13 +370,12 @@ static u8 skl_tplg_be_dev_type(int dev_type)
 }
 
 static int skl_tplg_update_be_blob(struct snd_soc_dapm_widget *w,
-						struct skl_sst *ctx)
+						struct skl_dev *skl)
 {
 	struct skl_module_cfg *m_cfg = w-&gt;priv;
 	int link_type, dir;
 	u32 ch, s_freq, s_fmt;
 	struct nhlt_specific_cfg *cfg;
-	struct skl *skl = get_skl_ctx(ctx-&gt;dev);
 	u8 dev_type = skl_tplg_be_dev_type(m_cfg-&gt;dev_type);
 	int fmt_idx = m_cfg-&gt;fmt_idx;
 	struct skl_module_iface *m_iface = &amp;m_cfg-&gt;module-&gt;formats[fmt_idx];
@@ -389,7 +384,7 @@ static int skl_tplg_update_be_blob(struct snd_soc_dapm_widget *w,
 	if (m_cfg-&gt;formats_config.caps_size &gt; 0)
 		return 0;
 
-	dev_dbg(ctx-&gt;dev, &quot;Applying default cfg blob\n&quot;);
+	dev_dbg(skl-&gt;dev, &quot;Applying default cfg blob\n&quot;);
 	switch (m_cfg-&gt;dev_type) {
 	case SKL_DEVICE_DMIC:
 		link_type = NHLT_LINK_DMIC;
@@ -425,9 +420,9 @@ static int skl_tplg_update_be_blob(struct snd_soc_dapm_widget *w,
 		m_cfg-&gt;formats_config.caps_size = cfg-&gt;size;
 		m_cfg-&gt;formats_config.caps = (u32 *) &amp;cfg-&gt;caps;
 	} else {
-		dev_err(ctx-&gt;dev, &quot;Blob NULL for id %x type %d dirn %d\n&quot;,
+		dev_err(skl-&gt;dev, &quot;Blob NULL for id %x type %d dirn %d\n&quot;,
 					m_cfg-&gt;vbus_id, link_type, dir);
-		dev_err(ctx-&gt;dev, &quot;PCM: ch %d, freq %d, fmt %d\n&quot;,
+		dev_err(skl-&gt;dev, &quot;PCM: ch %d, freq %d, fmt %d\n&quot;,
 					ch, s_freq, s_fmt);
 		return -EIO;
 	}
@@ -436,7 +431,7 @@ static int skl_tplg_update_be_blob(struct snd_soc_dapm_widget *w,
 }
 
 static void skl_tplg_update_module_params(struct snd_soc_dapm_widget *w,
-							struct skl_sst *ctx)
+							struct skl_dev *skl)
 {
 	struct skl_module_cfg *m_cfg = w-&gt;priv;
 	struct skl_pipe_params *params = m_cfg-&gt;pipe-&gt;p_params;
@@ -446,10 +441,10 @@ static void skl_tplg_update_module_params(struct snd_soc_dapm_widget *w,
 	if (!m_cfg-&gt;params_fixup)
 		return;
 
-	dev_dbg(ctx-&gt;dev, &quot;Mconfig for widget=%s BEFORE updation\n&quot;,
+	dev_dbg(skl-&gt;dev, &quot;Mconfig for widget=%s BEFORE updation\n&quot;,
 				w-&gt;name);
 
-	skl_dump_mconfig(ctx, m_cfg);
+	skl_dump_mconfig(skl, m_cfg);
 
 	if (p_conn_type == SKL_PIPE_CONN_TYPE_FE)
 		is_fe = true;
@@ -457,12 +452,12 @@ static void skl_tplg_update_module_params(struct snd_soc_dapm_widget *w,
 		is_fe = false;
 
 	skl_tplg_update_params_fixup(m_cfg, params, is_fe);
-	skl_tplg_update_buffer_size(ctx, m_cfg);
+	skl_tplg_update_buffer_size(skl, m_cfg);
 
-	dev_dbg(ctx-&gt;dev, &quot;Mconfig for widget=%s AFTER updation\n&quot;,
+	dev_dbg(skl-&gt;dev, &quot;Mconfig for widget=%s AFTER updation\n&quot;,
 				w-&gt;name);
 
-	skl_dump_mconfig(ctx, m_cfg);
+	skl_dump_mconfig(skl, m_cfg);
 }
 
 /*
@@ -471,7 +466,7 @@ static void skl_tplg_update_module_params(struct snd_soc_dapm_widget *w,
  * set module params will be done after module is initialised.
  */
 static int skl_tplg_set_module_params(struct snd_soc_dapm_widget *w,
-						struct skl_sst *ctx)
+						struct skl_dev *skl)
 {
 	int i, ret;
 	struct skl_module_cfg *mconfig = w-&gt;priv;
@@ -483,7 +478,7 @@ static int skl_tplg_set_module_params(struct snd_soc_dapm_widget *w,
 	if (mconfig-&gt;formats_config.caps_size &gt; 0 &amp;&amp;
 		mconfig-&gt;formats_config.set_params == SKL_PARAM_SET) {
 		sp_cfg = &amp;mconfig-&gt;formats_config;
-		ret = skl_set_module_params(ctx, sp_cfg-&gt;caps,
+		ret = skl_set_module_params(skl, sp_cfg-&gt;caps,
 					sp_cfg-&gt;caps_size,
 					sp_cfg-&gt;param_id, mconfig);
 		if (ret &lt; 0)
@@ -497,7 +492,7 @@ static int skl_tplg_set_module_params(struct snd_soc_dapm_widget *w,
 			bc = (struct skl_algo_data *)sb-&gt;dobj.private;
 
 			if (bc-&gt;set_params == SKL_PARAM_SET) {
-				ret = skl_set_module_params(ctx,
+				ret = skl_set_module_params(skl,
 						(u32 *)bc-&gt;params, bc-&gt;size,
 						bc-&gt;param_id, mconfig);
 				if (ret &lt; 0)
@@ -542,15 +537,15 @@ static int skl_tplg_set_module_init_data(struct snd_soc_dapm_widget *w)
 	return 0;
 }
 
-static int skl_tplg_module_prepare(struct skl_sst *ctx, struct skl_pipe *pipe,
+static int skl_tplg_module_prepare(struct skl_dev *skl, struct skl_pipe *pipe,
 		struct snd_soc_dapm_widget *w, struct skl_module_cfg *mcfg)
 {
 	switch (mcfg-&gt;dev_type) {
 	case SKL_DEVICE_HDAHOST:
-		return skl_pcm_host_dma_prepare(ctx-&gt;dev, pipe-&gt;p_params);
+		return skl_pcm_host_dma_prepare(skl-&gt;dev, pipe-&gt;p_params);
 
 	case SKL_DEVICE_HDALINK:
-		return skl_pcm_link_dma_prepare(ctx-&gt;dev, pipe-&gt;p_params);
+		return skl_pcm_link_dma_prepare(skl-&gt;dev, pipe-&gt;p_params);
 	}
 
 	return 0;
@@ -562,12 +557,11 @@ static int skl_tplg_module_prepare(struct skl_sst *ctx, struct skl_pipe *pipe,
  * skl_init_module() routine, so invoke that for all modules in a pipeline
  */
 static int
-skl_tplg_init_pipe_modules(struct skl *skl, struct skl_pipe *pipe)
+skl_tplg_init_pipe_modules(struct skl_dev *skl, struct skl_pipe *pipe)
 {
 	struct skl_pipe_module *w_module;
 	struct snd_soc_dapm_widget *w;
 	struct skl_module_cfg *mconfig;
-	struct skl_sst *ctx = skl-&gt;skl_sst;
 	u8 cfg_idx;
 	int ret = 0;
 
@@ -578,7 +572,7 @@ skl_tplg_init_pipe_modules(struct skl *skl, struct skl_pipe *pipe)
 
 		/* check if module ids are populated */
 		if (mconfig-&gt;id.module_id &lt; 0) {
-			dev_err(skl-&gt;skl_sst-&gt;dev,
+			dev_err(skl-&gt;dev,
 					&quot;module %pUL id not populated\n&quot;,
 					(guid_t *)mconfig-&gt;guid);
 			return -EIO;
@@ -592,8 +586,8 @@ skl_tplg_init_pipe_modules(struct skl *skl, struct skl_pipe *pipe)
 		if (!skl_is_pipe_mcps_avail(skl, mconfig))
 			return -ENOMEM;
 
-		if (mconfig-&gt;module-&gt;loadable &amp;&amp; ctx-&gt;dsp-&gt;fw_ops.load_mod) {
-			ret = ctx-&gt;dsp-&gt;fw_ops.load_mod(ctx-&gt;dsp,
+		if (mconfig-&gt;module-&gt;loadable &amp;&amp; skl-&gt;dsp-&gt;fw_ops.load_mod) {
+			ret = skl-&gt;dsp-&gt;fw_ops.load_mod(skl-&gt;dsp,
 				mconfig-&gt;id.module_id, mconfig-&gt;guid);
 			if (ret &lt; 0)
 				return ret;
@@ -602,50 +596,50 @@ skl_tplg_init_pipe_modules(struct skl *skl, struct skl_pipe *pipe)
 		}
 
 		/* prepare the DMA if the module is gateway cpr */
-		ret = skl_tplg_module_prepare(ctx, pipe, w, mconfig);
+		ret = skl_tplg_module_prepare(skl, pipe, w, mconfig);
 		if (ret &lt; 0)
 			return ret;
 
 		/* update blob if blob is null for be with default value */
-		skl_tplg_update_be_blob(w, ctx);
+		skl_tplg_update_be_blob(w, skl);
 
 		/*
 		 * apply fix/conversion to module params based on
 		 * FE/BE params
 		 */
-		skl_tplg_update_module_params(w, ctx);
+		skl_tplg_update_module_params(w, skl);
 		uuid_mod = (guid_t *)mconfig-&gt;guid;
-		mconfig-&gt;id.pvt_id = skl_get_pvt_id(ctx, uuid_mod,
+		mconfig-&gt;id.pvt_id = skl_get_pvt_id(skl, uuid_mod,
 						mconfig-&gt;id.instance_id);
 		if (mconfig-&gt;id.pvt_id &lt; 0)
 			return ret;
 		skl_tplg_set_module_init_data(w);
 
-		ret = skl_dsp_get_core(ctx-&gt;dsp, mconfig-&gt;core_id);
+		ret = skl_dsp_get_core(skl-&gt;dsp, mconfig-&gt;core_id);
 		if (ret &lt; 0) {
-			dev_err(ctx-&gt;dev, &quot;Failed to wake up core %d ret=%d\n&quot;,
+			dev_err(skl-&gt;dev, &quot;Failed to wake up core %d ret=%d\n&quot;,
 						mconfig-&gt;core_id, ret);
 			return ret;
 		}
 
-		ret = skl_init_module(ctx, mconfig);
+		ret = skl_init_module(skl, mconfig);
 		if (ret &lt; 0) {
-			skl_put_pvt_id(ctx, uuid_mod, &amp;mconfig-&gt;id.pvt_id);
+			skl_put_pvt_id(skl, uuid_mod, &amp;mconfig-&gt;id.pvt_id);
 			goto err;
 		}
 		skl_tplg_alloc_pipe_mcps(skl, mconfig);
-		ret = skl_tplg_set_module_params(w, ctx);
+		ret = skl_tplg_set_module_params(w, skl);
 		if (ret &lt; 0)
 			goto err;
 	}
 
 	return 0;
 err:
-	skl_dsp_put_core(ctx-&gt;dsp, mconfig-&gt;core_id);
+	skl_dsp_put_core(skl-&gt;dsp, mconfig-&gt;core_id);
 	return ret;
 }
 
-static int skl_tplg_unload_pipe_modules(struct skl_sst *ctx,
+static int skl_tplg_unload_pipe_modules(struct skl_dev *skl,
 	 struct skl_pipe *pipe)
 {
 	int ret = 0;
@@ -657,19 +651,19 @@ static int skl_tplg_unload_pipe_modules(struct skl_sst *ctx,
 		mconfig  = w_module-&gt;w-&gt;priv;
 		uuid_mod = (guid_t *)mconfig-&gt;guid;
 
-		if (mconfig-&gt;module-&gt;loadable &amp;&amp; ctx-&gt;dsp-&gt;fw_ops.unload_mod &amp;&amp;
+		if (mconfig-&gt;module-&gt;loadable &amp;&amp; skl-&gt;dsp-&gt;fw_ops.unload_mod &amp;&amp;
 			mconfig-&gt;m_state &gt; SKL_MODULE_UNINIT) {
-			ret = ctx-&gt;dsp-&gt;fw_ops.unload_mod(ctx-&gt;dsp,
+			ret = skl-&gt;dsp-&gt;fw_ops.unload_mod(skl-&gt;dsp,
 						mconfig-&gt;id.module_id);
 			if (ret &lt; 0)
 				return -EIO;
 		}
-		skl_put_pvt_id(ctx, uuid_mod, &amp;mconfig-&gt;id.pvt_id);
+		skl_put_pvt_id(skl, uuid_mod, &amp;mconfig-&gt;id.pvt_id);
 
-		ret = skl_dsp_put_core(ctx-&gt;dsp, mconfig-&gt;core_id);
+		ret = skl_dsp_put_core(skl-&gt;dsp, mconfig-&gt;core_id);
 		if (ret &lt; 0) {
 			/* don't return; continue with other modules */
-			dev_err(ctx-&gt;dev, &quot;Failed to sleep core %d ret=%d\n&quot;,
+			dev_err(skl-&gt;dev, &quot;Failed to sleep core %d ret=%d\n&quot;,
 				mconfig-&gt;core_id, ret);
 		}
 	}
@@ -686,9 +680,8 @@ static int skl_tplg_unload_pipe_modules(struct skl_sst *ctx,
  * 0th configuratation by default for such pipes.
  */
 static int
-skl_tplg_get_pipe_config(struct skl *skl, struct skl_module_cfg *mconfig)
+skl_tplg_get_pipe_config(struct skl_dev *skl, struct skl_module_cfg *mconfig)
 {
-	struct skl_sst *ctx = skl-&gt;skl_sst;
 	struct skl_pipe *pipe = mconfig-&gt;pipe;
 	struct skl_pipe_params *params = pipe-&gt;p_params;
 	struct skl_path_config *pconfig = &amp;pipe-&gt;configs[0];
@@ -702,7 +695,7 @@ skl_tplg_get_pipe_config(struct skl *skl, struct skl_module_cfg *mconfig)
 	}
 
 	if (pipe-&gt;conn_type == SKL_PIPE_CONN_TYPE_NONE) {
-		dev_dbg(ctx-&gt;dev, &quot;No conn_type detected, take 0th config\n&quot;);
+		dev_dbg(skl-&gt;dev, &quot;No conn_type detected, take 0th config\n&quot;);
 		pipe-&gt;cur_config_idx = 0;
 		pipe-&gt;memory_pages = pconfig-&gt;mem_pages;
 
@@ -726,13 +719,13 @@ skl_tplg_get_pipe_config(struct skl *skl, struct skl_module_cfg *mconfig)
 				    fmt-&gt;channels, fmt-&gt;freq, fmt-&gt;bps)) {
 			pipe-&gt;cur_config_idx = i;
 			pipe-&gt;memory_pages = pconfig-&gt;mem_pages;
-			dev_dbg(ctx-&gt;dev, &quot;Using pipe config: %d\n&quot;, i);
+			dev_dbg(skl-&gt;dev, &quot;Using pipe config: %d\n&quot;, i);
 
 			return 0;
 		}
 	}
 
-	dev_err(ctx-&gt;dev, &quot;Invalid pipe config: %d %d %d for pipe: %d\n&quot;,
+	dev_err(skl-&gt;dev, &quot;Invalid pipe config: %d %d %d for pipe: %d\n&quot;,
 		params-&gt;ch, params-&gt;s_freq, params-&gt;s_fmt, pipe-&gt;ppl_id);
 	return -EINVAL;
 }
@@ -746,14 +739,13 @@ skl_tplg_get_pipe_config(struct skl *skl, struct skl_module_cfg *mconfig)
  *   - finally bind all modules together
  */
 static int skl_tplg_mixer_dapm_pre_pmu_event(struct snd_soc_dapm_widget *w,
-							struct skl *skl)
+							struct skl_dev *skl)
 {
 	int ret;
 	struct skl_module_cfg *mconfig = w-&gt;priv;
 	struct skl_pipe_module *w_module;
 	struct skl_pipe *s_pipe = mconfig-&gt;pipe;
 	struct skl_module_cfg *src_module = NULL, *dst_module, *module;
-	struct skl_sst *ctx = skl-&gt;skl_sst;
 	struct skl_module_deferred_bind *modules;
 
 	ret = skl_tplg_get_pipe_config(skl, mconfig);
@@ -771,7 +763,7 @@ static int skl_tplg_mixer_dapm_pre_pmu_event(struct snd_soc_dapm_widget *w,
 	 * Create a list of modules for pipe.
 	 * This list contains modules from source to sink
 	 */
-	ret = skl_create_pipeline(ctx, mconfig-&gt;pipe);
+	ret = skl_create_pipeline(skl, mconfig-&gt;pipe);
 	if (ret &lt; 0)
 		return ret;
 
@@ -792,7 +784,7 @@ static int skl_tplg_mixer_dapm_pre_pmu_event(struct snd_soc_dapm_widget *w,
 			continue;
 		}
 
-		ret = skl_bind_modules(ctx, src_module, dst_module);
+		ret = skl_bind_modules(skl, src_module, dst_module);
 		if (ret &lt; 0)
 			return ret;
 
@@ -810,7 +802,7 @@ static int skl_tplg_mixer_dapm_pre_pmu_event(struct snd_soc_dapm_widget *w,
 		list_for_each_entry(modules, &amp;skl-&gt;bind_list, node) {
 			module = w_module-&gt;w-&gt;priv;
 			if (modules-&gt;dst == module)
-				skl_bind_modules(ctx, modules-&gt;src,
+				skl_bind_modules(skl, modules-&gt;src,
 							modules-&gt;dst);
 		}
 	}
@@ -818,7 +810,7 @@ static int skl_tplg_mixer_dapm_pre_pmu_event(struct snd_soc_dapm_widget *w,
 	return 0;
 }
 
-static int skl_fill_sink_instance_id(struct skl_sst *ctx, u32 *params,
+static int skl_fill_sink_instance_id(struct skl_dev *skl, u32 *params,
 				int size, struct skl_module_cfg *mcfg)
 {
 	int i, pvt_id;
@@ -829,7 +821,7 @@ static int skl_fill_sink_instance_id(struct skl_sst *ctx, u32 *params,
 		struct skl_mod_inst_map *inst = kpb_params-&gt;u.map;
 
 		for (i = 0; i &lt; kpb_params-&gt;num_modules; i++) {
-			pvt_id = skl_get_pvt_instance_id_map(ctx, inst-&gt;mod_id,
+			pvt_id = skl_get_pvt_instance_id_map(skl, inst-&gt;mod_id,
 								inst-&gt;inst_id);
 			if (pvt_id &lt; 0)
 				return -EINVAL;
@@ -849,7 +841,7 @@ static int skl_fill_sink_instance_id(struct skl_sst *ctx, u32 *params,
  * send params after binding
  */
 static int skl_tplg_set_module_bind_params(struct snd_soc_dapm_widget *w,
-			struct skl_module_cfg *mcfg, struct skl_sst *ctx)
+			struct skl_module_cfg *mcfg, struct skl_dev *skl)
 {
 	int i, ret;
 	struct skl_module_cfg *mconfig = w-&gt;priv;
@@ -876,7 +868,7 @@ static int skl_tplg_set_module_bind_params(struct snd_soc_dapm_widget *w,
 	if (mconfig-&gt;formats_config.caps_size &gt; 0 &amp;&amp;
 		mconfig-&gt;formats_config.set_params == SKL_PARAM_BIND) {
 		sp_cfg = &amp;mconfig-&gt;formats_config;
-		ret = skl_set_module_params(ctx, sp_cfg-&gt;caps,
+		ret = skl_set_module_params(skl, sp_cfg-&gt;caps,
 					sp_cfg-&gt;caps_size,
 					sp_cfg-&gt;param_id, mconfig);
 		if (ret &lt; 0)
@@ -894,10 +886,10 @@ static int skl_tplg_set_module_bind_params(struct snd_soc_dapm_widget *w,
 				if (!params)
 					return -ENOMEM;
 
-				skl_fill_sink_instance_id(ctx, params, bc-&gt;max,
+				skl_fill_sink_instance_id(skl, params, bc-&gt;max,
 								mconfig);
 
-				ret = skl_set_module_params(ctx, params,
+				ret = skl_set_module_params(skl, params,
 						bc-&gt;max, bc-&gt;param_id, mconfig);
 				kfree(params);
 
@@ -910,11 +902,11 @@ static int skl_tplg_set_module_bind_params(struct snd_soc_dapm_widget *w,
 	return 0;
 }
 
-static int skl_get_module_id(struct skl_sst *ctx, guid_t *uuid)
+static int skl_get_module_id(struct skl_dev *skl, guid_t *uuid)
 {
 	struct uuid_module *module;
 
-	list_for_each_entry(module, &amp;ctx-&gt;uuid_list, list) {
+	list_for_each_entry(module, &amp;skl-&gt;uuid_list, list) {
 		if (guid_equal(uuid, &amp;module-&gt;uuid))
 			return module-&gt;id;
 	}
@@ -922,7 +914,7 @@ static int skl_get_module_id(struct skl_sst *ctx, guid_t *uuid)
 	return -EINVAL;
 }
 
-static int skl_tplg_find_moduleid_from_uuid(struct skl *skl,
+static int skl_tplg_find_moduleid_from_uuid(struct skl_dev *skl,
 					const struct snd_kcontrol_new *k)
 {
 	struct soc_bytes_ext *sb = (void *) k-&gt;private_value;
@@ -942,7 +934,7 @@ static int skl_tplg_find_moduleid_from_uuid(struct skl *skl,
 		params-&gt;num_modules = uuid_params-&gt;num_modules;
 
 		for (i = 0; i &lt; uuid_params-&gt;num_modules; i++) {
-			module_id = skl_get_module_id(skl-&gt;skl_sst,
+			module_id = skl_get_module_id(skl,
 				&amp;uuid_params-&gt;u.map_uuid[i].mod_uuid);
 			if (module_id &lt; 0) {
 				devm_kfree(bus-&gt;dev, params);
@@ -966,7 +958,7 @@ static int skl_tplg_find_moduleid_from_uuid(struct skl *skl,
  * Retrieve the module id from UUID mentioned in the
  * post bind params
  */
-void skl_tplg_add_moduleid_in_bind_params(struct skl *skl,
+void skl_tplg_add_moduleid_in_bind_params(struct skl_dev *skl,
 				struct snd_soc_dapm_widget *w)
 {
 	struct skl_module_cfg *mconfig = w-&gt;priv;
@@ -985,12 +977,12 @@ void skl_tplg_add_moduleid_in_bind_params(struct skl *skl,
 			SNDRV_CTL_ELEM_ACCESS_TLV_CALLBACK) &amp;&amp;
 			(skl_tplg_find_moduleid_from_uuid(skl,
 			&amp;w-&gt;kcontrol_news[i]) &lt; 0))
-			dev_err(skl-&gt;skl_sst-&gt;dev,
+			dev_err(skl-&gt;dev,
 				&quot;%s: invalid kpb post bind params\n&quot;,
 				__func__);
 }
 
-static int skl_tplg_module_add_deferred_bind(struct skl *skl,
+static int skl_tplg_module_add_deferred_bind(struct skl_dev *skl,
 	struct skl_module_cfg *src, struct skl_module_cfg *dst)
 {
 	struct skl_module_deferred_bind *m_list, *modules;
@@ -1028,26 +1020,27 @@ static int skl_tplg_module_add_deferred_bind(struct skl *skl,
 }
 
 static int skl_tplg_bind_sinks(struct snd_soc_dapm_widget *w,
-				struct skl *skl,
+				struct skl_dev *skl,
 				struct snd_soc_dapm_widget *src_w,
 				struct skl_module_cfg *src_mconfig)
 {
 	struct snd_soc_dapm_path *p;
 	struct snd_soc_dapm_widget *sink = NULL, *next_sink = NULL;
 	struct skl_module_cfg *sink_mconfig;
-	struct skl_sst *ctx = skl-&gt;skl_sst;
 	int ret;
 
 	snd_soc_dapm_widget_for_each_sink_path(w, p) {
 		if (!p-&gt;connect)
 			continue;
 
-		dev_dbg(ctx-&gt;dev, &quot;%s: src widget=%s\n&quot;, __func__, w-&gt;name);
-		dev_dbg(ctx-&gt;dev, &quot;%s: sink widget=%s\n&quot;, __func__, p-&gt;sink-&gt;name);
+		dev_dbg(skl-&gt;dev,
+			&quot;%s: src widget=%s\n&quot;, __func__, w-&gt;name);
+		dev_dbg(skl-&gt;dev,
+			&quot;%s: sink widget=%s\n&quot;, __func__, p-&gt;sink-&gt;name);
 
 		next_sink = p-&gt;sink;
 
-		if (!is_skl_dsp_widget_type(p-&gt;sink, ctx-&gt;dev))
+		if (!is_skl_dsp_widget_type(p-&gt;sink, skl-&gt;dev))
 			return skl_tplg_bind_sinks(p-&gt;sink, skl, src_w, src_mconfig);
 
 		/*
@@ -1056,7 +1049,7 @@ static int skl_tplg_bind_sinks(struct snd_soc_dapm_widget *w,
 		 * they are ones used for SKL so check that first
 		 */
 		if ((p-&gt;sink-&gt;priv != NULL) &amp;&amp;
-				is_skl_dsp_widget_type(p-&gt;sink, ctx-&gt;dev)) {
+				is_skl_dsp_widget_type(p-&gt;sink, skl-&gt;dev)) {
 
 			sink = p-&gt;sink;
 			sink_mconfig = sink-&gt;priv;
@@ -1088,19 +1081,21 @@ static int skl_tplg_bind_sinks(struct snd_soc_dapm_widget *w,
 				continue;
 
 			/* Bind source to sink, mixin is always source */
-			ret = skl_bind_modules(ctx, src_mconfig, sink_mconfig);
+			ret = skl_bind_modules(skl, src_mconfig, sink_mconfig);
 			if (ret)
 				return ret;
 
 			/* set module params after bind */
-			skl_tplg_set_module_bind_params(src_w, src_mconfig, ctx);
-			skl_tplg_set_module_bind_params(sink, sink_mconfig, ctx);
+			skl_tplg_set_module_bind_params(src_w,
+					src_mconfig, skl);
+			skl_tplg_set_module_bind_params(sink,
+					sink_mconfig, skl);
 
 			/* Start sinks pipe first */
 			if (sink_mconfig-&gt;pipe-&gt;state != SKL_PIPE_STARTED) {
 				if (sink_mconfig-&gt;pipe-&gt;conn_type !=
 							SKL_PIPE_CONN_TYPE_FE)
-					ret = skl_run_pipe(ctx,
+					ret = skl_run_pipe(skl,
 							sink_mconfig-&gt;pipe);
 				if (ret)
 					return ret;
@@ -1125,10 +1120,9 @@ static int skl_tplg_bind_sinks(struct snd_soc_dapm_widget *w,
  *   - Then run current pipe
  */
 static int skl_tplg_pga_dapm_pre_pmu_event(struct snd_soc_dapm_widget *w,
-								struct skl *skl)
+							struct skl_dev *skl)
 {
 	struct skl_module_cfg *src_mconfig;
-	struct skl_sst *ctx = skl-&gt;skl_sst;
 	int ret = 0;
 
 	src_mconfig = w-&gt;priv;
@@ -1144,25 +1138,24 @@ static int skl_tplg_pga_dapm_pre_pmu_event(struct snd_soc_dapm_widget *w,
 
 	/* Start source pipe last after starting all sinks */
 	if (src_mconfig-&gt;pipe-&gt;conn_type != SKL_PIPE_CONN_TYPE_FE)
-		return skl_run_pipe(ctx, src_mconfig-&gt;pipe);
+		return skl_run_pipe(skl, src_mconfig-&gt;pipe);
 
 	return 0;
 }
 
 static struct snd_soc_dapm_widget *skl_get_src_dsp_widget(
-		struct snd_soc_dapm_widget *w, struct skl *skl)
+		struct snd_soc_dapm_widget *w, struct skl_dev *skl)
 {
 	struct snd_soc_dapm_path *p;
 	struct snd_soc_dapm_widget *src_w = NULL;
-	struct skl_sst *ctx = skl-&gt;skl_sst;
 
 	snd_soc_dapm_widget_for_each_source_path(w, p) {
 		src_w = p-&gt;source;
 		if (!p-&gt;connect)
 			continue;
 
-		dev_dbg(ctx-&gt;dev, &quot;sink widget=%s\n&quot;, w-&gt;name);
-		dev_dbg(ctx-&gt;dev, &quot;src widget=%s\n&quot;, p-&gt;source-&gt;name);
+		dev_dbg(skl-&gt;dev, &quot;sink widget=%s\n&quot;, w-&gt;name);
+		dev_dbg(skl-&gt;dev, &quot;src widget=%s\n&quot;, p-&gt;source-&gt;name);
 
 		/*
 		 * here we will check widgets in sink pipelines, so that can
@@ -1170,7 +1163,7 @@ static struct snd_soc_dapm_widget *skl_get_src_dsp_widget(
 		 * ones used for SKL so check that first
 		 */
 		if ((p-&gt;source-&gt;priv != NULL) &amp;&amp;
-				is_skl_dsp_widget_type(p-&gt;source, ctx-&gt;dev)) {
+				is_skl_dsp_widget_type(p-&gt;source, skl-&gt;dev)) {
 			return p-&gt;source;
 		}
 	}
@@ -1191,12 +1184,11 @@ static struct snd_soc_dapm_widget *skl_get_src_dsp_widget(
  *	- start this pipeline
  */
 static int skl_tplg_mixer_dapm_post_pmu_event(struct snd_soc_dapm_widget *w,
-							struct skl *skl)
+							struct skl_dev *skl)
 {
 	int ret = 0;
 	struct snd_soc_dapm_widget *source, *sink;
 	struct skl_module_cfg *src_mconfig, *sink_mconfig;
-	struct skl_sst *ctx = skl-&gt;skl_sst;
 	int src_pipe_started = 0;
 
 	sink = w;
@@ -1222,16 +1214,16 @@ static int skl_tplg_mixer_dapm_post_pmu_event(struct snd_soc_dapm_widget *w,
 	}
 
 	if (src_pipe_started) {
-		ret = skl_bind_modules(ctx, src_mconfig, sink_mconfig);
+		ret = skl_bind_modules(skl, src_mconfig, sink_mconfig);
 		if (ret)
 			return ret;
 
 		/* set module params after bind */
-		skl_tplg_set_module_bind_params(source, src_mconfig, ctx);
-		skl_tplg_set_module_bind_params(sink, sink_mconfig, ctx);
+		skl_tplg_set_module_bind_params(source, src_mconfig, skl);
+		skl_tplg_set_module_bind_params(sink, sink_mconfig, skl);
 
 		if (sink_mconfig-&gt;pipe-&gt;conn_type != SKL_PIPE_CONN_TYPE_FE)
-			ret = skl_run_pipe(ctx, sink_mconfig-&gt;pipe);
+			ret = skl_run_pipe(skl, sink_mconfig-&gt;pipe);
 	}
 
 	return ret;
@@ -1244,16 +1236,15 @@ static int skl_tplg_mixer_dapm_post_pmu_event(struct snd_soc_dapm_widget *w,
  *   - unbind with source pipelines if still connected
  */
 static int skl_tplg_mixer_dapm_pre_pmd_event(struct snd_soc_dapm_widget *w,
-							struct skl *skl)
+							struct skl_dev *skl)
 {
 	struct skl_module_cfg *src_mconfig, *sink_mconfig;
 	int ret = 0, i;
-	struct skl_sst *ctx = skl-&gt;skl_sst;
 
 	sink_mconfig = w-&gt;priv;
 
 	/* Stop the pipe */
-	ret = skl_stop_pipe(ctx, sink_mconfig-&gt;pipe);
+	ret = skl_stop_pipe(skl, sink_mconfig-&gt;pipe);
 	if (ret)
 		return ret;
 
@@ -1263,7 +1254,7 @@ static int skl_tplg_mixer_dapm_pre_pmd_event(struct snd_soc_dapm_widget *w,
 			if (!src_mconfig)
 				continue;
 
-			ret = skl_unbind_modules(ctx,
+			ret = skl_unbind_modules(skl,
 						src_mconfig, sink_mconfig);
 		}
 	}
@@ -1280,12 +1271,11 @@ static int skl_tplg_mixer_dapm_pre_pmd_event(struct snd_soc_dapm_widget *w,
  *     deleted, pipeline delete is enough here
  */
 static int skl_tplg_mixer_dapm_post_pmd_event(struct snd_soc_dapm_widget *w,
-							struct skl *skl)
+							struct skl_dev *skl)
 {
 	struct skl_module_cfg *mconfig = w-&gt;priv;
 	struct skl_pipe_module *w_module;
 	struct skl_module_cfg *src_module = NULL, *dst_module;
-	struct skl_sst *ctx = skl-&gt;skl_sst;
 	struct skl_pipe *s_pipe = mconfig-&gt;pipe;
 	struct skl_module_deferred_bind *modules, *tmp;
 
@@ -1307,7 +1297,7 @@ static int skl_tplg_mixer_dapm_post_pmd_event(struct snd_soc_dapm_widget *w,
 			 * modules from deferred bind list.
 			 */
 			if (modules-&gt;dst == src_module) {
-				skl_unbind_modules(ctx, modules-&gt;src,
+				skl_unbind_modules(skl, modules-&gt;src,
 						modules-&gt;dst);
 			}
 
@@ -1334,18 +1324,18 @@ static int skl_tplg_mixer_dapm_post_pmd_event(struct snd_soc_dapm_widget *w,
 			continue;
 		}
 
-		skl_unbind_modules(ctx, src_module, dst_module);
+		skl_unbind_modules(skl, src_module, dst_module);
 		src_module = dst_module;
 	}
 
-	skl_delete_pipe(ctx, mconfig-&gt;pipe);
+	skl_delete_pipe(skl, mconfig-&gt;pipe);
 
 	list_for_each_entry(w_module, &amp;s_pipe-&gt;w_list, node) {
 		src_module = w_module-&gt;w-&gt;priv;
 		src_module-&gt;m_state = SKL_MODULE_UNINIT;
 	}
 
-	return skl_tplg_unload_pipe_modules(ctx, s_pipe);
+	return skl_tplg_unload_pipe_modules(skl, s_pipe);
 }
 
 /*
@@ -1355,16 +1345,15 @@ static int skl_tplg_mixer_dapm_post_pmd_event(struct snd_soc_dapm_widget *w,
  *   - In source pipe is connected, unbind with source pipelines
  */
 static int skl_tplg_pga_dapm_post_pmd_event(struct snd_soc_dapm_widget *w,
-								struct skl *skl)
+							struct skl_dev *skl)
 {
 	struct skl_module_cfg *src_mconfig, *sink_mconfig;
 	int ret = 0, i;
-	struct skl_sst *ctx = skl-&gt;skl_sst;
 
 	src_mconfig = w-&gt;priv;
 
 	/* Stop the pipe since this is a mixin module */
-	ret = skl_stop_pipe(ctx, src_mconfig-&gt;pipe);
+	ret = skl_stop_pipe(skl, src_mconfig-&gt;pipe);
 	if (ret)
 		return ret;
 
@@ -1377,7 +1366,7 @@ static int skl_tplg_pga_dapm_post_pmd_event(struct snd_soc_dapm_widget *w,
 			 * This is a connecter and if path is found that means
 			 * unbind between source and sink has not happened yet
 			 */
-			ret = skl_unbind_modules(ctx, src_mconfig,
+			ret = skl_unbind_modules(skl, src_mconfig,
 							sink_mconfig);
 		}
 	}
@@ -1395,7 +1384,7 @@ static int skl_tplg_mixer_event(struct snd_soc_dapm_widget *w,
 				struct snd_kcontrol *k, int event)
 {
 	struct snd_soc_dapm_context *dapm = w-&gt;dapm;
-	struct skl *skl = get_skl_ctx(dapm-&gt;dev);
+	struct skl_dev *skl = get_skl_ctx(dapm-&gt;dev);
 
 	switch (event) {
 	case SND_SOC_DAPM_PRE_PMU:
@@ -1425,7 +1414,7 @@ static int skl_tplg_pga_event(struct snd_soc_dapm_widget *w,
 
 {
 	struct snd_soc_dapm_context *dapm = w-&gt;dapm;
-	struct skl *skl = get_skl_ctx(dapm-&gt;dev);
+	struct skl_dev *skl = get_skl_ctx(dapm-&gt;dev);
 
 	switch (event) {
 	case SND_SOC_DAPM_PRE_PMU:
@@ -1446,10 +1435,10 @@ static int skl_tplg_tlv_control_get(struct snd_kcontrol *kcontrol,
 	struct skl_algo_data *bc = (struct skl_algo_data *)sb-&gt;dobj.private;
 	struct snd_soc_dapm_widget *w = snd_soc_dapm_kcontrol_widget(kcontrol);
 	struct skl_module_cfg *mconfig = w-&gt;priv;
-	struct skl *skl = get_skl_ctx(w-&gt;dapm-&gt;dev);
+	struct skl_dev *skl = get_skl_ctx(w-&gt;dapm-&gt;dev);
 
 	if (w-&gt;power)
-		skl_get_module_params(skl-&gt;skl_sst, (u32 *)bc-&gt;params,
+		skl_get_module_params(skl, (u32 *)bc-&gt;params,
 				      bc-&gt;size, bc-&gt;param_id, mconfig);
 
 	/* decrement size for TLV header */
@@ -1481,7 +1470,7 @@ static int skl_tplg_tlv_control_set(struct snd_kcontrol *kcontrol,
 	struct soc_bytes_ext *sb =
 			(struct soc_bytes_ext *)kcontrol-&gt;private_value;
 	struct skl_algo_data *ac = (struct skl_algo_data *)sb-&gt;dobj.private;
-	struct skl *skl = get_skl_ctx(w-&gt;dapm-&gt;dev);
+	struct skl_dev *skl = get_skl_ctx(w-&gt;dapm-&gt;dev);
 
 	if (ac-&gt;params) {
 		/*
@@ -1498,7 +1487,7 @@ static int skl_tplg_tlv_control_set(struct snd_kcontrol *kcontrol,
 			return -EFAULT;
 
 		if (w-&gt;power)
-			return skl_set_module_params(skl-&gt;skl_sst,
+			return skl_set_module_params(skl,
 						(u32 *)ac-&gt;params, ac-&gt;size,
 						ac-&gt;param_id, mconfig);
 	}
@@ -1659,7 +1648,7 @@ int skl_tplg_update_pipe_params(struct device *dev,
 			struct skl_pipe_params *params)
 {
 	struct skl_module_res *res = &amp;mconfig-&gt;module-&gt;resources[0];
-	struct skl *skl = get_skl_ctx(dev);
+	struct skl_dev *skl = get_skl_ctx(dev);
 	struct skl_module_fmt *format = NULL;
 	u8 cfg_idx = mconfig-&gt;pipe-&gt;cur_config_idx;
 
@@ -1856,7 +1845,7 @@ static int skl_tplg_be_fill_pipe_params(struct snd_soc_dai *dai,
 				struct skl_pipe_params *params)
 {
 	struct nhlt_specific_cfg *cfg;
-	struct skl *skl = get_skl_ctx(dai-&gt;dev);
+	struct skl_dev *skl = get_skl_ctx(dai-&gt;dev);
 	int link_type = skl_tplg_be_link_type(mconfig-&gt;dev_type);
 	u8 dev_type = skl_tplg_be_dev_type(mconfig-&gt;dev_type);
 
@@ -2070,7 +2059,7 @@ static int skl_tplg_fill_pipe_tkn(struct device *dev,
  * Return an existing pipe if the pipe already exists.
  */
 static int skl_tplg_add_pipe(struct device *dev,
-		struct skl_module_cfg *mconfig, struct skl *skl,
+		struct skl_module_cfg *mconfig, struct skl_dev *skl,
 		struct snd_soc_tplg_vendor_value_elem *tkn_elem)
 {
 	struct skl_pipeline *ppl;
@@ -2381,7 +2370,7 @@ static int skl_tplg_fill_res_tkn(struct device *dev,
  */
 static int skl_tplg_get_token(struct device *dev,
 		struct snd_soc_tplg_vendor_value_elem *tkn_elem,
-		struct skl *skl, struct skl_module_cfg *mconfig)
+		struct skl_dev *skl, struct skl_module_cfg *mconfig)
 {
 	int tkn_count = 0;
 	int ret;
@@ -2631,7 +2620,7 @@ static int skl_tplg_get_token(struct device *dev,
  * module private data
  */
 static int skl_tplg_get_tokens(struct device *dev,
-		char *pvt_data,	struct skl *skl,
+		char *pvt_data,	struct skl_dev *skl,
 		struct skl_module_cfg *mconfig, int block_size)
 {
 	struct snd_soc_tplg_vendor_array *array;
@@ -2727,8 +2716,8 @@ static int skl_tplg_get_desc_blocks(struct device *dev,
  * Otherwise we create a new instance and add into driver list
  */
 static int skl_tplg_add_pipe_v4(struct device *dev,
-				struct skl_module_cfg *mconfig, struct skl *skl,
-				struct skl_dfw_v4_pipe *dfw_pipe)
+			struct skl_module_cfg *mconfig, struct skl_dev *skl,
+			struct skl_dfw_v4_pipe *dfw_pipe)
 {
 	struct skl_pipeline *ppl;
 	struct skl_pipe *pipe;
@@ -2804,7 +2793,7 @@ static void skl_tplg_fill_fmt_v4(struct skl_module_pin_fmt *dst_fmt,
 }
 
 static int skl_tplg_get_pvt_data_v4(struct snd_soc_tplg_dapm_widget *tplg_w,
-				    struct skl *skl, struct device *dev,
+				    struct skl_dev *skl, struct device *dev,
 				    struct skl_module_cfg *mconfig)
 {
 	struct skl_dfw_v4_module *dfw =
@@ -2886,7 +2875,7 @@ static int skl_tplg_get_pvt_data_v4(struct snd_soc_tplg_dapm_widget *tplg_w,
  * for the type and size of the suceeding data block.
  */
 static int skl_tplg_get_pvt_data(struct snd_soc_tplg_dapm_widget *tplg_w,
-				struct skl *skl, struct device *dev,
+				struct skl_dev *skl, struct device *dev,
 				struct skl_module_cfg *mconfig)
 {
 	struct snd_soc_tplg_vendor_array *array;
@@ -2981,9 +2970,8 @@ static void skl_clear_pin_config(struct snd_soc_component *component,
 	}
 }
 
-void skl_cleanup_resources(struct skl *skl)
+void skl_cleanup_resources(struct skl_dev *skl)
 {
-	struct skl_sst *ctx = skl-&gt;skl_sst;
 	struct snd_soc_component *soc_component = skl-&gt;component;
 	struct snd_soc_dapm_widget *w;
 	struct snd_soc_card *card;
@@ -2999,11 +2987,11 @@ void skl_cleanup_resources(struct skl *skl)
 	skl-&gt;resource.mcps = 0;
 
 	list_for_each_entry(w, &amp;card-&gt;widgets, list) {
-		if (is_skl_dsp_widget_type(w, ctx-&gt;dev) &amp;&amp; w-&gt;priv != NULL)
+		if (is_skl_dsp_widget_type(w, skl-&gt;dev) &amp;&amp; w-&gt;priv != NULL)
 			skl_clear_pin_config(soc_component, w);
 	}
 
-	skl_clear_module_cnt(ctx-&gt;dsp);
+	skl_clear_module_cnt(skl-&gt;dsp);
 }
 
 /*
@@ -3019,7 +3007,7 @@ static int skl_tplg_widget_load(struct snd_soc_component *cmpnt, int index,
 {
 	int ret;
 	struct hdac_bus *bus = snd_soc_component_get_drvdata(cmpnt);
-	struct skl *skl = bus_to_skl(bus);
+	struct skl_dev *skl = bus_to_skl(bus);
 	struct skl_module_cfg *mconfig;
 
 	if (!tplg_w-&gt;priv.size)
@@ -3163,21 +3151,21 @@ static int skl_tplg_control_load(struct snd_soc_component *cmpnt,
 
 static int skl_tplg_fill_str_mfest_tkn(struct device *dev,
 		struct snd_soc_tplg_vendor_string_elem *str_elem,
-		struct skl *skl)
+		struct skl_dev *skl)
 {
 	int tkn_count = 0;
 	static int ref_count;
 
 	switch (str_elem-&gt;token) {
 	case SKL_TKN_STR_LIB_NAME:
-		if (ref_count &gt; skl-&gt;skl_sst-&gt;lib_count - 1) {
+		if (ref_count &gt; skl-&gt;lib_count - 1) {
 			ref_count = 0;
 			return -EINVAL;
 		}
 
-		strncpy(skl-&gt;skl_sst-&gt;lib_info[ref_count].name,
+		strncpy(skl-&gt;lib_info[ref_count].name,
 			str_elem-&gt;string,
-			ARRAY_SIZE(skl-&gt;skl_sst-&gt;lib_info[ref_count].name));
+			ARRAY_SIZE(skl-&gt;lib_info[ref_count].name));
 		ref_count++;
 		break;
 
@@ -3192,7 +3180,7 @@ static int skl_tplg_fill_str_mfest_tkn(struct device *dev,
 
 static int skl_tplg_get_str_tkn(struct device *dev,
 		struct snd_soc_tplg_vendor_array *array,
-		struct skl *skl)
+		struct skl_dev *skl)
 {
 	int tkn_count = 0, ret;
 	struct snd_soc_tplg_vendor_string_elem *str_elem;
@@ -3299,7 +3287,7 @@ static int skl_tplg_fill_mod_info(struct device *dev,
 
 static int skl_tplg_get_int_tkn(struct device *dev,
 		struct snd_soc_tplg_vendor_value_elem *tkn_elem,
-		struct skl *skl)
+		struct skl_dev *skl)
 {
 	int tkn_count = 0, ret;
 	static int mod_idx, res_val_idx, intf_val_idx, dir, pin_idx;
@@ -3319,7 +3307,7 @@ static int skl_tplg_get_int_tkn(struct device *dev,
 
 	switch (tkn_elem-&gt;token) {
 	case SKL_TKN_U32_LIB_COUNT:
-		skl-&gt;skl_sst-&gt;lib_count = tkn_elem-&gt;value;
+		skl-&gt;lib_count = tkn_elem-&gt;value;
 		break;
 
 	case SKL_TKN_U8_NUM_MOD:
@@ -3466,7 +3454,7 @@ static int skl_tplg_get_int_tkn(struct device *dev,
 }
 
 static int skl_tplg_get_manifest_uuid(struct device *dev,
-				struct skl *skl,
+				struct skl_dev *skl,
 				struct snd_soc_tplg_vendor_uuid_elem *uuid_tkn)
 {
 	static int ref_count;
@@ -3489,7 +3477,7 @@ static int skl_tplg_get_manifest_uuid(struct device *dev,
  * type.
  */
 static int skl_tplg_get_manifest_tkn(struct device *dev,
-		char *pvt_data, struct skl *skl,
+		char *pvt_data, struct skl_dev *skl,
 		int block_size)
 {
 	int tkn_count = 0, ret;
@@ -3550,7 +3538,7 @@ static int skl_tplg_get_manifest_tkn(struct device *dev,
  * preceded by descriptors for type and size of data block.
  */
 static int skl_tplg_get_manifest_data(struct snd_soc_tplg_manifest *manifest,
-			struct device *dev, struct skl *skl)
+			struct device *dev, struct skl_dev *skl)
 {
 	struct snd_soc_tplg_vendor_array *array;
 	int num_blocks, block_size = 0, block_type, off = 0;
@@ -3612,7 +3600,7 @@ static int skl_manifest_load(struct snd_soc_component *cmpnt, int index,
 				struct snd_soc_tplg_manifest *manifest)
 {
 	struct hdac_bus *bus = snd_soc_component_get_drvdata(cmpnt);
-	struct skl *skl = bus_to_skl(bus);
+	struct skl_dev *skl = bus_to_skl(bus);
 
 	/* proceed only if we have private data defined */
 	if (manifest-&gt;priv.size == 0)
@@ -3620,9 +3608,9 @@ static int skl_manifest_load(struct snd_soc_component *cmpnt, int index,
 
 	skl_tplg_get_manifest_data(manifest, bus-&gt;dev, skl);
 
-	if (skl-&gt;skl_sst-&gt;lib_count &gt; SKL_MAX_LIB) {
+	if (skl-&gt;lib_count &gt; SKL_MAX_LIB) {
 		dev_err(bus-&gt;dev, &quot;Exceeding max Library count. Got:%d\n&quot;,
-					skl-&gt;skl_sst-&gt;lib_count);
+					skl-&gt;lib_count);
 		return  -EINVAL;
 	}
 
@@ -3671,7 +3659,7 @@ static int skl_tplg_create_pipe_widget_list(struct snd_soc_component *component)
 	return 0;
 }
 
-static void skl_tplg_set_pipe_type(struct skl *skl, struct skl_pipe *pipe)
+static void skl_tplg_set_pipe_type(struct skl_dev *skl, struct skl_pipe *pipe)
 {
 	struct skl_pipe_module *w_module;
 	struct snd_soc_dapm_widget *w;
@@ -3705,7 +3693,7 @@ int skl_tplg_init(struct snd_soc_component *component, struct hdac_bus *bus)
 {
 	int ret;
 	const struct firmware *fw;
-	struct skl *skl = bus_to_skl(bus);
+	struct skl_dev *skl = bus_to_skl(bus);
 	struct skl_pipeline *ppl;
 
 	ret = request_firmware(&amp;fw, skl-&gt;tplg_name, bus-&gt;dev);
@@ -3748,7 +3736,7 @@ int skl_tplg_init(struct snd_soc_component *component, struct hdac_bus *bus)
 
 void skl_tplg_exit(struct snd_soc_component *component, struct hdac_bus *bus)
 {
-	struct skl *skl = bus_to_skl(bus);
+	struct skl_dev *skl = bus_to_skl(bus);
 	struct skl_pipeline *ppl, *tmp;
 
 	if (!list_empty(&amp;skl-&gt;ppl_list))
diff --git a/sound/soc/intel/skylake/skl-topology.h b/sound/soc/intel/skylake/skl-topology.h
index 665e35cee50d..0a4d89cdaa4c 100644
--- a/sound/soc/intel/skylake/skl-topology.h
+++ b/sound/soc/intel/skylake/skl-topology.h
@@ -447,7 +447,7 @@ enum skl_channel {
 	SKL_CH_QUATRO = 4,
 };
 
-static inline struct skl *get_skl_ctx(struct device *dev)
+static inline struct skl_dev *get_skl_ctx(struct device *dev)
 {
 	struct hdac_bus *bus = dev_get_drvdata(dev);
 
@@ -456,7 +456,7 @@ static inline struct skl *get_skl_ctx(struct device *dev)
 
 int skl_tplg_be_update_params(struct snd_soc_dai *dai,
 	struct skl_pipe_params *params);
-int skl_dsp_set_dma_control(struct skl_sst *ctx, u32 *caps,
+int skl_dsp_set_dma_control(struct skl_dev *skl, u32 *caps,
 			u32 caps_size, u32 node_id);
 void skl_tplg_set_be_dmic_config(struct snd_soc_dai *dai,
 	struct skl_pipe_params *params, int stream);
@@ -469,32 +469,32 @@ struct skl_module_cfg *skl_tplg_fe_get_cpr_module(
 int skl_tplg_update_pipe_params(struct device *dev,
 		struct skl_module_cfg *mconfig, struct skl_pipe_params *params);
 
-void skl_tplg_d0i3_get(struct skl *skl, enum d0i3_capability caps);
-void skl_tplg_d0i3_put(struct skl *skl, enum d0i3_capability caps);
+void skl_tplg_d0i3_get(struct skl_dev *skl, enum d0i3_capability caps);
+void skl_tplg_d0i3_put(struct skl_dev *skl, enum d0i3_capability caps);
 
-int skl_create_pipeline(struct skl_sst *ctx, struct skl_pipe *pipe);
+int skl_create_pipeline(struct skl_dev *skl, struct skl_pipe *pipe);
 
-int skl_run_pipe(struct skl_sst *ctx, struct skl_pipe *pipe);
+int skl_run_pipe(struct skl_dev *skl, struct skl_pipe *pipe);
 
-int skl_pause_pipe(struct skl_sst *ctx, struct skl_pipe *pipe);
+int skl_pause_pipe(struct skl_dev *skl, struct skl_pipe *pipe);
 
-int skl_delete_pipe(struct skl_sst *ctx, struct skl_pipe *pipe);
+int skl_delete_pipe(struct skl_dev *skl, struct skl_pipe *pipe);
 
-int skl_stop_pipe(struct skl_sst *ctx, struct skl_pipe *pipe);
+int skl_stop_pipe(struct skl_dev *skl, struct skl_pipe *pipe);
 
-int skl_reset_pipe(struct skl_sst *ctx, struct skl_pipe *pipe);
+int skl_reset_pipe(struct skl_dev *skl, struct skl_pipe *pipe);
 
-int skl_init_module(struct skl_sst *ctx, struct skl_module_cfg *module_config);
+int skl_init_module(struct skl_dev *skl, struct skl_module_cfg *module_config);
 
-int skl_bind_modules(struct skl_sst *ctx, struct skl_module_cfg
+int skl_bind_modules(struct skl_dev *skl, struct skl_module_cfg
 	*src_module, struct skl_module_cfg *dst_module);
 
-int skl_unbind_modules(struct skl_sst *ctx, struct skl_module_cfg
+int skl_unbind_modules(struct skl_dev *skl, struct skl_module_cfg
 	*src_module, struct skl_module_cfg *dst_module);
 
-int skl_set_module_params(struct skl_sst *ctx, u32 *params, int size,
+int skl_set_module_params(struct skl_dev *skl, u32 *params, int size,
 			u32 param_id, struct skl_module_cfg *mcfg);
-int skl_get_module_params(struct skl_sst *ctx, u32 *params, int size,
+int skl_get_module_params(struct skl_dev *skl, u32 *params, int size,
 			  u32 param_id, struct skl_module_cfg *mcfg);
 
 struct skl_module_cfg *skl_tplg_be_get_cpr_module(struct snd_soc_dai *dai,
@@ -508,6 +508,6 @@ int skl_pcm_link_dma_prepare(struct device *dev,
 int skl_dai_load(struct snd_soc_component *cmp, int index,
 		struct snd_soc_dai_driver *dai_drv,
 		struct snd_soc_tplg_pcm *pcm, struct snd_soc_dai *dai);
-void skl_tplg_add_moduleid_in_bind_params(struct skl *skl,
+void skl_tplg_add_moduleid_in_bind_params(struct skl_dev *skl,
 				struct snd_soc_dapm_widget *w);
 #endif
diff --git a/sound/soc/intel/skylake/skl.c b/sound/soc/intel/skylake/skl.c
index 7e093fb13c92..b313177a1b1e 100644
--- a/sound/soc/intel/skylake/skl.c
+++ b/sound/soc/intel/skylake/skl.c
@@ -50,7 +50,7 @@ static void skl_update_pci_byte(struct pci_dev *pci, unsigned int reg,
 	pci_write_config_byte(pci, reg, data);
 }
 
-static void skl_init_pci(struct skl *skl)
+static void skl_init_pci(struct skl_dev *skl)
 {
 	struct hdac_bus *bus = skl_to_bus(skl);
 
@@ -233,7 +233,7 @@ static irqreturn_t skl_threaded_handler(int irq, void *dev_id)
 
 static int skl_acquire_irq(struct hdac_bus *bus, int do_disconnect)
 {
-	struct skl *skl = bus_to_skl(bus);
+	struct skl_dev *skl = bus_to_skl(bus);
 	int ret;
 
 	ret = request_threaded_irq(skl-&gt;pci-&gt;irq, skl_interrupt,
@@ -257,7 +257,7 @@ static int skl_suspend_late(struct device *dev)
 {
 	struct pci_dev *pci = to_pci_dev(dev);
 	struct hdac_bus *bus = pci_get_drvdata(pci);
-	struct skl *skl = bus_to_skl(bus);
+	struct skl_dev *skl = bus_to_skl(bus);
 
 	return skl_suspend_late_dsp(skl);
 }
@@ -265,7 +265,7 @@ static int skl_suspend_late(struct device *dev)
 #ifdef CONFIG_PM
 static int _skl_suspend(struct hdac_bus *bus)
 {
-	struct skl *skl = bus_to_skl(bus);
+	struct skl_dev *skl = bus_to_skl(bus);
 	struct pci_dev *pci = to_pci_dev(bus-&gt;dev);
 	int ret;
 
@@ -288,7 +288,7 @@ static int _skl_suspend(struct hdac_bus *bus)
 
 static int _skl_resume(struct hdac_bus *bus)
 {
-	struct skl *skl = bus_to_skl(bus);
+	struct skl_dev *skl = bus_to_skl(bus);
 
 	skl_init_pci(skl);
 	skl_init_chip(bus, true);
@@ -305,7 +305,7 @@ static int skl_suspend(struct device *dev)
 {
 	struct pci_dev *pci = to_pci_dev(dev);
 	struct hdac_bus *bus = pci_get_drvdata(pci);
-	struct skl *skl  = bus_to_skl(bus);
+	struct skl_dev *skl  = bus_to_skl(bus);
 	int ret;
 
 	/*
@@ -325,7 +325,7 @@ static int skl_suspend(struct device *dev)
 		ret = _skl_suspend(bus);
 		if (ret &lt; 0)
 			return ret;
-		skl-&gt;skl_sst-&gt;fw_loaded = false;
+		skl-&gt;fw_loaded = false;
 	}
 
 	return 0;
@@ -335,7 +335,7 @@ static int skl_resume(struct device *dev)
 {
 	struct pci_dev *pci = to_pci_dev(dev);
 	struct hdac_bus *bus = pci_get_drvdata(pci);
-	struct skl *skl  = bus_to_skl(bus);
+	struct skl_dev *skl  = bus_to_skl(bus);
 	struct hdac_ext_link *hlink = NULL;
 	int ret;
 
@@ -410,7 +410,7 @@ static const struct dev_pm_ops skl_pm = {
  */
 static int skl_free(struct hdac_bus *bus)
 {
-	struct skl *skl  = bus_to_skl(bus);
+	struct skl_dev *skl  = bus_to_skl(bus);
 
 	skl-&gt;init_done = 0; /* to be sure */
 
@@ -455,7 +455,7 @@ static struct skl_ssp_clk skl_ssp_clks[] = {
 						{.name = &quot;ssp5_sclkfs&quot;},
 };
 
-static struct snd_soc_acpi_mach *skl_find_hda_machine(struct skl *skl,
+static struct snd_soc_acpi_mach *skl_find_hda_machine(struct skl_dev *skl,
 					struct snd_soc_acpi_mach *machines)
 {
 	struct hdac_bus *bus = skl_to_bus(skl);
@@ -474,7 +474,7 @@ static struct snd_soc_acpi_mach *skl_find_hda_machine(struct skl *skl,
 	return mach;
 }
 
-static int skl_find_machine(struct skl *skl, void *driver_data)
+static int skl_find_machine(struct skl_dev *skl, void *driver_data)
 {
 	struct hdac_bus *bus = skl_to_bus(skl);
 	struct snd_soc_acpi_mach *mach = driver_data;
@@ -502,7 +502,7 @@ static int skl_find_machine(struct skl *skl, void *driver_data)
 	return 0;
 }
 
-static int skl_machine_device_register(struct skl *skl)
+static int skl_machine_device_register(struct skl_dev *skl)
 {
 	struct snd_soc_acpi_mach *mach = skl-&gt;mach;
 	struct hdac_bus *bus = skl_to_bus(skl);
@@ -538,13 +538,13 @@ static int skl_machine_device_register(struct skl *skl)
 	return 0;
 }
 
-static void skl_machine_device_unregister(struct skl *skl)
+static void skl_machine_device_unregister(struct skl_dev *skl)
 {
 	if (skl-&gt;i2s_dev)
 		platform_device_unregister(skl-&gt;i2s_dev);
 }
 
-static int skl_dmic_device_register(struct skl *skl)
+static int skl_dmic_device_register(struct skl_dev *skl)
 {
 	struct hdac_bus *bus = skl_to_bus(skl);
 	struct platform_device *pdev;
@@ -568,7 +568,7 @@ static int skl_dmic_device_register(struct skl *skl)
 	return 0;
 }
 
-static void skl_dmic_device_unregister(struct skl *skl)
+static void skl_dmic_device_unregister(struct skl_dev *skl)
 {
 	if (skl-&gt;dmic_dev)
 		platform_device_unregister(skl-&gt;dmic_dev);
@@ -606,7 +606,7 @@ static void init_skl_xtal_rate(int pci_id)
 	}
 }
 
-static int skl_clock_device_register(struct skl *skl)
+static int skl_clock_device_register(struct skl_dev *skl)
 {
 	struct platform_device_info pdevinfo = {NULL};
 	struct skl_clk_pdata *clk_pdata;
@@ -636,7 +636,7 @@ static int skl_clock_device_register(struct skl *skl)
 	return PTR_ERR_OR_ZERO(skl-&gt;clk_dev);
 }
 
-static void skl_clock_device_unregister(struct skl *skl)
+static void skl_clock_device_unregister(struct skl_dev *skl)
 {
 	if (skl-&gt;clk_dev)
 		platform_device_unregister(skl-&gt;clk_dev);
@@ -672,7 +672,7 @@ static int probe_codec(struct hdac_bus *bus, int addr)
 	unsigned int cmd = (addr &lt;&lt; 28) | (AC_NODE_ROOT &lt;&lt; 20) |
 		(AC_VERB_PARAMETERS &lt;&lt; 8) | AC_PAR_VENDOR_ID;
 	unsigned int res = -1;
-	struct skl *skl = bus_to_skl(bus);
+	struct skl_dev *skl = bus_to_skl(bus);
 #if IS_ENABLED(CONFIG_SND_SOC_INTEL_SKYLAKE_HDAUDIO_CODEC)
 	struct hdac_hda_priv *hda_codec;
 	int err;
@@ -772,7 +772,7 @@ static int skl_i915_init(struct hdac_bus *bus)
 
 static void skl_probe_work(struct work_struct *work)
 {
-	struct skl *skl = container_of(work, struct skl, probe_work);
+	struct skl_dev *skl = container_of(work, struct skl_dev, probe_work);
 	struct hdac_bus *bus = skl_to_bus(skl);
 	struct hdac_ext_link *hlink = NULL;
 	int err;
@@ -835,10 +835,10 @@ static void skl_probe_work(struct work_struct *work)
  */
 static int skl_create(struct pci_dev *pci,
 		      const struct hdac_io_ops *io_ops,
-		      struct skl **rskl)
+		      struct skl_dev **rskl)
 {
 	struct hdac_ext_bus_ops *ext_ops = NULL;
-	struct skl *skl;
+	struct skl_dev *skl;
 	struct hdac_bus *bus;
 	struct hda_bus *hbus;
 	int err;
@@ -882,7 +882,7 @@ static int skl_create(struct pci_dev *pci,
 
 static int skl_first_init(struct hdac_bus *bus)
 {
-	struct skl *skl = bus_to_skl(bus);
+	struct skl_dev *skl = bus_to_skl(bus);
 	struct pci_dev *pci = skl-&gt;pci;
 	int err;
 	unsigned short gcap;
@@ -957,7 +957,7 @@ static int skl_first_init(struct hdac_bus *bus)
 static int skl_probe(struct pci_dev *pci,
 		     const struct pci_device_id *pci_id)
 {
-	struct skl *skl;
+	struct skl_dev *skl;
 	struct hdac_bus *bus = NULL;
 	int err;
 
@@ -1050,8 +1050,8 @@ static int skl_probe(struct pci_dev *pci,
 		dev_dbg(bus-&gt;dev, &quot;error failed to register dsp\n&quot;);
 		goto out_nhlt_free;
 	}
-	skl-&gt;skl_sst-&gt;enable_miscbdcge = skl_enable_miscbdcge;
-	skl-&gt;skl_sst-&gt;clock_power_gating = skl_clock_power_gating;
+	skl-&gt;enable_miscbdcge = skl_enable_miscbdcge;
+	skl-&gt;clock_power_gating = skl_clock_power_gating;
 
 	if (bus-&gt;mlcap)
 		snd_hdac_ext_bus_get_ml_capabilities(bus);
@@ -1086,7 +1086,7 @@ static void skl_shutdown(struct pci_dev *pci)
 	struct hdac_bus *bus = pci_get_drvdata(pci);
 	struct hdac_stream *s;
 	struct hdac_ext_stream *stream;
-	struct skl *skl;
+	struct skl_dev *skl;
 
 	if (!bus)
 		return;
@@ -1108,7 +1108,7 @@ static void skl_shutdown(struct pci_dev *pci)
 static void skl_remove(struct pci_dev *pci)
 {
 	struct hdac_bus *bus = pci_get_drvdata(pci);
-	struct skl *skl = bus_to_skl(bus);
+	struct skl_dev *skl = bus_to_skl(bus);
 
 	cancel_work_sync(&amp;skl-&gt;probe_work);
 
diff --git a/sound/soc/intel/skylake/skl.h b/sound/soc/intel/skylake/skl.h
index 6fab1a2e133a..0d281f9e9128 100644
--- a/sound/soc/intel/skylake/skl.h
+++ b/sound/soc/intel/skylake/skl.h
@@ -18,6 +18,7 @@
 #include &lt;sound/soc.h&gt;
 #include &quot;skl-nhlt.h&quot;
 #include &quot;skl-ssp-clk.h&quot;
+#include &quot;skl-sst-ipc.h&quot;
 
 #define SKL_SUSPEND_DELAY 2000
 
@@ -62,7 +63,7 @@ struct skl_fw_config {
 	struct skl_astate_config *astate_cfg;
 };
 
-struct skl {
+struct skl_dev {
 	struct hda_bus hbus;
 	struct pci_dev *pci;
 
@@ -74,7 +75,6 @@ struct skl {
 	struct snd_soc_dai_driver *dais;
 
 	struct nhlt_acpi_table *nhlt; /* nhlt ptr */
-	struct skl_sst *skl_sst; /* sst skl ctx */
 
 	struct skl_dsp_resource resource;
 	struct list_head ppl_list;
@@ -95,13 +95,59 @@ struct skl {
 	bool use_tplg_pcm;
 	struct skl_fw_config cfg;
 	struct snd_soc_acpi_mach *mach;
+
+	struct device *dev;
+	struct sst_dsp *dsp;
+
+	/* boot */
+	wait_queue_head_t boot_wait;
+	bool boot_complete;
+
+	/* module load */
+	wait_queue_head_t mod_load_wait;
+	bool mod_load_complete;
+	bool mod_load_status;
+
+	/* IPC messaging */
+	struct sst_generic_ipc ipc;
+
+	/* callback for miscbdge */
+	void (*enable_miscbdcge)(struct device *dev, bool enable);
+	/* Is CGCTL.MISCBDCGE disabled */
+	bool miscbdcg_disabled;
+
+	/* Populate module information */
+	struct list_head uuid_list;
+
+	/* Is firmware loaded */
+	bool fw_loaded;
+
+	/* first boot ? */
+	bool is_first_boot;
+
+	/* multi-core */
+	struct skl_dsp_cores cores;
+
+	/* library info */
+	struct skl_lib_info  lib_info[SKL_MAX_LIB];
+	int lib_count;
+
+	/* Callback to update D0i3C register */
+	void (*update_d0i3c)(struct device *dev, bool enable);
+
+	struct skl_d0i3_data d0i3;
+
+	const struct skl_dsp_ops *dsp_ops;
+
+	/* Callback to update dynamic clock and power gating registers */
+	void (*clock_power_gating)(struct device *dev, bool enable);
 };
 
 #define skl_to_bus(s)  (&amp;(s)-&gt;hbus.core)
-#define bus_to_skl(bus) container_of(bus, struct skl, hbus.core)
+#define bus_to_skl(bus) container_of(bus, struct skl_dev, hbus.core)
 
 #define skl_to_hbus(s) (&amp;(s)-&gt;hbus)
-#define hbus_to_skl(hbus) container_of((hbus), struct skl, (hbus))
+#define hbus_to_skl(hbus) container_of((hbus), struct skl_dev, (hbus))
 
 /* to pass dai dma data */
 struct skl_dma_params {
@@ -120,9 +166,9 @@ struct skl_dsp_ops {
 	int (*init)(struct device *dev, void __iomem *mmio_base,
 			int irq, const char *fw_name,
 			struct skl_dsp_loader_ops loader_ops,
-			struct skl_sst **skl_sst);
-	int (*init_fw)(struct device *dev, struct skl_sst *ctx);
-	void (*cleanup)(struct device *dev, struct skl_sst *ctx);
+			struct skl_dev **skl_sst);
+	int (*init_fw)(struct device *dev, struct skl_dev *skl);
+	void (*cleanup)(struct device *dev, struct skl_dev *skl);
 };
 
 int skl_platform_unregister(struct device *dev);
@@ -130,42 +176,42 @@ int skl_platform_register(struct device *dev);
 
 struct nhlt_acpi_table *skl_nhlt_init(struct device *dev);
 void skl_nhlt_free(struct nhlt_acpi_table *addr);
-struct nhlt_specific_cfg *skl_get_ep_blob(struct skl *skl, u32 instance,
+struct nhlt_specific_cfg *skl_get_ep_blob(struct skl_dev *skl, u32 instance,
 					u8 link_type, u8 s_fmt, u8 no_ch,
 					u32 s_rate, u8 dirn, u8 dev_type);
 
-int skl_get_dmic_geo(struct skl *skl);
-int skl_nhlt_update_topology_bin(struct skl *skl);
-int skl_init_dsp(struct skl *skl);
-int skl_free_dsp(struct skl *skl);
-int skl_suspend_late_dsp(struct skl *skl);
-int skl_suspend_dsp(struct skl *skl);
-int skl_resume_dsp(struct skl *skl);
-void skl_cleanup_resources(struct skl *skl);
+int skl_get_dmic_geo(struct skl_dev *skl);
+int skl_nhlt_update_topology_bin(struct skl_dev *skl);
+int skl_init_dsp(struct skl_dev *skl);
+int skl_free_dsp(struct skl_dev *skl);
+int skl_suspend_late_dsp(struct skl_dev *skl);
+int skl_suspend_dsp(struct skl_dev *skl);
+int skl_resume_dsp(struct skl_dev *skl);
+void skl_cleanup_resources(struct skl_dev *skl);
 const struct skl_dsp_ops *skl_get_dsp_ops(int pci_id);
 void skl_update_d0i3c(struct device *dev, bool enable);
-int skl_nhlt_create_sysfs(struct skl *skl);
-void skl_nhlt_remove_sysfs(struct skl *skl);
-void skl_get_clks(struct skl *skl, struct skl_ssp_clk *ssp_clks);
+int skl_nhlt_create_sysfs(struct skl_dev *skl);
+void skl_nhlt_remove_sysfs(struct skl_dev *skl);
+void skl_get_clks(struct skl_dev *skl, struct skl_ssp_clk *ssp_clks);
 struct skl_clk_parent_src *skl_get_parent_clk(u8 clk_id);
-int skl_dsp_set_dma_control(struct skl_sst *ctx, u32 *caps,
+int skl_dsp_set_dma_control(struct skl_dev *skl, u32 *caps,
 				u32 caps_size, u32 node_id);
 
 struct skl_module_cfg;
 
 #ifdef CONFIG_DEBUG_FS
-struct skl_debug *skl_debugfs_init(struct skl *skl);
-void skl_debugfs_exit(struct skl *skl);
+struct skl_debug *skl_debugfs_init(struct skl_dev *skl);
+void skl_debugfs_exit(struct skl_dev *skl);
 void skl_debug_init_module(struct skl_debug *d,
 			struct snd_soc_dapm_widget *w,
 			struct skl_module_cfg *mconfig);
 #else
-static inline struct skl_debug *skl_debugfs_init(struct skl *skl)
+static inline struct skl_debug *skl_debugfs_init(struct skl_dev *skl)
 {
 	return NULL;
 }
 
-static inline void skl_debugfs_exit(struct skl *skl)
+static inline void skl_debugfs_exit(struct skl_dev *skl)
 {}
 
 static inline void skl_debug_init_module(struct skl_debug *d,
-- 
2.17.1

_______________________________________________
Alsa-devel mailing list
Alsa-devel@xxxxxxxxxxxxxxxx
<a  rel="nofollow" href="https://mailman.alsa-project.org/mailman/listinfo/alsa-devel">https://mailman.alsa-project.org/mailman/listinfo/alsa-devel</a>



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div>
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="93535" href="msg93535.html">[PATCH 0/7] ASoC: Intel: Skylake: Driver fundaments	overhaul</a></strong>
<ul><li><em>From:</em> Cezary Rojewski</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg93535.html">[PATCH 0/7] ASoC: Intel: Skylake: Driver fundaments	overhaul</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg93537.html">[PATCH 2/7] ASoC: Intel: Skylake: Combine	snd_soc_skl_ipc and snd_soc_skl</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg93535.html">[PATCH 0/7] ASoC: Intel: Skylake: Driver fundaments	overhaul</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg93537.html">[PATCH 2/7] ASoC: Intel: Skylake: Combine	snd_soc_skl_ipc and snd_soc_skl</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#93536"><strong>Date</strong></a></li>
<li><a href="threads.html#93536"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<center>
<font size=-1>
<a href=/lists/>[Index&nbsp;of&nbsp;Archives]</a>
&nbsp;
&nbsp;
<a href=/linux/fedora/alsa-user/>[ALSA&nbsp;User]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-audio-users/>[Linux&nbsp;Audio&nbsp;Users]</a>
&nbsp;
&nbsp;
<a href=/lists/pulse-audio/>[Pulse&nbsp;Audio]</a>
&nbsp;
&nbsp;
<a href=/lists/kernel/>[Kernel&nbsp;Archive]</a>
&nbsp;
&nbsp;
<a href=/lists/asterisk/>[Asterisk&nbsp;PBX]</a>
&nbsp;
&nbsp;
<a href=http://yosemitephotos.net/>[Photo&nbsp;Sharing]</a>
&nbsp;
&nbsp;
<a href=/linux/fedora/linux-sound/>[Linux&nbsp;Sound]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-media/>[Video&nbsp;4&nbsp;Linux]</a>
&nbsp;
&nbsp;
<a href=/lists/gimp/>[Gimp]</a>
&nbsp;
&nbsp;
<a href=https://yosemitenews.info>[Yosemite&nbsp;News]</a>
</font>
</center>
<hr>
<p>
<div>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-format="autorelaxed"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="1424524564"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<table width=100%>
<tr>
<td align=left>&nbsp;</td>
<td align=right><a href=/lists/><img src=/button_01.gif border=0 alt="Powered by Linux"></a></td>
</tr>
</table>
<!--X-User-Footer-End-->
<script type="text/javascript"> 
 function initAddThis() {
    addthis.init()
 }
initAddThis();
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-760190-1', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
