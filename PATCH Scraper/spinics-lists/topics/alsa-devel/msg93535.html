<!-- MHonArc v2.6.19 -->
<!--X-Subject: [PATCH 0/7] ASoC: Intel: Skylake: Driver fundaments	overhaul -->
<!--X-From-R13: Qrmnel Dbwrjfxv &#60;prmnel.ebwrjfxvNvagry.pbz> -->
<!--X-Date: Thu, 4 Jul 2019 13:02:42 &#45;0700 -->
<!--X-Message-Id: 20190704200106.11289&#45;1&#45;cezary.rojewski@intel.com -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-3422782820843221",
          enable_page_level_ads: true
     });
</script>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="[PATCH 0/7] ASoC: Intel: Skylake: Driver fundaments	overhaul &mdash; ALSA Devel">
<style>
<!--
 pre {white-space: pre-wrap;}
-->
</style>
<title>[PATCH 0/7] ASoC: Intel: Skylake: Driver fundaments	overhaul &mdash; ALSA Devel</title>
<link rel="alternate" type="application/rss+xml" title="ALSA Devel" href="//feedproxy.google.com/AlsaDevel">
</head>
<body itemscope itemtype="//schema.org/Article" vlink=green>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<form action="//www.google.com" id="cse-search-box" target="_blank">
  <div>
    <input type="hidden" name="cx" value="partner-pub-3422782820843221:9580497365" />
    <input type="hidden" name="ie" value="UTF-8" />
    <input type="text" name="q" size="25" />
    <input type="submit" name="sa" value="Search" />
  </div>
</form>
<script type="text/javascript" src="//www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en"></script>
<h1 itemprop="name">[PATCH 0/7] ASoC: Intel: Skylake: Driver fundaments	overhaul</h1>
[<a href="msg93534.html">Date Prev</a>][<a href="msg93536.html">Date Next</a>][<a href="msg93534.html">Thread Prev</a>][<a href="msg93536.html">Thread Next</a>][<a href="maillist.html#93535">Date Index</a>][<a href="threads.html#93535">Thread Index</a>]


<p>&nbsp;<br>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive test for archives -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="6345952567"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: alsa-devel@xxxxxxxxxxxxxxxx</li>
<li><em>Subject</em>: [PATCH 0/7] ASoC: Intel: Skylake: Driver fundaments	overhaul</li>
<li><em>From</em>: Cezary Rojewski &lt;cezary.rojewski@xxxxxxxxx&gt;</li>
<li><em>Date</em>: Thu,  4 Jul 2019 22:00:59 +0200</li>
<li><em>Cc</em>: lgirdwood@xxxxxxxxx, Cezary Rojewski &lt;cezary.rojewski@xxxxxxxxx&gt;,        broonie@xxxxxxxxxx, tiwai@xxxxxxxx,        pierre-louis.bossart@xxxxxxxxxxxxxxx</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_4"></a>
<a class="addthis_button_compact"></a>
<a class="addthis_counter addthis_bubble_style"></a>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5196c2ae1be43d18&async=1&domready=1" async></script>
<!-- AddThis Button END -->
<hr>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive link 1 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="8681825769"
     data-ad-format="link"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>
<div class="content" itemprop="articleBody">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Skylake driver is divided into two modules:
- snd_soc_skl
- snd_soc_skl_ipc

and nothing would be wrong if not for the fact that both cannot exist
without one another. IPC module is not some kind of extension, as it is
the case for snd_hda_ext_core which is separated from snd_hda_core -
legacy hda interface. It's as much core Skylake module as snd_soc_skl
is.

Statement backup by existence of circular dependency between this two.
To eliminate said problem, struct skl_sst has been created. From that
momment, Skylake has been plagued by header errors (incomplete sturcts,
unknown references etc.) whenever something new is to be added or code
is cleaned up.

Fix this flawed design by merging snd_soc_skl and snd_soc_skl_ipc.
Also, do not forget about struct skl_sst redundancy.
Followup changes address harmful assumptions and false logic which
driver currently implements e.g.: attempt to take role of master for
DSP scheduling when in fact entire control takes place in DSP.

Amadeusz S&#x142;awi&#x144;ski (2):
  ASoC: Intel: Skylake: Combine snd_soc_skl_ipc and snd_soc_skl
  ASoC: Intel: Skylake: Do not disable FW notifications

Cezary Rojewski (5):
  ASoC: Intel: Skylake: Merge skl_sst and skl into skl_dev struct
  ASoC: Intel: Skylake: Remove MCPS available check
  ASoC: Intel: Skylake: Remove memory available check
  ASoC: Intel: Skylake: Make MCPS and CPS params obsolete
  ASoC: Intel: Skylake: Cleanup skl_module_cfg declaration

 sound/soc/intel/common/sst-ipc.h        |   1 +
 sound/soc/intel/skylake/Makefile        |  12 +-
 sound/soc/intel/skylake/bxt-sst.c       |  50 +--
 sound/soc/intel/skylake/cnl-sst-dsp.h   |   7 +-
 sound/soc/intel/skylake/cnl-sst.c       |  37 +-
 sound/soc/intel/skylake/skl-debug.c     |  14 +-
 sound/soc/intel/skylake/skl-messages.c  | 245 ++++++-------
 sound/soc/intel/skylake/skl-nhlt.c      |  18 +-
 sound/soc/intel/skylake/skl-pcm.c       |  74 ++--
 sound/soc/intel/skylake/skl-ssp-clk.c   |   4 +-
 sound/soc/intel/skylake/skl-sst-dsp.c   |  10 +-
 sound/soc/intel/skylake/skl-sst-dsp.h   |  29 +-
 sound/soc/intel/skylake/skl-sst-ipc.c   |   8 +-
 sound/soc/intel/skylake/skl-sst-ipc.h   |  52 +--
 sound/soc/intel/skylake/skl-sst-utils.c |  37 +-
 sound/soc/intel/skylake/skl-sst.c       |  51 +--
 sound/soc/intel/skylake/skl-topology.c  | 441 ++++++++----------------
 sound/soc/intel/skylake/skl-topology.h  |  43 +--
 sound/soc/intel/skylake/skl.c           |  54 +--
 sound/soc/intel/skylake/skl.h           | 102 ++++--
 20 files changed, 546 insertions(+), 743 deletions(-)

-- 
2.17.1

_______________________________________________
Alsa-devel mailing list
Alsa-devel@xxxxxxxxxxxxxxxx
<a  rel="nofollow" href="https://mailman.alsa-project.org/mailman/listinfo/alsa-devel">https://mailman.alsa-project.org/mailman/listinfo/alsa-devel</a>



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div>
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="93542" href="msg93542.html">[PATCH 7/7] ASoC: Intel: Skylake: Cleanup	skl_module_cfg declaration</a></strong>
<ul><li><em>From:</em> Cezary Rojewski</li></ul></li>
<li><strong><a name="93541" href="msg93541.html">[PATCH 6/7] ASoC: Intel: Skylake: Make MCPS and CPS	params obsolete</a></strong>
<ul><li><em>From:</em> Cezary Rojewski</li></ul></li>
<li><strong><a name="93540" href="msg93540.html">[PATCH 5/7] ASoC: Intel: Skylake: Do not disable FW	notifications</a></strong>
<ul><li><em>From:</em> Cezary Rojewski</li></ul></li>
<li><strong><a name="93539" href="msg93539.html">[PATCH 4/7] ASoC: Intel: Skylake: Remove memory	available check</a></strong>
<ul><li><em>From:</em> Cezary Rojewski</li></ul></li>
<li><strong><a name="93538" href="msg93538.html">[PATCH 3/7] ASoC: Intel: Skylake: Remove MCPS	available check</a></strong>
<ul><li><em>From:</em> Cezary Rojewski</li></ul></li>
<li><strong><a name="93537" href="msg93537.html">[PATCH 2/7] ASoC: Intel: Skylake: Combine	snd_soc_skl_ipc and snd_soc_skl</a></strong>
<ul><li><em>From:</em> Cezary Rojewski</li></ul></li>
<li><strong><a name="93536" href="msg93536.html">[PATCH 1/7] ASoC: Intel: Skylake: Merge skl_sst and	skl into skl_dev struct</a></strong>
<ul><li><em>From:</em> Cezary Rojewski</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg93534.html">[PATCH v2] ASoC: wcd9335: remove multiple defines.</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg93536.html">[PATCH 1/7] ASoC: Intel: Skylake: Merge skl_sst and	skl into skl_dev struct</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg93534.html">[PATCH v2] ASoC: wcd9335: remove multiple defines.</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg93536.html">[PATCH 1/7] ASoC: Intel: Skylake: Merge skl_sst and	skl into skl_dev struct</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#93535"><strong>Date</strong></a></li>
<li><a href="threads.html#93535"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<center>
<font size=-1>
<a href=/lists/>[Index&nbsp;of&nbsp;Archives]</a>
&nbsp;
&nbsp;
<a href=/linux/fedora/alsa-user/>[ALSA&nbsp;User]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-audio-users/>[Linux&nbsp;Audio&nbsp;Users]</a>
&nbsp;
&nbsp;
<a href=/lists/pulse-audio/>[Pulse&nbsp;Audio]</a>
&nbsp;
&nbsp;
<a href=/lists/kernel/>[Kernel&nbsp;Archive]</a>
&nbsp;
&nbsp;
<a href=/lists/asterisk/>[Asterisk&nbsp;PBX]</a>
&nbsp;
&nbsp;
<a href=http://yosemitephotos.net/>[Photo&nbsp;Sharing]</a>
&nbsp;
&nbsp;
<a href=/linux/fedora/linux-sound/>[Linux&nbsp;Sound]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-media/>[Video&nbsp;4&nbsp;Linux]</a>
&nbsp;
&nbsp;
<a href=/lists/gimp/>[Gimp]</a>
&nbsp;
&nbsp;
<a href=https://yosemitenews.info>[Yosemite&nbsp;News]</a>
</font>
</center>
<hr>
<p>
<div>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-format="autorelaxed"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="1424524564"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<table width=100%>
<tr>
<td align=left>&nbsp;</td>
<td align=right><a href=/lists/><img src=/button_01.gif border=0 alt="Powered by Linux"></a></td>
</tr>
</table>
<!--X-User-Footer-End-->
<script type="text/javascript"> 
 function initAddThis() {
    addthis.init()
 }
initAddThis();
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-760190-1', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
