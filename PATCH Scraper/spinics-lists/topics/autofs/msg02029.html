<!-- MHonArc v2.6.19 -->
<!--X-Subject: Re: [PATCH] Fix NFS mount from IPv6 addresses -->
<!--X-From-R13: Wna Yrag &#60;eniraNgurznj.arg> -->
<!--X-Date: Sat, 12 Jan 2019 17:06:34 &#45;0800 -->
<!--X-Message-Id: f4fe5de51ff91118805a226044eb952141ac41dd.camel@themaw.net -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20190111181808.3tbpeloy7iinp2ic@merlin -->
<!--X-Reference: d03a0e8c59e57dfcb6bc915645dacab598849bd5.camel@themaw.net -->
<!--X-Reference: 20190112151542.oadvvt2t46lwoxnf@merlin -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-3422782820843221",
          enable_page_level_ads: true
     });
</script>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Re: [PATCH] Fix NFS mount from IPv6 addresses &mdash; Linux AutoFS">
<style>
<!--
 pre {white-space: pre-wrap;}
-->
</style>
<title>Re: [PATCH] Fix NFS mount from IPv6 addresses &mdash; Linux AutoFS</title>
<link rel="alternate" type="application/rss+xml" title="Linux AutoFS" href="//feeds.feedburner.com/autofs">
<script type="text/javascript">
var addthis_config = addthis_config||{};
addthis_config.data_track_addressbar = false;
</script>
</head>
<body itemscope itemtype="//schema.org/Article" vlink=green>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<form action="//www.google.com/cse" id="cse-search-box" target="_blank">
  <div>
    <input type="hidden" name="cx" value="partner-pub-3422782820843221:isdiegq275o" />
    <input type="hidden" name="ie" value="ISO-8859-1" />
    <input type="text" name="q" size="37" />
    <input type="submit" name="sa" value="Search" />
  </div>
</form>
<script type="text/javascript" src="//www.google.com/cse/brand?form=cse-search-box&amp;lang=en"></script>
<h1 itemprop="name">Re: [PATCH] Fix NFS mount from IPv6 addresses</h1>
[<a href="msg02028.html">Date Prev</a>][<a href="msg02030.html">Date Next</a>][<a href="msg02028.html">Thread Prev</a>][<a href="msg02030.html">Thread Next</a>][<a href="maillist.html#02029">Date Index</a>][<a href="index.html#02029">Thread Index</a>]


<p>&nbsp;<br>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive test for archives -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="6345952567"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: Goldwyn Rodrigues &lt;rgoldwyn@xxxxxxx&gt;</li>
<li><em>Subject</em>: Re: [PATCH] Fix NFS mount from IPv6 addresses</li>
<li><em>From</em>: Ian Kent &lt;raven@xxxxxxxxxx&gt;</li>
<li><em>Date</em>: Sun, 13 Jan 2019 09:06:25 +0800</li>
<li><em>Cc</em>: autofs@xxxxxxxxxxxxxxx</li>
<li><em>In-reply-to</em>: &lt;20190112151542.oadvvt2t46lwoxnf@merlin&gt;</li>
<li><em>References</em>: &lt;20190111181808.3tbpeloy7iinp2ic@merlin&gt;         &lt;<a href="msg02027.html">d03a0e8c59e57dfcb6bc915645dacab598849bd5.camel@themaw.net</a>&gt;         &lt;20190112151542.oadvvt2t46lwoxnf@merlin&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_4"></a>
<a class="addthis_button_compact"></a>
<a class="addthis_counter addthis_bubble_style"></a>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5196c2ae1be43d18&async=1&domready=1" async></script>
<!-- AddThis Button END -->
<hr>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive link 1 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="8681825769"
     data-ad-format="link"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>
<div class="content" itemprop="articleBody">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>On Sat, 2019-01-12 at 09:15 -0600, Goldwyn Rodrigues wrote:
&gt; On  8:23 12/01, Ian Kent wrote:
&gt; &gt; 
&gt; &gt; &gt; 
&gt; &gt; &gt; However, this would allow mount from &quot;proto=tcp&quot; for an IPv6
&gt; &gt; &gt; addressed server.
&gt; &gt; 
&gt; &gt; This statement is a bit confusing, Isn't this the point of the
&gt; &gt; change?
&gt; &gt; 
&gt; 
&gt; Yes, I was mentioning the side-effects of the patch :)

Yeah, I got that after reading it a couple of times, ;)

Looking at my description for commit 90532146bc I'm not sure
this matters because it says I'm supposed to be checking the
case where proto=(tcp6|udp6) has been specified.

Maybe it would be better to just return success if neither
tcp6 or udp6 has been specified, I'll have another look at
your original patch to see if that's essentially what it
does.

&gt; The other way would be not to set TCP_REQUESTED at all, and
&gt; set it later by returning version from check_address_proto.

I'd rather keep setting this out of the function, I try not
to bury bits like this in called functions.

&gt; 
&gt; I  have another bigger patch [attached] but decided against
&gt; it. It kinda looked too ugly for resolving this. Take your pick ;)

It does look like it's more than should be needed to fix this.

It also looks like it assumes UDP can't be used for NFSv4.

While that's valid I want to try not to impose that restriction
where possible.

&gt; 
&gt; &gt; I need to try and find the reason I added this check in the
&gt; &gt; first place to work out if removing the check could introduce
&gt; &gt; a problem ...
&gt; &gt; 
&gt; &gt; &gt; 
&gt; &gt; &gt; Fixes: 9053214 (&quot;autofs-5.1.3 - fix ipv6 proto option handling&quot;)
&gt; &gt; 
&gt; &gt; Can I have a look at the bug, couldn't find it by searching for
&gt; &gt; it?
&gt; 
&gt; Add this entry in relevant auto file.
&gt; 
&gt; local-dir	-fstype=nfs		[IP:v6:address]:/export-dir/on/server
&gt; 
&gt; and try to access it.

Right, I had already gathered that from the description.

Ian



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div>
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="02030" href="msg02030.html">Re: [PATCH] Fix NFS mount from IPv6 addresses</a></strong>
<ul><li><em>From:</em> Ian Kent</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="02023" href="msg02023.html">[PATCH] Fix NFS mount from IPv6 addresses</a></strong>
<ul><li><em>From:</em> Goldwyn Rodrigues</li></ul></li>
<li><strong><a name="02027" href="msg02027.html">Re: [PATCH] Fix NFS mount from IPv6 addresses</a></strong>
<ul><li><em>From:</em> Ian Kent</li></ul></li>
<li><strong><a name="02028" href="msg02028.html">Re: [PATCH] Fix NFS mount from IPv6 addresses</a></strong>
<ul><li><em>From:</em> Goldwyn Rodrigues</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg02028.html">Re: [PATCH] Fix NFS mount from IPv6 addresses</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg02030.html">Re: [PATCH] Fix NFS mount from IPv6 addresses</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg02028.html">Re: [PATCH] Fix NFS mount from IPv6 addresses</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg02030.html">Re: [PATCH] Fix NFS mount from IPv6 addresses</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#02029"><strong>Date</strong></a></li>
<li><a href="index.html#02029"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<center>
<font size=-1>
<a href=/lists/>[Index&nbsp;of&nbsp;Archives]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-fsdevel/>[Linux&nbsp;Filesystem&nbsp;Development]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-ext4/>[Linux&nbsp;Ext4]</a>
&nbsp;
&nbsp;
<a href=/lists/arm-kernel/>[Linux&nbsp;ARM&nbsp;Kernel]</a>
&nbsp;
&nbsp;
<a href=/lists/arm/>[Linux&nbsp;ARM]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-omap/>[Linux&nbsp;Omap]</a>
&nbsp;
&nbsp;
<a href=/linux/fedora/fedora-arm/>[Fedora&nbsp;ARM]</a>
&nbsp;
&nbsp;
<a href=/lists/ietf-ann/>[IETF&nbsp;Annouce]</a>
&nbsp;
&nbsp;
<a href=/lists/security/>[Security]</a>
&nbsp;
&nbsp;
<a href=/lists/bugtraq/>[Bugtraq]</a>
&nbsp;
&nbsp;
<a href=/linux/>[Linux]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-omap/>[Linux&nbsp;OMAP]</a>
&nbsp;
&nbsp;
<a href=/lists/mips/>[Linux&nbsp;MIPS]</a>
&nbsp;
&nbsp;
<a href=/lists/ecos/>[ECOS]</a>
&nbsp;
&nbsp;
<a href=/lists/asterisk/>[Asterisk&nbsp;Internet&nbsp;PBX]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-api/>[Linux&nbsp;API]</a>
</font>
</center>
<hr>
<p>
<div>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-format="autorelaxed"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="1424524564"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<table width=100%>
<tr>
<td align=left>&nbsp;</td>
<td align=right><a href=/lists/><img src=/button_01.gif border=0 alt="Powered by Linux"></a></td>
</tr>
</table>
<!--X-User-Footer-End-->
<script type="text/javascript"> 
 function initAddThis() {
    addthis.init()
 }
initAddThis();
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-760190-1', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
