<!-- MHonArc v2.6.19 -->
<!--X-Subject: Re: [PATCH 0/3] Assorted autofs fixes -->
<!--X-From-R13: Wna Yrag &#60;eniraNgurznj.arg> -->
<!--X-Date: Mon, 29 Jan 2018 01:27:31 &#45;0800 -->
<!--X-Message-Id: 4401f2a3&#45;5a0b&#45;17d8&#45;6a31&#45;ecc566c4a595@themaw.net -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 151721021295.27355.1968703903360394469.stgit@noble -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-3422782820843221",
          enable_page_level_ads: true
     });
</script>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Re: [PATCH 0/3] Assorted autofs fixes &mdash; Linux AutoFS">
<style>
<!--
 pre {white-space: pre-wrap;}
-->
</style>
<title>Re: [PATCH 0/3] Assorted autofs fixes &mdash; Linux AutoFS</title>
<link rel="alternate" type="application/rss+xml" title="Linux AutoFS" href="//feeds.feedburner.com/autofs">
<script type="text/javascript">
var addthis_config = addthis_config||{};
addthis_config.data_track_addressbar = false;
</script>
</head>
<body itemscope itemtype="//schema.org/Article" vlink=green>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<form action="//www.google.com/cse" id="cse-search-box" target="_blank">
  <div>
    <input type="hidden" name="cx" value="partner-pub-3422782820843221:isdiegq275o" />
    <input type="hidden" name="ie" value="ISO-8859-1" />
    <input type="text" name="q" size="37" />
    <input type="submit" name="sa" value="Search" />
  </div>
</form>
<script type="text/javascript" src="//www.google.com/cse/brand?form=cse-search-box&amp;lang=en"></script>
<h1 itemprop="name">Re: [PATCH 0/3] Assorted autofs fixes</h1>
[<a href="msg01842.html">Date Prev</a>][<a href="msg01844.html">Date Next</a>][<a href="msg01841.html">Thread Prev</a>][<a href="msg01844.html">Thread Next</a>][<a href="maillist.html#01843">Date Index</a>][<a href="index.html#01843">Thread Index</a>]


<p>&nbsp;<br>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive test for archives -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="6345952567"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: NeilBrown &lt;neilb@xxxxxxxx&gt;</li>
<li><em>Subject</em>: Re: [PATCH 0/3] Assorted autofs fixes</li>
<li><em>From</em>: Ian Kent &lt;raven@xxxxxxxxxx&gt;</li>
<li><em>Date</em>: Mon, 29 Jan 2018 17:27:25 +0800</li>
<li><em>Cc</em>: autofs@xxxxxxxxxxxxxxx</li>
<li><em>In-reply-to</em>: &lt;151721021295.27355.1968703903360394469.stgit@noble&gt;</li>
<li><em>References</em>: &lt;151721021295.27355.1968703903360394469.stgit@noble&gt;</li>
<li><em>User-agent</em>: Mozilla/5.0 (X11; Linux x86_64; rv:52.0) Gecko/20100101 Thunderbird/52.5.0</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_4"></a>
<a class="addthis_button_compact"></a>
<a class="addthis_counter addthis_bubble_style"></a>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5196c2ae1be43d18&async=1&domready=1" async></script>
<!-- AddThis Button END -->
<hr>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive link 1 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="8681825769"
     data-ad-format="link"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>
<div class="content" itemprop="articleBody">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>On 29/01/18 15:19, NeilBrown wrote:
&gt; Hi Ian,
&gt;  following are three fixes for the autofs patches.
&gt;  The first is a revised version of a patch were have been
&gt;  discussing that relates to use_hostname_for_mounts.
&gt;  Rather than comparing weight and path and hostname etc to see
&gt;  if two 'struct host' came from the same config-file entry,
&gt;  I thought it would be best to record and index number and
&gt;  just compare that.  Hopefully that makes it more obvious
&gt;  what is happening.

Right, as I say, this was somewhat broken and what you're
recommending is an improvement although I think it doesn't
quite fix the possible problems either.

It's worth applying when it finally arrives.
  
&gt; 
&gt;  The second fixes that monotonic_elapsed() problem we discussed at
&gt;  LCA.  Customer has confirmed that this fixes the problem.

Applied, it's in the queue.

&gt; 
&gt;  The third fixes a small Makefile bug

Yeah, the config files should be backed up but two installs
will cause problems.

Most distribution packaging will want to do that step separately
so it does look like a sensible thing to do.

This is also in my patch queue.

I'm going to need to post the patches for RFC and commit them
fairly soon and possibly another release, there's a deadlock
with the &quot;automount -m&quot; command that needs fixing in 5.1.4.

Thanks Neil.

&gt; 
&gt; Thanks,
&gt; NeilBrown
&gt; 
&gt; 
&gt; ---
&gt; 
&gt; NeilBrown (3):
&gt;       use_hostname_for_mounts shouldn't prevent selection among replicas
&gt;       Fix monotonic_elapsed.
&gt;       Makefiles.rules: remove 'samples' from SUBDIRS
&gt; 
&gt; 
&gt;  Makefile.rules       |    2 +-
&gt;  include/replicated.h |    3 ++-
&gt;  lib/rpc_subs.c       |    4 ++--
&gt;  modules/mount_nfs.c  |    2 +-
&gt;  modules/replicated.c |   35 ++++++++++++++++++++---------------
&gt;  5 files changed, 26 insertions(+), 20 deletions(-)
&gt; 
&gt; --
&gt; Signature
&gt; 

--
To unsubscribe from this list: send the line &quot;unsubscribe autofs&quot; in


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div>
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="01842" href="msg01842.html">[PATCH 0/3] Assorted autofs fixes</a></strong>
<ul><li><em>From:</em> NeilBrown</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg01842.html">[PATCH 0/3] Assorted autofs fixes</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg01844.html">[PATCH 1/3] use_hostname_for_mounts shouldn't prevent selection among replicas</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg01841.html">[PATCH 3/3] Makefiles.rules: remove 'samples' from SUBDIRS</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg01844.html">[PATCH 1/3] use_hostname_for_mounts shouldn't prevent selection among replicas</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#01843"><strong>Date</strong></a></li>
<li><a href="index.html#01843"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<center>
<font size=-1>
<a href=/lists/>[Index&nbsp;of&nbsp;Archives]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-fsdevel/>[Linux&nbsp;Filesystem&nbsp;Development]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-ext4/>[Linux&nbsp;Ext4]</a>
&nbsp;
&nbsp;
<a href=/lists/arm-kernel/>[Linux&nbsp;ARM&nbsp;Kernel]</a>
&nbsp;
&nbsp;
<a href=/lists/arm/>[Linux&nbsp;ARM]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-omap/>[Linux&nbsp;Omap]</a>
&nbsp;
&nbsp;
<a href=/linux/fedora/fedora-arm/>[Fedora&nbsp;ARM]</a>
&nbsp;
&nbsp;
<a href=/lists/ietf-ann/>[IETF&nbsp;Annouce]</a>
&nbsp;
&nbsp;
<a href=/lists/security/>[Security]</a>
&nbsp;
&nbsp;
<a href=/lists/bugtraq/>[Bugtraq]</a>
&nbsp;
&nbsp;
<a href=/linux/>[Linux]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-omap/>[Linux&nbsp;OMAP]</a>
&nbsp;
&nbsp;
<a href=/lists/mips/>[Linux&nbsp;MIPS]</a>
&nbsp;
&nbsp;
<a href=/lists/ecos/>[ECOS]</a>
&nbsp;
&nbsp;
<a href=/lists/asterisk/>[Asterisk&nbsp;Internet&nbsp;PBX]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-api/>[Linux&nbsp;API]</a>
</font>
</center>
<hr>
<p>
<div>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-format="autorelaxed"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="1424524564"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<table width=100%>
<tr>
<td align=left>&nbsp;</td>
<td align=right><a href=/lists/><img src=/button_01.gif border=0 alt="Powered by Linux"></a></td>
</tr>
</table>
<!--X-User-Footer-End-->
<script type="text/javascript"> 
 function initAddThis() {
    addthis.init()
 }
initAddThis();
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-760190-1', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
