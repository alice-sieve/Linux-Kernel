<!-- MHonArc v2.6.19 -->
<!--X-Subject: Re: [PATCH v1 20/50] ARM: dts: exynos: change and rename FSYS OPP table in Exynos5420 -->
<!--X-From-R13: Zhxnfm Zhon &#60;y.yhonNcnegare.fnzfhat.pbz> -->
<!--X-Date: Wed, 17 Jul 2019 03:27:50 &#45;0700 -->
<!--X-Message-Id: 33804835&#45;4003&#45;b86d&#45;62cf&#45;3802fbb91202@partner.samsung.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: CGME20190715124450eucas1p189043d196375aa6adacf898de81bfa9b@eucas1p1.samsung.com -->
<!--X-Reference: 20190715124417.4787&#45;1&#45;l.luba@partner.samsung.com -->
<!--X-Reference: 20190715124417.4787&#45;21&#45;l.luba@partner.samsung.com -->
<!--X-Reference: CAJKOXPfHgmBo9NX6jO8qSqXjN1pFmnKkQEWbou+q7&#45;BDq2XKQg@mail.gmail.com -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-3422782820843221",
          enable_page_level_ads: true
     });
</script>
<style>
<!--
 pre {white-space: pre-wrap;}
-->
</style>
<meta name="description" content="Linux ARM, OMAP, Xscale Kernel: Re: [PATCH v1 20/50] ARM: dts: exynos: change and rename FSYS OPP table in Exynos5420">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Re: [PATCH v1 20/50] ARM: dts: exynos: change and rename FSYS OPP table in Exynos5420 &mdash; ARM, OMAP, Xscale Linux Kernel</title>
<link rel="alternate" type="application/rss+xml" title="Linux ARM Kernel" href="//feedproxy.google.com/LinuxArmKernel">
<link rel="alternate" type="application/rss+xml" title="Linux ARM Kernel" href="//feeds.feedburner.com/LinuxArmxscaleEtc">
<link rel="alternate" type="application/rss+xml" title="Fedora ARM" href="//feeds.feedburner.com/FedoraArm">
<link rel="alternate" type="application/rss+xml" title="Linux for OMAP" href="//feedproxy.google.com/LinuxOmap">
</head>
<body itemscope itemtype="//schema.org/Article" vlink=green>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<td align=right><form action="//www.google.com/cse" id="cse-search-box" target="_blank">
  <div>
    <input type="hidden" name="cx" value="partner-pub-3422782820843221:isdiegq275o" />
    <input type="hidden" name="ie" value="ISO-8859-1" />
    <input type="text" name="q" size="37" />
    <input type="submit" name="sa" value="Search" />
  </div>
</form>
<script type="text/javascript" src="//www.google.com/cse/brand?form=cse-search-box&amp;lang=en" async></script>
<h1 itemprop="name">Re: [PATCH v1 20/50] ARM: dts: exynos: change and rename FSYS OPP table in Exynos5420</h1>
[<a href="msg741546.html">Date Prev</a>][<a href="msg741548.html">Date Next</a>][<a href="msg741511.html">Thread Prev</a>][<a href="msg741148.html">Thread Next</a>][<a href="maillist.html#741547">Date Index</a>][<a href="threads.html#741547">Thread Index</a>] 
<p>&nbsp;<br>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive test for archives -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="6345952567"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>Subject</em>: Re: [PATCH v1 20/50] ARM: dts: exynos: change and rename FSYS OPP table in Exynos5420</li>
<li><em>From</em>: Lukasz Luba &lt;l.luba@xxxxxxxxxxxxxxxxxxx&gt;</li>
<li><em>Date</em>: Wed, 17 Jul 2019 12:04:45 +0200</li>
<li><em>Cms-type</em>: 201P</li>
<li><em>In-reply-to</em>: &lt;<a href="msg741511.html">CAJKOXPfHgmBo9NX6jO8qSqXjN1pFmnKkQEWbou+q7-BDq2XKQg@mail.gmail.com</a>&gt;</li>
<li><em>User-agent</em>: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101 Thunderbird/60.7.1</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_4"></a>
<a class="addthis_button_compact"></a>
<a class="addthis_counter addthis_bubble_style"></a>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5196c2ae1be43d18&async=1&domready=1" async></script>
<!-- AddThis Button END -->
<hr>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive link 1 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="8681825769"
     data-ad-format="link"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<div class="content" itemprop="articleBody">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Hi Krzysztof,

On 7/17/19 10:39 AM, Krzysztof Kozlowski wrote:
&gt;<i> On Mon, 15 Jul 2019 at 14:44, Lukasz Luba &lt;l.luba@xxxxxxxxxxxxxxxxxxx&gt; wrote:</i>
&gt;<i>&gt;</i>
&gt;<i>&gt; The FSYS and FSYS2 buses have similar characteristics and both have max</i>
&gt;<i>&gt; frequency 240MHz. The old OPP table bus_fsys_apb_opp_table should be used</i>
&gt;<i>&gt; only to FSYS APB bus because APB max frequency is 200MHz.</i>
&gt;<i>&gt; The new OPPs for FSYS should increase its performance and related devices.</i>
&gt;<i> </i>
&gt;<i> I do not understand the explanation. You say that there are two buses</i>
&gt;<i> - FSYS and FSYS2 - and old OPP table should be used for FSYS APB but</i>
&gt;<i> you remove the old one (by renaming). Or which one is the 'old one'</i>
&gt;<i> here? The reason is speed... wait, what? Usually DTS should describe</i>
&gt;<i> the HW so I imagine that proper opp table should be used for proper</i>
&gt;<i> bus. It surprised me that we switch a bus to different OPP table just</i>
&gt;<i> because of speed concerns. It should be correctness concern.</i>
&gt;<i> </i>
&gt;<i> Please clarify and reword all this.</i>
&gt;<i> </i>
&gt;<i> I am also not sure how this relates with previous patch - whether you</i>
&gt;<i> are fixing independent issues. Maybe because I do not see the issue</i>
&gt;<i> fixed... change the commit title and adjust the messages to focus WHY</i>
&gt;<i> you are doing it. For small fixes WHAT you are doing is rather obvious</i>
&gt;<i> so commit msg (and title) should not focus on it.</i>

I don't know how familiar you are with AMBA standard or general concept
of NoC, so I am not sure if the explanation below would be sufficient.
There are 3 buses: FSYS, FSYS2, FSYS APB. The first two are connecting
AXI Slave/Master interfaces of the IP blocks. They are dedicated to
transfer the data i.e. to MMC block using 128 bit bus width and 240MHz
clock. The 3rd is dedicated for accessing peripheral registers -
connecting to IP block interfaces called APB3 slave.
As I mentioned in the comment the FSYS and FSYS2 are able to run faster
than the APB bus.
Thus, changing the old implementation which pinned FSYS and FSYS APB
to the same OPP table is wrong. The right connection made by OPP
reference should be FSYS and FSYS2 with also 240MHz max freq inside.

I have discussed offline with Bartek and I will squash DT patches to
an atomic-change-with-OPPs-and-PLL-rate-for-all-children, with more
detailed comment in the commit message describing the old state and the
new one.

Thank you for the review.

Regards,
Lukasz

&gt;<i> </i>
&gt;<i> Best regards,</i>
&gt;<i> Krzysztof</i>
&gt;<i> </i>
&gt;<i>&gt;</i>
&gt;<i>&gt; Signed-off-by: Lukasz Luba &lt;l.luba@xxxxxxxxxxxxxxxxxxx&gt;</i>
&gt;<i>&gt; ---</i>
&gt;<i>&gt;   arch/arm/boot/dts/exynos5420.dtsi | 6 +++---</i>
&gt;<i>&gt;   1 file changed, 3 insertions(+), 3 deletions(-)</i>
&gt;<i>&gt;</i>
&gt;<i>&gt; diff --git a/arch/arm/boot/dts/exynos5420.dtsi b/arch/arm/boot/dts/exynos5420.dtsi</i>
&gt;<i>&gt; index 941c58bdd809..c7fc4b829b2a 100644</i>
&gt;<i>&gt; --- a/arch/arm/boot/dts/exynos5420.dtsi</i>
&gt;<i>&gt; +++ b/arch/arm/boot/dts/exynos5420.dtsi</i>
&gt;<i>&gt; @@ -995,7 +995,7 @@</i>
&gt;<i>&gt;                          compatible = &quot;samsung,exynos-bus&quot;;</i>
&gt;<i>&gt;                          clocks = &lt;&amp;clock CLK_DOUT_ACLK200_FSYS&gt;;</i>
&gt;<i>&gt;                          clock-names = &quot;bus&quot;;</i>
&gt;<i>&gt; -                       operating-points-v2 = &lt;&amp;bus_fsys_apb_opp_table&gt;;</i>
&gt;<i>&gt; +                       operating-points-v2 = &lt;&amp;bus_fsys_opp_table&gt;;</i>
&gt;<i>&gt;                          status = &quot;disabled&quot;;</i>
&gt;<i>&gt;                  };</i>
&gt;<i>&gt;</i>
&gt;<i>&gt; @@ -1003,7 +1003,7 @@</i>
&gt;<i>&gt;                          compatible = &quot;samsung,exynos-bus&quot;;</i>
&gt;<i>&gt;                          clocks = &lt;&amp;clock CLK_DOUT_ACLK200_FSYS2&gt;;</i>
&gt;<i>&gt;                          clock-names = &quot;bus&quot;;</i>
&gt;<i>&gt; -                       operating-points-v2 = &lt;&amp;bus_fsys2_opp_table&gt;;</i>
&gt;<i>&gt; +                       operating-points-v2 = &lt;&amp;bus_fsys_opp_table&gt;;</i>
&gt;<i>&gt;                          status = &quot;disabled&quot;;</i>
&gt;<i>&gt;                  };</i>
&gt;<i>&gt;</i>
&gt;<i>&gt; @@ -1157,7 +1157,7 @@</i>
&gt;<i>&gt;                          };</i>
&gt;<i>&gt;                  };</i>
&gt;<i>&gt;</i>
&gt;<i>&gt; -               bus_fsys2_opp_table: opp_table5 {</i>
&gt;<i>&gt; +               bus_fsys_opp_table: opp_table5 {</i>
&gt;<i>&gt;                          compatible = &quot;operating-points-v2&quot;;</i>
&gt;<i>&gt;</i>
&gt;<i>&gt;                          opp00 {</i>
&gt;<i>&gt; --</i>
&gt;<i>&gt; 2.17.1</i>
&gt;<i>&gt;</i>
&gt;<i> </i>
&gt;<i> </i>

_______________________________________________
linux-arm-kernel mailing list
linux-arm-kernel@xxxxxxxxxxxxxxxxxxx
<a  rel="nofollow" href="http://lists.infradead.org/mailman/listinfo/linux-arm-kernel">http://lists.infradead.org/mailman/listinfo/linux-arm-kernel</a>


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div>
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="741103" href="msg741103.html">[PATCH v1 00/50] Exynos5x clocks and buses changes</a></strong>
<ul><li><em>From:</em> Lukasz Luba</li></ul></li>
<li><strong><a name="741147" href="msg741147.html">[PATCH v1 20/50] ARM: dts: exynos: change and rename FSYS OPP table in Exynos5420</a></strong>
<ul><li><em>From:</em> Lukasz Luba</li></ul></li>
<li><strong><a name="741511" href="msg741511.html">Re: [PATCH v1 20/50] ARM: dts: exynos: change and rename FSYS OPP table in Exynos5420</a></strong>
<ul><li><em>From:</em> Krzysztof Kozlowski</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg741546.html">Re: [PATCH v1 26/50] ARM: dts: exynos: align NOC100 bus OPPs in Exynos5420</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg741548.html">Re: [PATCH v1 26/50] ARM: dts: exynos: align NOC100 bus OPPs in Exynos5420</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg741511.html">Re: [PATCH v1 20/50] ARM: dts: exynos: change and rename FSYS OPP table in Exynos5420</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg741148.html">[PATCH v1 27/50] ARM: dts: exynos: align bus_wcore OPPs in Exynos5420</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#741547"><strong>Date</strong></a></li>
<li><a href="threads.html#741547"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<center>
<font size=-1>
<a href=/lists/>[Index&nbsp;of&nbsp;Archives]</a>
&nbsp;
&nbsp;
<a href=/lists/kernel/>[Linux&nbsp;Kernel]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-arm/>[Linux&nbsp;ARM&nbsp;(vger)]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-arm-msm/>[Linux&nbsp;ARM&nbsp;MSM]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-omap/>[Linux&nbsp;Omap]</a>
&nbsp;
&nbsp;
<a href=/lists/centos-arm-devel/>[CentOS&nbsp;ARM]</a>
&nbsp;
&nbsp;
<a href=/lists/arm/>[Linux&nbsp;Arm]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-tegra/>[Linux&nbsp;Tegra]</a>
&nbsp;
&nbsp;
<a href=/linux/fedora/fedora-arm/>[Fedora&nbsp;ARM]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-samsung-soc/>[Linux&nbsp;for&nbsp;Samsung&nbsp;SOC]</a>
&nbsp;
&nbsp;
<a href=/lists/ecos/>[eCos]</a>
&nbsp;
&nbsp;
<a href=/lists/fastboot/>[Linux&nbsp;Fastboot]</a>
&nbsp;
&nbsp;
<a href=/lists/gcchelp/>[Gcc&nbsp;Help]</a>
&nbsp;
&nbsp;
<a href=/lists/git/>[Git]</a>
&nbsp;
&nbsp;
<a href=/lists/dccp/>[DCCP]</a>
&nbsp;
&nbsp;
<a href=/lists/ietf-ann>[IETF&nbsp;Announce]</a>
&nbsp;
&nbsp;
<a href=/lists/security/>[Security]</a>
&nbsp;
&nbsp;
<a href=/lists/mips/>[Linux&nbsp;MIPS]</a>
</font>
</center>
<hr>
<p>
<div>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-format="autorelaxed"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="1424524564"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<table width=100%>
<tr>
<td align=left>&nbsp;</td>
<td align=right><a href=/lists/><img src=/button_01.gif border=0 alt="Powered by Linux"></a></td>
</tr>
</table>
<!--X-User-Footer-End-->
<script type="text/javascript"> 
 function initAddThis() {
    addthis.init()
 }

initAddThis();
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-760190-1', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
