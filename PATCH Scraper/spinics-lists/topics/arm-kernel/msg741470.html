<!-- MHonArc v2.6.19 -->
<!--X-Subject: [PATCH] ARM: dts: ux500: Fix up the thermal nodes -->
<!--X-From-R13: Zvahf Inyyrvw &#60;yvahf.jnyyrvwNyvaneb.bet> -->
<!--X-Date: Tue, 16 Jul 2019 23:44:38 &#45;0700 -->
<!--X-Message-Id: 20190717064225.7695&#45;1&#45;linus.walleij@linaro.org -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-3422782820843221",
          enable_page_level_ads: true
     });
</script>
<style>
<!--
 pre {white-space: pre-wrap;}
-->
</style>
<meta name="description" content="Linux ARM, OMAP, Xscale Kernel: [PATCH] ARM: dts: ux500: Fix up the thermal nodes">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>[PATCH] ARM: dts: ux500: Fix up the thermal nodes &mdash; ARM, OMAP, Xscale Linux Kernel</title>
<link rel="alternate" type="application/rss+xml" title="Linux ARM Kernel" href="//feedproxy.google.com/LinuxArmKernel">
<link rel="alternate" type="application/rss+xml" title="Linux ARM Kernel" href="//feeds.feedburner.com/LinuxArmxscaleEtc">
<link rel="alternate" type="application/rss+xml" title="Fedora ARM" href="//feeds.feedburner.com/FedoraArm">
<link rel="alternate" type="application/rss+xml" title="Linux for OMAP" href="//feedproxy.google.com/LinuxOmap">
</head>
<body itemscope itemtype="//schema.org/Article" vlink=green>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<td align=right><form action="//www.google.com/cse" id="cse-search-box" target="_blank">
  <div>
    <input type="hidden" name="cx" value="partner-pub-3422782820843221:isdiegq275o" />
    <input type="hidden" name="ie" value="ISO-8859-1" />
    <input type="text" name="q" size="37" />
    <input type="submit" name="sa" value="Search" />
  </div>
</form>
<script type="text/javascript" src="//www.google.com/cse/brand?form=cse-search-box&amp;lang=en" async></script>
<h1 itemprop="name">[PATCH] ARM: dts: ux500: Fix up the thermal nodes</h1>
[<a href="msg741469.html">Date Prev</a>][<a href="msg741471.html">Date Next</a>][<a href="msg741467.html">Thread Prev</a>][<a href="msg741486.html">Thread Next</a>][<a href="maillist.html#741470">Date Index</a>][<a href="threads.html#741470">Thread Index</a>] 
<p>&nbsp;<br>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive test for archives -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="6345952567"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>Subject</em>: [PATCH] ARM: dts: ux500: Fix up the thermal nodes</li>
<li><em>From</em>: Linus Walleij &lt;linus.walleij@xxxxxxxxxx&gt;</li>
<li><em>Date</em>: Wed, 17 Jul 2019 08:42:25 +0200</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_4"></a>
<a class="addthis_button_compact"></a>
<a class="addthis_counter addthis_bubble_style"></a>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5196c2ae1be43d18&async=1&domready=1" async></script>
<!-- AddThis Button END -->
<hr>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive link 1 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="8681825769"
     data-ad-format="link"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<div class="content" itemprop="articleBody">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>The thermal driver for the DB8500 was never properly converted
to device tree, the node should definately be activated for
all board variants so move this down into the main SoC
DTSI and and default on.

Signed-off-by: Linus Walleij &lt;linus.walleij@xxxxxxxxxx&gt;
---
 arch/arm/boot/dts/ste-dbx5x0.dtsi  | 22 +++++++++++++++++++++-
 arch/arm/boot/dts/ste-snowball.dts | 29 -----------------------------
 2 files changed, 21 insertions(+), 30 deletions(-)

diff --git a/arch/arm/boot/dts/ste-dbx5x0.dtsi b/arch/arm/boot/dts/ste-dbx5x0.dtsi
index 339da70d4e83..90dcbc3a29c3 100644
--- a/arch/arm/boot/dts/ste-dbx5x0.dtsi
+++ b/arch/arm/boot/dts/ste-dbx5x0.dtsi
@@ -505,10 +505,30 @@
 			thermal@801573c0 {
 				compatible = &quot;stericsson,db8500-thermal&quot;;
 				reg = &lt;0x801573c0 0x40&gt;;
+				interrupt-parent = &lt;&amp;prcmu&gt;;
 				interrupts = &lt;21 IRQ_TYPE_LEVEL_HIGH&gt;,
 					     &lt;22 IRQ_TYPE_LEVEL_HIGH&gt;;
 				interrupt-names = &quot;IRQ_HOTMON_LOW&quot;, &quot;IRQ_HOTMON_HIGH&quot;;
-				status = &quot;disabled&quot;;
+				num-trips = &lt;4&gt;;
+
+				trip0-temp = &lt;70000&gt;;
+				trip0-type = &quot;active&quot;;
+				trip0-cdev-num = &lt;1&gt;;
+				trip0-cdev-name0 = &quot;thermal-cpufreq-0&quot;;
+
+				trip1-temp = &lt;75000&gt;;
+				trip1-type = &quot;active&quot;;
+				trip1-cdev-num = &lt;1&gt;;
+				trip1-cdev-name0 = &quot;thermal-cpufreq-0&quot;;
+
+				trip2-temp = &lt;80000&gt;;
+				trip2-type = &quot;active&quot;;
+				trip2-cdev-num = &lt;1&gt;;
+				trip2-cdev-name0 = &quot;thermal-cpufreq-0&quot;;
+
+				trip3-temp = &lt;85000&gt;;
+				trip3-type = &quot;critical&quot;;
+				trip3-cdev-num = &lt;0&gt;;
 			};
 
 			db8500-prcmu-regulators {
diff --git a/arch/arm/boot/dts/ste-snowball.dts b/arch/arm/boot/dts/ste-snowball.dts
index 3428290644ba..064e8abec954 100644
--- a/arch/arm/boot/dts/ste-snowball.dts
+++ b/arch/arm/boot/dts/ste-snowball.dts
@@ -376,40 +376,11 @@
 			pinctrl-0 = &lt;&amp;ssp0_snowball_mode&gt;;
 		};
 
-		cpufreq-cooling {
-			status = &quot;okay&quot;;
-		};
-
 		prcmu@80157000 {
 			cpufreq {
 				status = &quot;okay&quot;;
 			};
 
-			thermal@801573c0 {
-				num-trips = &lt;4&gt;;
-
-				trip0-temp = &lt;70000&gt;;
-				trip0-type = &quot;active&quot;;
-				trip0-cdev-num = &lt;1&gt;;
-				trip0-cdev-name0 = &quot;thermal-cpufreq-0&quot;;
-
-				trip1-temp = &lt;75000&gt;;
-				trip1-type = &quot;active&quot;;
-				trip1-cdev-num = &lt;1&gt;;
-				trip1-cdev-name0 = &quot;thermal-cpufreq-0&quot;;
-
-				trip2-temp = &lt;80000&gt;;
-				trip2-type = &quot;active&quot;;
-				trip2-cdev-num = &lt;1&gt;;
-				trip2-cdev-name0 = &quot;thermal-cpufreq-0&quot;;
-
-				trip3-temp = &lt;85000&gt;;
-				trip3-type = &quot;critical&quot;;
-				trip3-cdev-num = &lt;0&gt;;
-
-				status = &quot;okay&quot;;
-			};
-
 			ab8500 {
 				ab8500-gpio {
 					/*
-- 
2.21.0


_______________________________________________
linux-arm-kernel mailing list
linux-arm-kernel@xxxxxxxxxxxxxxxxxxx
<a  rel="nofollow" href="http://lists.infradead.org/mailman/listinfo/linux-arm-kernel">http://lists.infradead.org/mailman/listinfo/linux-arm-kernel</a>


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div>
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg741469.html">Re: [PATCH v5 13/15] ARM: dts: imx6sll: correct sdma compatible</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg741471.html">[PATCH RFC v2 1/2] devfreq: mt8183-cci: using cpu based scaling passive_governor</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg741467.html">[PATCH] ARM: ux500: Stop populating the PRCMU devices early</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg741486.html">[PATCH v4 0/9] arm_pmu: Use NMI for perf interrupt</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#741470"><strong>Date</strong></a></li>
<li><a href="threads.html#741470"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<center>
<font size=-1>
<a href=/lists/>[Index&nbsp;of&nbsp;Archives]</a>
&nbsp;
&nbsp;
<a href=/lists/kernel/>[Linux&nbsp;Kernel]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-arm/>[Linux&nbsp;ARM&nbsp;(vger)]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-arm-msm/>[Linux&nbsp;ARM&nbsp;MSM]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-omap/>[Linux&nbsp;Omap]</a>
&nbsp;
&nbsp;
<a href=/lists/centos-arm-devel/>[CentOS&nbsp;ARM]</a>
&nbsp;
&nbsp;
<a href=/lists/arm/>[Linux&nbsp;Arm]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-tegra/>[Linux&nbsp;Tegra]</a>
&nbsp;
&nbsp;
<a href=/linux/fedora/fedora-arm/>[Fedora&nbsp;ARM]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-samsung-soc/>[Linux&nbsp;for&nbsp;Samsung&nbsp;SOC]</a>
&nbsp;
&nbsp;
<a href=/lists/ecos/>[eCos]</a>
&nbsp;
&nbsp;
<a href=/lists/fastboot/>[Linux&nbsp;Fastboot]</a>
&nbsp;
&nbsp;
<a href=/lists/gcchelp/>[Gcc&nbsp;Help]</a>
&nbsp;
&nbsp;
<a href=/lists/git/>[Git]</a>
&nbsp;
&nbsp;
<a href=/lists/dccp/>[DCCP]</a>
&nbsp;
&nbsp;
<a href=/lists/ietf-ann>[IETF&nbsp;Announce]</a>
&nbsp;
&nbsp;
<a href=/lists/security/>[Security]</a>
&nbsp;
&nbsp;
<a href=/lists/mips/>[Linux&nbsp;MIPS]</a>
</font>
</center>
<hr>
<p>
<div>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-format="autorelaxed"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="1424524564"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<table width=100%>
<tr>
<td align=left>&nbsp;</td>
<td align=right><a href=/lists/><img src=/button_01.gif border=0 alt="Powered by Linux"></a></td>
</tr>
</table>
<!--X-User-Footer-End-->
<script type="text/javascript"> 
 function initAddThis() {
    addthis.init()
 }

initAddThis();
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-760190-1', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
