<!-- MHonArc v2.6.19 -->
<!--X-Subject: Re:  [PATCH] CreateBonding while periodic scanning -->
<!--X-From-R13: "Vrfgba Xnzrf &#45; Qbyq Prnaf" &#60;urfgba.wnzrfNpbyqornaf.pb.hx> -->
<!--X-Date: Fri, 11 Jul 2008 01:14:33 &#45;0700 -->
<!--X-Message-Id: 00de01c8e32e$213a9fb0$63afdf10$@james@coldbeans.co.uk -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 486BD582.9050004@aircable.net -->
<!--X-Reference: 1215757212.9744.13.camel@californication -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-3422782820843221",
          enable_page_level_ads: true
     });
</script>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Bluez Devel: Re:  [PATCH] CreateBonding while periodic scanning">
<style>
<!--
 pre {white-space: pre-wrap;}
-->
</style>
<title>Re:  [PATCH] CreateBonding while periodic scanning &mdash; Bluez Devel</title>
<link rel="alternate" type="application/rss+xml" title="Bluez Devel" href="maillist.rdf">
</head>
<body itemscope itemtype="//schema.org/Article" vlink=green>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<form action="//www.google.com" id="cse-search-box" target="_blank">
  <div>
    <input type="hidden" name="cx" value="partner-pub-3422782820843221:9580497365" />
    <input type="hidden" name="ie" value="UTF-8" />
    <input type="text" name="q" size="55" />
    <input type="submit" name="sa" value="Search" />
  </div>
</form>
<script type="text/javascript" src="//www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en"></script>
<h1 itemprop="name">Re:  [PATCH] CreateBonding while periodic scanning</h1>
[<a href="msg00421.html">Date Prev</a>][<a href="msg00423.html">Date Next</a>][<a href="msg00420.html">Thread Prev</a>][<a href="msg00424.html">Thread Next</a>][<a href="maillist.html#00422">Date Index</a>][<a href="index.html#00422">Thread Index</a>]


<p>&nbsp;<br>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive test for archives -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="6345952567"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>Subject</em>: Re:  [PATCH] CreateBonding while periodic scanning</li>
<li><em>From</em>: &quot;Heston James - Cold Beans&quot; &lt;<a href="mailto:heston.james@DOMAIN.HIDDEN">heston.james@xxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Fri, 11 Jul 2008 09:14:24 +0100</li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:1215757212.9744.13.camel@DOMAIN.HIDDEN"><a href="msg00420.html">1215757212.9744.13.camel@californication</a></a>&gt;</li>
<li><em>References</em>: &lt;<a href="mailto:486BD582.9050004@DOMAIN.HIDDEN">486BD582.9050004@xxxxxxxxxxxx</a>&gt;	&lt;<a href="mailto:1215757212.9744.13.camel@DOMAIN.HIDDEN"><a href="msg00420.html">1215757212.9744.13.camel@californication</a></a>&gt;</li>
<li><em>Reply-to</em>: BlueZ development &lt;<a href="mailto:bluez-devel@DOMAIN.HIDDEN">bluez-devel@xxxxxxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Thread-index</em>: AcjjHcR6ZACTm3hnQhqnaxlzrIZJGgADuB+A</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_4"></a>
<a class="addthis_button_compact"></a>
<a class="addthis_counter addthis_bubble_style"></a>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5196c2ae1be43d18&async=1&domready=1" defer async></script>
<!-- AddThis Button END -->
<hr>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive link 1 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="8681825769"
     data-ad-format="link"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>
<div class="content" itemprop="articleBody">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Hi Manuel, good to see you mate.

&gt;<i>&gt; I've sent this patch before, but for some reason I didn't got either a </i>
&gt;<i>&gt; positive or even negative response.</i>
&gt;<i>&gt; </i>
&gt;<i>&gt; Problem is like this, when we're doing a periodic scan we should be able </i>
&gt;<i>&gt; to do bonding, but according to the code we can't, so then something is </i>
&gt;<i>&gt; wrong, either we can't do periodic scanning, or we need to fix a bug.</i>
&gt;<i> </i>
&gt;<i> so in general you should be able to create an ACL link when even in</i>
&gt;<i> inquiry phase. So in theory it should stop periodic inquiry and then</i>
&gt;<i> create the ACL link and then continue. We might have hit some chip</i>
&gt;<i> limitations here and this is why it was there. I removed it since it low</i>
&gt;<i> risk. No so many applications use periodic inquiry :)</i>

I've experienced this very same behaviour in the past and was always
concerned that it was me using the mainloop inappropriately, I'm glad to see
other people find the same issue.

When using period inquiry, it would seem that if I perform any other form of
operation, such as an SDP enquiry, or creating an RFCOMM connection it halts
the current 'period' of scanning and it doesn't start again until the start
of the next 'period'.

This does cause a fair amount of frustration as it means if you're sdping
nearby remote device as you find them that you're only ever really dealing
with 1 remote device per scan period which is very inefficient.

I've noticed the exact same behaviour with a standard inquiry scan too, as
soon as attempting to perform one of these other operations whilst scanning
the scan stops and the 'discoverycomplete()' signal is emmited.

Manuel, I'm interested in the patch and will look at applying it to my local
working copy to see how it behaves for me.

Marcel, Are you saying that this issue cannot be resolved by a patch and is
a chip limitation? Is there likely to be any fix for this?

Marcel, for those of us that need a periodic enquiry, would you advocate the
use of our own internal standard inquiry loops that restart a scan when
discoverycomplete() signal is emitted? Or is this likely to crash the bluez
deamon by putting too much strain on it?

Heston


-------------------------------------------------------------------------
Sponsored by: SourceForge.net Community Choice Awards: VOTE NOW!
Studies have shown that voting for your favorite open source project,
along with a healthy diet, reduces your potential for chronic lameness
and boredom. Vote Now at <a  rel="nofollow" href="http://www.sourceforge.net/community/cca08">http://www.sourceforge.net/community/cca08</a>
_______________________________________________
Bluez-devel mailing list
Bluez-devel@xxxxxxxxxxxxxxxxxxxxx
<a  rel="nofollow" href="https://lists.sourceforge.net/lists/listinfo/bluez-devel">https://lists.sourceforge.net/lists/listinfo/bluez-devel</a>
</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div>
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00424" href="msg00424.html">Re:  [PATCH] CreateBonding while periodic scanning</a></strong>
<ul><li><em>From:</em> Marcel Holtmann</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00392" href="msg00392.html">[PATCH] CreateBonding while periodic scanning</a></strong>
<ul><li><em>From:</em> Manuel Naranjo</li></ul></li>
<li><strong><a name="00420" href="msg00420.html">Re:  [PATCH] CreateBonding while periodic scanning</a></strong>
<ul><li><em>From:</em> Marcel Holtmann</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00421.html">Re:  bccmd(csr_bcsp.c) bug Report</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00423.html">Re:  [PATCH] Add support for Texas Instruments' chips</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00420.html">Re:  [PATCH] CreateBonding while periodic scanning</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00424.html">Re:  [PATCH] CreateBonding while periodic scanning</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00422"><strong>Date</strong></a></li>
<li><a href="index.html#00422"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<center>
<font size=-1>
<a href=/lists/>[Index&nbsp;of&nbsp;Archives]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-bluetooth/>[Linux&nbsp;Bluetooth&nbsp;Devel]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-usb/>[Linux&nbsp;USB&nbsp;Devel]</a>
&nbsp;
&nbsp;
<a href=/lists/netdev/>[Network&nbsp;Devel]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-audio-users/>[Linux&nbsp;Audio&nbsp;Users]</a>
&nbsp;
&nbsp;
<a href=https://yosemitenews.info/>[Yosemite&nbsp;News]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-scsi/>[Linux&nbsp;SCSI]</a>
</font>
</center>
<hr>
<p>
<div>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-format="autorelaxed"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="1424524564"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<table width=100%>
<tr>
<td align=left>&nbsp;</td>
<td align=right><a href=/lists/><img src=/button_01.gif border=0 alt="Powered by Linux"></a></td>
</tr>
</table>
<!--X-User-Footer-End-->
<script type="text/javascript"> 
 function initAddThis() {
    addthis.init()
 }
initAddThis();
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-760190-1', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
