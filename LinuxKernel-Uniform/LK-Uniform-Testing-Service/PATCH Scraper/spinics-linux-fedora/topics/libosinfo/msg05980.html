<!-- MHonArc v2.6.19 -->
<!--X-Subject: [osinfo&#45;db&#45;tools PATCH v2 00/16] Add support to meson	build system -->
<!--X-From-R13: =?GFT&#45;8?d?Tnovnab=20Tvq=Q3=OOapvb?= &#60;svqrapvbNerqung.pbz> -->
<!--X-Date: Tue, 9 Jul 2019 03:47:59 &#45;0700 -->
<!--X-Message-Id: 20190709104744.16516&#45;1&#45;fidencio@redhat.com -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-3422782820843221",
          enable_page_level_ads: true
     });
</script>
<title>[osinfo-db-tools PATCH v2 00/16] Add support to meson	build system &mdash; libosinfo</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="libosinfo: [osinfo-db-tools PATCH v2 00/16] Add support to meson	build system">
<style>
<!--
 pre {white-space: pre-wrap;}
-->
</style>
<link rel="alternate" type="application/rss+xml" title="libosinfo" href="//feeds.feedburner.com/libosinfo">
</head>
<body itemscope itemtype="//schema.org/Article" vlink=green>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<form action="//www.google.com" id="cse-search-box" target="_blank">
  <div>
    <input type="hidden" name="cx" value="partner-pub-3422782820843221:9580497365" />
    <input type="hidden" name="ie" value="UTF-8" />
    <input type="text" name="q" size="25" />
    <input type="submit" name="sa" value="Search" />
  </div>
</form>
<script type="text/javascript" src="//www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en"></script>
<h1 itemprop="name">[osinfo-db-tools PATCH v2 00/16] Add support to meson	build system</h1>
[<a href="msg05979.html">Date Prev</a>][<a href="msg05981.html">Date Next</a>][<a href="msg05976.html">Thread Prev</a>][<a href="msg05979.html">Thread Next</a>][<a href="maillist.html#05980">Date Index</a>][<a href="index.html#05980">Thread Index</a>]


<p>&nbsp;<br>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive test for archives -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="6345952567"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>Subject</em>: [osinfo-db-tools PATCH v2 00/16] Add support to meson	build system</li>
<li><em>From</em>: Fabiano Fid&#xEA;ncio &lt;fidencio@xxxxxxxxxx&gt;</li>
<li><em>Date</em>: Tue,  9 Jul 2019 12:47:28 +0200</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_4"></a>
<a class="addthis_button_compact"></a>
<a class="addthis_counter addthis_bubble_style"></a>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5196c2ae1be43d18&async=1&domready=1" async></script>
<!-- AddThis Button END -->
<hr>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive link 1 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="8681825769"
     data-ad-format="link"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>
<div class="content" itemprop="articleBody">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>The following patch series:
- Add suppor to meson build system;
- Drop support to autotools build system;

If we decide to go for it, there's still work to be done in
libvirt-jenkins-ci as it has to have meson support added there.

Changes since v1:
<a  rel="nofollow" href="https://www.redhat.com/archives/libosinfo/2019-June/msg00063.html">https://www.redhat.com/archives/libosinfo/2019-June/msg00063.html</a>
- Improve commit message in the patch dropping config.h
- Some cleanups on cfg.mk were done;
  - In order to do so, a patch indentng includes/defines in util.h
    was needed;
- Updated maint.mk in order to avoid doing de s/$(SED)/sed hack;
- Added the .spec files to the generated tarball;
- Don't purge the git checkout, just delete the build dir when
  running `./prepare-release`;
- Moved GNUmakefile, cfg.mk, and maint.mk to build-aux dir;
- Introduced a new patch dropping the non-valid configure options,
  as it makes clear that we're not removing them just because we
  are switching to meson;

A few points that still have to be considered:
- meson version in the major distros:
  - Fedora 29 - 0.50.0
  - Fedora 30 - 0.50.1
  - Debian 9 - 0.37.1
  - Debian 10 - 0.49.2
  - OpenSUSE 15.1 - 0.51.0
  - Ubuntu 18.04 - 0.45.1-2
  - Ubuntu 18.10 - 0.47.2
  - Ubuntu 19.04 - 0.49.0
  - FreeBSD - 0.51.0
    - This is what internet returns me as part of devel/meson
  - CentOS 7 - not present
    - EPEL: 0.47.2
  If we do the switch, we'd stop building on:
  - Debian 9 &amp; older;
  - Ubuntu 18.10 &amp; older;
  - EL 7 &amp; older;

  For osinfo-db-tools, I truly believe it's not a big deal, as it'd
  be for more important packages (as libvirt).

- meson support on libvirt-jenkins-ci:
  - I'll happily work on that before having these patches merged!

- a last release with autotools:
  - I'd like to have a last release with autotools, including some
    patches that are still pending review (as the ones using libsoup
    instead of gvfs);

- can we have a more generic/simplified version of GNUmakefile &amp;
  friends?
  - That would take me some considerable amount of time to do and,
    although I'm not discarding this for the future, it's not something
    I'd like to consider for now.

Fabiano Fid&#xEA;ncio (16):
  tests: Unset OSINFO_LOCAL_DIR envvar
  util: Indent includes/defines
  cfg.mk: Remove exclude_file_name_regexp--sc_preprocessor_indentation
  cfg.mk: Remove exclude_file_name_regexp--sc_prohibit_strcmp
  cfg.mk: Remove exclude_file_name_regexp--sc_bindtextdomain
  maint.mk: Update to the latest gnulib version
  tools: Don't import config.h
  Add support to meson build system
  spec: Adapt to use meson
  prepare-release: Remove non-valid configure options
  prepare-release: Adapt to use meson
  Drop autotools support
  Support `make syntax-check` without Makefile
  Move files needed for `make syntax-check` to build-aux
  meson: Add ninja syntax-check
  prepare-release: Add `ninja syntax-check`

 Makefile.am                          |  48 ----
 GNUmakefile =&gt; build-aux/GNUmakefile |  32 +--
 cfg.mk =&gt; build-aux/cfg.mk           |  11 +-
 build-aux/dist.sh                    |  11 +
 maint.mk =&gt; build-aux/maint.mk       | 411 +++++++++++++++++----------
 build-aux/mktempd                    | 135 ---------
 build-aux/syntax-check               |   5 +
 configure.ac                         |  89 ------
 docs/Makefile.am                     |   2 -
 m4/libosinfo-compile-warnings.m4     | 135 ---------
 m4/manywarnings.m4                   | 245 ----------------
 m4/warnings.m4                       |  79 -----
 meson.build                          | 221 ++++++++++++++
 mingw-osinfo-db-tools.spec.in        |  14 +-
 osinfo-db-tools.spec.in              |  17 +-
 po/Makevars                          |  78 -----
 po/meson.build                       |   2 +
 prepare-release.sh                   |  84 ++----
 tests/Makefile.am                    |  30 --
 tests/meson.build                    |  21 ++
 tests/test_osinfo_db_path.py         |   4 +-
 tools/Makefile.am                    |  53 ----
 tools/meson.build                    |  97 +++++++
 tools/osinfo-db-export.c             |   2 -
 tools/osinfo-db-import.c             |   2 -
 tools/osinfo-db-path.c               |   2 -
 tools/osinfo-db-util.c               |   2 -
 tools/osinfo-db-util.h               |   6 +-
 tools/osinfo-db-validate.c           |   2 -
 29 files changed, 665 insertions(+), 1175 deletions(-)
 delete mode 100644 Makefile.am
 rename GNUmakefile =&gt; build-aux/GNUmakefile (85%)
 rename cfg.mk =&gt; build-aux/cfg.mk (94%)
 create mode 100755 build-aux/dist.sh
 rename maint.mk =&gt; build-aux/maint.mk (83%)
 delete mode 100755 build-aux/mktempd
 create mode 100755 build-aux/syntax-check
 delete mode 100644 configure.ac
 delete mode 100644 docs/Makefile.am
 delete mode 100644 m4/libosinfo-compile-warnings.m4
 delete mode 100644 m4/manywarnings.m4
 delete mode 100644 m4/warnings.m4
 create mode 100644 meson.build
 delete mode 100644 po/Makevars
 create mode 100644 po/meson.build
 delete mode 100644 tests/Makefile.am
 create mode 100644 tests/meson.build
 delete mode 100644 tools/Makefile.am
 create mode 100644 tools/meson.build

-- 
2.21.0

_______________________________________________
Libosinfo mailing list
Libosinfo@xxxxxxxxxx
<a  rel="nofollow" href="https://www.redhat.com/mailman/listinfo/libosinfo">https://www.redhat.com/mailman/listinfo/libosinfo</a>



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div>
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg05979.html">[osinfo-db-tools PATCH v2 01/16] tests: Unset	OSINFO_LOCAL_DIR envvar</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg05981.html">[osinfo-db-tools PATCH v2 02/16] util: Indent	includes/defines</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg05976.html">[libosinfo PATCH v2 0/2] Do not expose user &amp; admin	password in the command line</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg05979.html">[osinfo-db-tools PATCH v2 01/16] tests: Unset	OSINFO_LOCAL_DIR envvar</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#05980"><strong>Date</strong></a></li>
<li><a href="index.html#05980"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<center>
<font size=-1>
<a href=/lists/>[Index&nbsp;of&nbsp;Archives]</a>
&nbsp;
&nbsp;
<a href=/lists/virt-tools/>[Virt&nbsp;Tools]</a>
&nbsp;
&nbsp;
<a href=/linux/fedora/libvirt-users/>[Libvirt&nbsp;Users]</a>
&nbsp;
&nbsp;
<a href=/linux/fedora/fedora-users/>[Fedora&nbsp;Users]</a>
&nbsp;
&nbsp;
<a href=/linux/fedora/fedora-maintainers/>[Fedora&nbsp;Maintainers]</a>
&nbsp;
&nbsp;
<a href=/lists/fedora-desktop/>[Fedora&nbsp;Desktop]</a>
&nbsp;
&nbsp;
<a href=/lists/fedora-selinux/>[Fedora&nbsp;SELinux]</a>
&nbsp;
&nbsp;
<a href=http://www.ske-art.com/z/biglist.html>[Big&nbsp;List&nbsp;of&nbsp;Linux&nbsp;Books]</a>
&nbsp;
&nbsp;
<a href=https://yosemitenews.info>[Yosemite&nbsp;News]</a>
&nbsp;
&nbsp;
<a href=/lists/kde/>[KDE&nbsp;Users]</a>
</font>
</center>
<p>
<div>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-format="autorelaxed"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="1424524564"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<table width=100%>
<tr>
<td align=left>&nbsp;</td>
<td align=right><a href=/lists/><img src=/button_01.gif border=0 alt="Powered by Linux"></a></td>
</tr>
</table>
<!--X-User-Footer-End-->
<script type="text/javascript"> 
 function initAddThis() {
    addthis.init()
 }
initAddThis();
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-760190-1', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
