<!-- MHonArc v2.6.19 -->
<!--X-Subject: Re:  [PATCH] Port utility functions to Solaris -->
<!--X-From-R13: Qbyr Dbovafba &#60;pebovafbNerqung.pbz> -->
<!--X-Date: Tue, 9 Dec 2008 14:13:10 &#45;0800 -->
<!--X-Message-Id: 493EED71.4070504@redhat.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 29d8886362e2993eaf26.1228855430@xenbld.SFBay.Sun.COM -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-3422782820843221",
          enable_page_level_ads: true
     });
</script>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Fedora Management Tools, Re:  [PATCH] Port utility functions to Solaris">
<style>
<!--
 pre {white-space: pre-wrap;}
-->
</style>
<link rel="alternate" type="application/rss+xml" title="Fedora Management Tools" href="//feedproxy.google.com/Fedora/linuxManagementTools">
<title>Fedora Management Tools -- Re:  [PATCH] Port utility functions to Solaris</title>
</head>
<body vlink=green>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<form action="//www.google.com" id="cse-search-box" target="_blank">
  <div>
    <input type="hidden" name="cx" value="partner-pub-3422782820843221:9580497365" />
    <input type="hidden" name="ie" value="UTF-8" />
    <input type="text" name="q" size="25" />
    <input type="submit" name="sa" value="Search" />
  </div>
</form>
<script type="text/javascript" src="//www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en"></script>
<h1 itemprop="name">Re:  [PATCH] Port utility functions to Solaris</h1>
[<a href="msg04514.html">Date Prev</a>][<a href="msg04516.html">Date Next</a>][<a href="msg04510.html">Thread Prev</a>][<a href="msg04516.html">Thread Next</a>][<a href="maillist.html#04515">Date Index</a>][<a href="index.html#04515">Thread Index</a>]


<p>&nbsp;<br>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive test for archives -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="6345952567"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>Subject</em>: Re:  [PATCH] Port utility functions to Solaris</li>
<li><em>From</em>: Cole Robinson &lt;<a href="mailto:crobinso@DOMAIN.HIDDEN">crobinso@xxxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Tue, 09 Dec 2008 17:13:05 -0500</li>
<li><em>Cc</em>: John Levon &lt;<a href="mailto:john.levon@DOMAIN.HIDDEN">john.levon@xxxxxxx</a>&gt;</li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:29d8886362e2993eaf26.1228855430@DOMAIN.HIDDEN">29d8886362e2993eaf26.1228855430@xxxxxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>References</em>: &lt;<a href="mailto:29d8886362e2993eaf26.1228855430@DOMAIN.HIDDEN">29d8886362e2993eaf26.1228855430@xxxxxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Reply-to</em>: Fedora/Linux Management Tools &lt;<a href="mailto:et-mgmt-tools@DOMAIN.HIDDEN">et-mgmt-tools@xxxxxxxxxx</a>&gt;</li>
<li><em>User-agent</em>: Thunderbird 2.0.0.18 (X11/20081119)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_4"></a>
<a class="addthis_button_compact"></a>
<a class="addthis_counter addthis_bubble_style"></a>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5196c2ae1be43d18&async=1&domready=1" async></script>
<!-- AddThis Button END -->
<hr>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive link 1 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="8681825769"
     data-ad-format="link"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>
<div class="content" itemprop="articleBody">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>john.levon@xxxxxxx wrote:
&gt; # HG changeset patch
&gt; # User john.levon@xxxxxxx
&gt; # Date 1228851891 28800
&gt; # Node ID 29d8886362e2993eaf26cf8d4e948b2de4b8d9ec
&gt; # Parent  3a48e2d3594b3e7e1d24147f3325ab6024557504
&gt; Port utility functions to Solaris
&gt; 

Hmm, 90% of this patch is a huge mechanical change which has nothing
to do with this commit subject. I think it's better to separate
the two changes.

&gt; Create _util.py for private details of the implementation, along with a
&gt; shim for back compatibility.
&gt; 
&gt; Port the utilities to Solaris.
&gt; 
&gt; Signed-off-by: John Levon &lt;john.levon@xxxxxxx&gt;
&gt; 
&gt; diff --git a/virtinst/CloneManager.py b/virtinst/CloneManager.py
&gt; --- a/virtinst/CloneManager.py
&gt; +++ b/virtinst/CloneManager.py
&gt; @@ -23,7 +23,7 @@ import libxml2
&gt;  import libxml2
&gt;  import logging
&gt;  import urlgrabber.progress as progress
&gt; -import util
&gt; +import _util

Rather than s/util/_util/ everywhere, I'd prefer:

import _util as util

Lot less churn, and the only potential downside is confusion
browsing the source, but I don't think it's a problem.

&lt;snip&gt;

&gt; diff --git a/virtinst/util.py b/virtinst/util.py
&gt; --- a/virtinst/util.py
&gt; +++ b/virtinst/util.py
&gt; @@ -1,5 +1,3 @@
&gt; -#
&gt; -# Utility functions used for guest installation
&gt;  #
&gt;  # Copyright 2006  Red Hat, Inc.
&gt;  # Jeremy Katz &lt;katzj@xxxxxxxxxx&gt;
&gt; @@ -19,107 +17,60 @@
&gt;  # Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston,
&gt;  # MA 02110-1301 USA.
&gt;  
&gt; +#
&gt; +# WARNING: this file sadly forms part of the public API. Do not add
&gt; +# anything to this file! The file for internal utility functions is
&gt; +# _util.py
&gt; +#
&gt; +
&gt;  import platform
&gt; -import random
&gt; -import os.path
&gt; -import re
&gt; -import libxml2
&gt; -import logging
&gt; -from sys import stderr
&gt; +import os
&gt;  
&gt; -import libvirt
&gt; -from virtinst import _virtinst as _
&gt; -from virtinst import CapabilitiesParser
&gt; +from virtinst import _util
&gt;  
&gt;  
&gt;  KEYBOARD_DIR = &quot;/etc/sysconfig/keyboard&quot;
&gt;  XORG_CONF = &quot;/etc/X11/xorg.conf&quot;
&gt;  
&gt; -def default_route():
&gt; -    route_file = &quot;/proc/net/route&quot;
&gt; -    d = file(route_file)
&gt; +default_route = _util.default_route
&gt; +default_bridge = _util.default_bridge
&gt; +default_network = _util.default_network
&gt; +default_connection = _util.default_connection
&gt; +get_cpu_flags = _util.get_cpu_flags
&gt; +is_pae_capable = _util.is_pae_capable
&gt; +is_blktap_capable = _util.is_blktap_capable
&gt; +get_default_arch = _util.get_default_arch
&gt; +randomMAC = _util.randomMAC
&gt; +randomUUID = _util.randomUUID
&gt; +uuidToString = _util.uuidToString
&gt; +uuidFromString = _util.uuidFromString
&gt; +get_host_network_devices = _util.get_host_network_devices
&gt; +get_max_vcpus = _util.get_max_vcpus
&gt; +get_phy_cpus = _util.get_phy_cpus
&gt; +xml_escape = _util.xml_escape
&gt; +compareMAC = _util.compareMAC
&gt; +default_keymap = _util.default_keymap
&gt; +pygrub_path = _util.pygrub_path
&gt; +uri_split = _util.uri_split
&gt; +is_uri_remote = _util.is_uri_remote
&gt; +get_uri_hostname = _util.get_uri_hostname
&gt; +get_uri_transport = _util.get_uri_transport
&gt; +get_uri_driver = _util.get_uri_driver
&gt; +is_storage_capable = _util.is_storage_capable
&gt; +get_xml_path = _util.get_xml_path
&gt; +lookup_pool_by_path = _util.lookup_pool_by_path
&gt; +privileged_user = _util.privileged_user
&gt;  

Hmm, this isn't exactly how I saw it happening. I figured we would have
_util be for nonpublic functions only: we can change or remove anything
in that file at will. The original 'util' though needs to maintain api
compat for its functions, even if they are deprecated and left to rot.

That would mean 'util' would stay the same. '_util' would have whatever
new functions you are adding, and the equivalent of the above block of
code. Anyone needing a utility function for just the library will add
it to _util, and if we ever want to make a private utility public,
just move it to 'util'.

Am I missing some benefit of the above approach? Or are we just on
different pages? (My intention really isn't to be a pest :) )

Thanks,
Cole

_______________________________________________
et-mgmt-tools mailing list
et-mgmt-tools@xxxxxxxxxx
<a  rel="nofollow" href="https://www.redhat.com/mailman/listinfo/et-mgmt-tools">https://www.redhat.com/mailman/listinfo/et-mgmt-tools</a>
</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div>
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="04516" href="msg04516.html">Re:  [PATCH] Port utility functions to Solaris</a></strong>
<ul><li><em>From:</em> John Levon</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="04510" href="msg04510.html">[PATCH] Port utility functions to Solaris</a></strong>
<ul><li><em>From:</em> john . levon</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg04514.html">Re:  [PATCH] Fix get_graphics()</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg04516.html">Re:  [PATCH] Port utility functions to Solaris</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg04510.html">[PATCH] Port utility functions to Solaris</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg04516.html">Re:  [PATCH] Port utility functions to Solaris</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#04515"><strong>Date</strong></a></li>
<li><a href="index.html#04515"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<center>
<font size=-1>
<a href=/lists/>[Index&nbsp;of&nbsp;Archives]</a>
&nbsp;
&nbsp;
<a href=/linux/fedora/fedora-users/>[Fedora&nbsp;Users]</a>
&nbsp;
&nbsp;
<a href=/lists/fll/>[Fedora&nbsp;Legacy&nbsp;List]</a>
&nbsp;
&nbsp;
<a href=/linux/fedora/fedora-maintainers/>[Fedora&nbsp;Maintainers]</a>
&nbsp;
&nbsp;
<a href=/lists/fedora-desktop/>[Fedora&nbsp;Desktop]</a>
&nbsp;
&nbsp;
<a href=/lists/fedora-selinux/>[Fedora&nbsp;SELinux]</a>
&nbsp;
&nbsp;
<a href=http://www.ske-art.com/z/biglist.html>[Big&nbsp;List&nbsp;of&nbsp;Linux&nbsp;Books]</a>
&nbsp;
&nbsp;
<a href=https://yosemitenews.info>[Yosemite&nbsp;News]</a>
&nbsp;
&nbsp;
<a href=/lists/kde/>[KDE&nbsp;Users]</a>
&nbsp;
&nbsp;
<a href=/lists/fedora-tools/>[Fedora&nbsp;Tools]</a>
</font>
</center>
<hr>
<p>
<div>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-format="autorelaxed"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="1424524564"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<table width=100%>
<tr>
<td align=left>&nbsp;</td>
<td align=right><a href=/lists/><img src=/button_01.gif border=0 alt="Powered by Linux"></a></td>
</tr>
</table>
<!--X-User-Footer-End-->
<script type="text/javascript"> 
 function initAddThis() {
    addthis.init()
 }
initAddThis();
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-760190-1', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
