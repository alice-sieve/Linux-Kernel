<!-- MHonArc v2.6.19 -->
<!--X-Subject: Re:  [PATCH v2] crash: dis: introduce count in reverse and forward mode -->
<!--X-From-R13: Oneba Fbzyva &#60;ngbzyvaNerqung.pbz> -->
<!--X-Date: Fri, 21 Jun 2019 10:37:27 &#45;0700 -->
<!--X-Message-Id: 20190621173646.j6ancwghilwpw6br@atomlin.usersys.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20190620235733.2489&#45;1&#45;atomlin@redhat.com -->
<!--X-Reference: 105587844.30749385.1561131929269.JavaMail.zimbra@redhat.com -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-3422782820843221",
          enable_page_level_ads: true
     });
</script>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Re:  [PATCH v2] crash: dis: introduce count in reverse and forward mode &mdash; Red Hat Crash Utility">
<style>
<!--
 pre {white-space: pre-wrap;}
-->
</style>
<title>Red Hat Crash Utility &mdash;  Re:  [PATCH v2] crash: dis: introduce count in reverse and forward mode</title>
<link rel="alternate" type="application/rss+xml" title="Red Hat Crash Utility" href="//feeds.feedburner.com/RedHatCrashUtility">
</head>
<body itemscope itemtype="//schema.org/Article" vlink=green>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<form action="//www.google.com" id="cse-search-box" target="_blank">
  <div>
    <input type="hidden" name="cx" value="partner-pub-3422782820843221:9580497365" />
    <input type="hidden" name="ie" value="UTF-8" />
    <input type="text" name="q" size="25" />
    <input type="submit" name="sa" value="Search" />
  </div>
</form>
<script type="text/javascript" src="//www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en"></script>
<h1 itemprop="name">Re:  [PATCH v2] crash: dis: introduce count in reverse and forward mode</h1>
[<a href="msg07791.html">Date Prev</a>][<a href="msg07793.html">Date Next</a>][<a href="msg07791.html">Thread Prev</a>][<a href="msg07793.html">Thread Next</a>][<a href="maillist.html#07792">Date Index</a>][<a href="index.html#07792">Thread Index</a>]


<p>&nbsp;<br>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive test for archives -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="6345952567"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>Subject</em>: Re:  [PATCH v2] crash: dis: introduce count in reverse and forward mode</li>
<li><em>From</em>: Aaron Tomlin &lt;atomlin@xxxxxxxxxx&gt;</li>
<li><em>Date</em>: Fri, 21 Jun 2019 18:36:46 +0100</li>
<li><em>In-reply-to</em>: &lt;<a href="msg07791.html">105587844.30749385.1561131929269.JavaMail.zimbra@redhat.com</a>&gt;</li>
<li><em>Reply-to</em>: &quot;Discussion list for crash utility usage,	maintenance and development&quot; &lt;crash-utility@xxxxxxxxxx&gt;</li>
<li><em>User-agent</em>: NeoMutt/20180716-1637-ee8449</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_4"></a>
<a class="addthis_button_compact"></a>
<a class="addthis_counter addthis_bubble_style"></a>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5196c2ae1be43d18&async=1&domready=1" defer async></script>
<!-- AddThis Button END -->
<hr>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive link 1 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="8681825769"
     data-ad-format="link"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>
<div class="content" itemprop="articleBody">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>On Fri 2019-06-21 11:45 -0400, Dave Anderson wrote:
&gt;<i> </i>
&gt;<i> </i>
&gt;<i> ----- Original Message -----</i>
&gt;<i> &gt; Changes since v1:</i>
&gt;<i> &gt; </i>
&gt;<i> &gt;  - Update 'dis' help page</i>
&gt;<i> &gt;  - Resolve patch fuzz</i>
&gt;<i> &gt; </i>
&gt;<i> &gt; </i>
&gt;<i> &gt; The purpose of this patch is to add support for a count value in reverse</i>
&gt;<i> &gt; or forward mode, during disassembly:</i>
&gt;<i> &gt; </i>
&gt;<i> &gt; 	'dis [-r|-f] [symbol|address] [count]'</i>
&gt;<i> &gt; </i>
&gt;<i> &gt; For example:</i>
&gt;<i> &gt; </i>
&gt;<i> &gt;   crash&gt; dis -f list_del+0x16 4</i>
&gt;<i> &gt;   0xffffffff812b3346 &lt;list_del+22&gt;:       jne    0xffffffff812b3381  &lt;list_del+81&gt;</i>
&gt;<i> &gt;   0xffffffff812b3348 &lt;list_del+24&gt;:       mov    (%rbx),%rax</i>
&gt;<i> &gt;   0xffffffff812b334b &lt;list_del+27&gt;:       mov    0x8(%rax),%r8</i>
&gt;<i> &gt;   0xffffffff812b334f &lt;list_del+31&gt;:       cmp    %r8,%rbx</i>
&gt;<i> &gt; </i>
&gt;<i> &gt;   crash&gt; dis -r list_del+0x16 4</i>
&gt;<i> &gt;   0xffffffff812b333c &lt;list_del+12&gt;:       mov    0x8(%rdi),%rax</i>
&gt;<i> &gt;   0xffffffff812b3340 &lt;list_del+16&gt;:       mov    (%rax),%r8</i>
&gt;<i> &gt;   0xffffffff812b3343 &lt;list_del+19&gt;:       cmp    %r8,%rdi</i>
&gt;<i> &gt;   0xffffffff812b3346 &lt;list_del+22&gt;:       jne    0xffffffff812b3381  &lt;list_del+81&gt;</i>
[ ... ]

Hi Dave,

&gt;<i> To be honest, it's not clear how that can be addressed, because any patches</i>
&gt;<i> to printcmd.c must be applicable to the non-ppc64le and the ppc64le versions</i>
&gt;<i> of the file. </i>

Unfortunately, I believe this is the underlying issue.
I did not compile test under ppc64le.

&gt;<i> So let's take a step back, and consider the risk/reward of this quite intrusive</i>
&gt;<i> patchset to such a crucial gdb file.</i>

In my opinion and if I understand correctly, the original GDB commit
bb556f1facb (&quot;Add negative repeat count to 'x' command&quot;) is rather
self-contained and should not cause an issue. I was particularly careful in
this regard. Moving forward, I could strip out all but absolutely necessary
changes from the original GDB commit, to support this feature.

&gt;<i> First, &quot;dis -f &lt;address&gt; &lt;count&gt;&quot; is pretty much meaningless.  In order</i>
&gt;<i> to accomplish that, just don't use the &quot;-f&quot; argument! </i>

I agree - this is superficial; count in forward mode was added since
reverse mode also accepts a count.

&gt;<i> Secondly, for &quot;dis -r &lt;address&gt; count&quot;, you could simply run &quot;dis -r &lt;address&gt; | tail -4&quot;.</i>
&gt;<i> For that matter, is it really all that onerous to see the fully disassembled function</i>
&gt;<i> up to the target address?</i>

Personally, I would prefer to avoid using an external command in this
particular case. Especially since the GDB command examine supports a
positive or negative (i.e. in GDB release 7.12 and above) count.

&gt;<i> And again, even if you wanted to support it, it also seems like it could be accomplished</i>
&gt;<i> within the cmd_dis() function, given that the full output is pre-gathered into a tmpfile</i>
&gt;<i> prior to being displayed.  </i>

We can indeed but it would be easier to utilise GDB for this as explained above.

If you don't mind another iteration, I'll attempt to address the above
build issues. Please let me know your thoughts.


Kind regards,

-- 
Aaron Tomlin

--
Crash-utility mailing list
Crash-utility@xxxxxxxxxx
<a  rel="nofollow" href="https://www.redhat.com/mailman/listinfo/crash-utility">https://www.redhat.com/mailman/listinfo/crash-utility</a>


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div>
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="07793" href="msg07793.html">Re:  [PATCH v2] crash: dis: introduce count in reverse and forward mode</a></strong>
<ul><li><em>From:</em> Dave Anderson</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="07787" href="msg07787.html">[PATCH v2] crash: dis: introduce count in reverse	and forward mode</a></strong>
<ul><li><em>From:</em> Aaron Tomlin</li></ul></li>
<li><strong><a name="07791" href="msg07791.html">Re:  [PATCH v2] crash: dis: introduce count in reverse and forward mode</a></strong>
<ul><li><em>From:</em> Dave Anderson</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg07791.html">Re:  [PATCH v2] crash: dis: introduce count in reverse and forward mode</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg07793.html">Re:  [PATCH v2] crash: dis: introduce count in reverse and forward mode</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg07791.html">Re:  [PATCH v2] crash: dis: introduce count in reverse and forward mode</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg07793.html">Re:  [PATCH v2] crash: dis: introduce count in reverse and forward mode</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#07792"><strong>Date</strong></a></li>
<li><a href="index.html#07792"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<center>
<font size=-1>
<a href=/lists/>[Index&nbsp;of&nbsp;Archives]</a>
&nbsp;
&nbsp;
<a href=/lists/fedora-devel/>[Fedora&nbsp;Development]</a>
&nbsp;
&nbsp;
<a href=/lists/fedora-desktop/>[Fedora&nbsp;Desktop]</a>
&nbsp;
&nbsp;
<a href=/lists/fedora-selinux/>[Fedora&nbsp;SELinux]</a>
&nbsp;
&nbsp;
<a href=https://yosemitenews.info>[Yosemite&nbsp;News]</a>
&nbsp;
&nbsp;
<a href=/lists/kde/>[KDE&nbsp;Users]</a>
&nbsp;
&nbsp;
<a href=/lists/fedora-tools/>[Fedora&nbsp;Tools]</a>
</font>
</center>
<hr>
<p>
<div>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-format="autorelaxed"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="1424524564"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<table width="100%">
<tr>
<td align=left>&nbsp;</td>
<td valign=top align=right><H1><a href=/lists/><img src=/button_01.gif border=0 alt="Powered by Linux"></a></H1></td>
</tr></table>
<!--X-User-Footer-End-->
<script type="text/javascript"> 
 function initAddThis() {
    addthis.init()
 }
initAddThis();
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-760190-1', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
