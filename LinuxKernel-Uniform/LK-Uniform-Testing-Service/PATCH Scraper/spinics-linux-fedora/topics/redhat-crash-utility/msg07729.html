<!-- MHonArc v2.6.19 -->
<!--X-Subject: Re:  [PATCH 0/4] Add support to extract hardware device dumps from vmcore -->
<!--X-From-R13: Rnir Oaqrefba &#60;naqrefbaNerqung.pbz> -->
<!--X-Date: Thu, 18 Apr 2019 13:41:51 &#45;0700 -->
<!--X-Message-Id: 777040385.17393850.1555620105470.JavaMail.zimbra@redhat.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: cover.1555587451.git.surendra@chelsio.com -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-3422782820843221",
          enable_page_level_ads: true
     });
</script>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Re:  [PATCH 0/4] Add support to extract hardware device dumps from vmcore &mdash; Red Hat Crash Utility">
<style>
<!--
 pre {white-space: pre-wrap;}
-->
</style>
<title>Red Hat Crash Utility &mdash;  Re:  [PATCH 0/4] Add support to extract hardware device dumps from vmcore</title>
<link rel="alternate" type="application/rss+xml" title="Red Hat Crash Utility" href="//feeds.feedburner.com/RedHatCrashUtility">
</head>
<body itemscope itemtype="//schema.org/Article" vlink=green>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<form action="//www.google.com" id="cse-search-box" target="_blank">
  <div>
    <input type="hidden" name="cx" value="partner-pub-3422782820843221:9580497365" />
    <input type="hidden" name="ie" value="UTF-8" />
    <input type="text" name="q" size="25" />
    <input type="submit" name="sa" value="Search" />
  </div>
</form>
<script type="text/javascript" src="//www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en"></script>
<h1 itemprop="name">Re:  [PATCH 0/4] Add support to extract hardware device dumps from vmcore</h1>
[<a href="msg07728.html">Date Prev</a>][<a href="msg07730.html">Date Next</a>][<a href="msg07721.html">Thread Prev</a>][<a href="msg07733.html">Thread Next</a>][<a href="maillist.html#07729">Date Index</a>][<a href="index.html#07729">Thread Index</a>]


<p>&nbsp;<br>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive test for archives -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="6345952567"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>Subject</em>: Re:  [PATCH 0/4] Add support to extract hardware device dumps from vmcore</li>
<li><em>From</em>: Dave Anderson &lt;anderson@xxxxxxxxxx&gt;</li>
<li><em>Date</em>: Thu, 18 Apr 2019 16:41:45 -0400 (EDT)</li>
<li><em>Cc</em>: nirranjan@xxxxxxxxxxx, indranil@xxxxxxxxxxx, crash-utility@xxxxxxxxxx</li>
<li><em>In-reply-to</em>: &lt;<a href="msg07720.html">cover.1555587451.git.surendra@chelsio.com</a>&gt;</li>
<li><em>Reply-to</em>: &quot;Discussion list for crash utility usage,	maintenance and development&quot; &lt;crash-utility@xxxxxxxxxx&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_4"></a>
<a class="addthis_button_compact"></a>
<a class="addthis_counter addthis_bubble_style"></a>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5196c2ae1be43d18&async=1&domready=1" defer async></script>
<!-- AddThis Button END -->
<hr>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive link 1 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="8681825769"
     data-ad-format="link"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>
<div class="content" itemprop="articleBody">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>
Hi Surendra,

This version looks good.  I've been testing it today, and have tinkered
around with a few minor things:

  1. Added vmcore.h to the Makefile for compile-dependency purposes.
  2. Removed the requirement for the &quot;-r&quot; option, allowing just the file name
     as an argument.
  3. When dumping to the screen using the default -v output, the count argument
     needs to be divided by the sizeof(uint64_t).
  4. Tightened up the -V output format a bit.
  5. Simplified the error handling, and made the error messages more common.
  6. Moved the new vmcore_data structure entries to the end of the structure 
     just to prevent any possible backwards-compatibility issues with any
     previously-build extension modules that use netdump.h.
  7. Fixed up the help page.

There's also a couple &quot;make warn&quot; warnings when building a 32-bit binary
that I'll look into.

Anyway, there's no need to repost anything, but since I'll be out of the
office until next Tuesday, I'm just letting you know that it should be good
to go and checked in by early next week.

Nice job,
  Dave 


----- Original Message -----
&gt;<i> When kernel panic happens and kdump crash kernel is loaded, device</i>
&gt;<i> drivers enabled in the kdump crash kernel collect device specific</i>
&gt;<i> snapshot of the hardware/firmware state of their underlying devices.</i>
&gt;<i> These snapshots are exported as ELF notes with note type NT_VMCOREDD</i>
&gt;<i> (i.e., 0x700) in vmcore [1].</i>
&gt;<i> </i>
&gt;<i> This series of patches enhance crash utility to analyze and</i>
&gt;<i> extract these hardware specific device dumps from vmcore using</i>
&gt;<i> &quot;dev&quot; command.</i>
&gt;<i> </i>
&gt;<i> Patches 1 and 2 enhance help -D to parse NT_VMCOREDD ELF notes</i>
&gt;<i> in ELF vmcore and KDUMP vmcore, respectively.</i>
&gt;<i> </i>
&gt;<i> Patches 3 and 4 enhance dev command to analyze and extract</i>
&gt;<i> hardware specific device dumps from ELF vmcore and KDUMP vmcore,</i>
&gt;<i> respectively.</i>
&gt;<i> </i>
&gt;<i> Suggestions and feedback will be much appreciated.</i>
&gt;<i> </i>
&gt;<i> Thanks,</i>
&gt;<i> Surendra</i>
&gt;<i> </i>
&gt;<i> [1] <a  rel="nofollow" href="https://lkml.org/lkml/2018/5/2/190">https://lkml.org/lkml/2018/5/2/190</a></i>
&gt;<i> </i>
&gt;<i> ---</i>
&gt;<i> rfc:</i>
&gt;<i> - Moved logic to extract device dumps from &quot;devdump&quot; to &quot;dev&quot; command,</i>
&gt;<i>   in patches 3 and 4.</i>
&gt;<i> - By default, device dumps are output to screen as hexdump, if output</i>
&gt;<i>   file is not provided.</i>
&gt;<i> </i>
&gt;<i> Surendra Mobiya (4):</i>
&gt;<i>   parse NT_VMCOREDD ELF notes in ELF vmcore</i>
&gt;<i>   parse NT_VMCOREDD ELF notes in KDUMP vmcore</i>
&gt;<i>   enhance dev command to extract NT_VMCOREDD from ELF vmcore</i>
&gt;<i>   enhance dev command to extract NT_VMCOREDD from KDUMP vmcore</i>
&gt;<i> </i>
&gt;<i>  defs.h     |  10 +++++</i>
&gt;<i>  dev.c      |  80 +++++++++++++++++++++++++++++++++++-</i>
&gt;<i>  diskdump.c |  84 ++++++++++++++++++++++++++++++++++++++</i>
&gt;<i>  help.c     |  23 ++++++++++-</i>
&gt;<i>  memory.c   |  10 +++++</i>
&gt;<i>  netdump.c  | 118 ++++++++++++++++++++++++++++++++++++++++++++++++++++-</i>
&gt;<i>  netdump.h  |   3 ++</i>
&gt;<i>  vmcore.h   |  36 ++++++++++++++++</i>
&gt;<i>  8 files changed, 359 insertions(+), 5 deletions(-)</i>
&gt;<i>  create mode 100644 vmcore.h</i>
&gt;<i> </i>
&gt;<i> --</i>
&gt;<i> 2.21.0</i>
&gt;<i> </i>
&gt;<i> </i>

--
Crash-utility mailing list
Crash-utility@xxxxxxxxxx
<a  rel="nofollow" href="https://www.redhat.com/mailman/listinfo/crash-utility">https://www.redhat.com/mailman/listinfo/crash-utility</a>


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div>
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="07733" href="msg07733.html">Re:  [PATCH 0/4] Add support to extract hardware device dumps from vmcore</a></strong>
<ul><li><em>From:</em> Dave Anderson</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="07720" href="msg07720.html">[PATCH 0/4] Add support to extract hardware device	dumps from vmcore</a></strong>
<ul><li><em>From:</em> Surendra Mobiya</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg07728.html">Re:  WARNING: malloc/free mismatch</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg07730.html">Re:  WARNING: malloc/free mismatch</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg07721.html">[PATCH 4/4] enhance dev command to extract	NT_VMCOREDD from KDUMP vmcore</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg07733.html">Re:  [PATCH 0/4] Add support to extract hardware device dumps from vmcore</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#07729"><strong>Date</strong></a></li>
<li><a href="index.html#07729"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<center>
<font size=-1>
<a href=/lists/>[Index&nbsp;of&nbsp;Archives]</a>
&nbsp;
&nbsp;
<a href=/lists/fedora-devel/>[Fedora&nbsp;Development]</a>
&nbsp;
&nbsp;
<a href=/lists/fedora-desktop/>[Fedora&nbsp;Desktop]</a>
&nbsp;
&nbsp;
<a href=/lists/fedora-selinux/>[Fedora&nbsp;SELinux]</a>
&nbsp;
&nbsp;
<a href=https://yosemitenews.info>[Yosemite&nbsp;News]</a>
&nbsp;
&nbsp;
<a href=/lists/kde/>[KDE&nbsp;Users]</a>
&nbsp;
&nbsp;
<a href=/lists/fedora-tools/>[Fedora&nbsp;Tools]</a>
</font>
</center>
<hr>
<p>
<div>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-format="autorelaxed"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="1424524564"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<table width="100%">
<tr>
<td align=left>&nbsp;</td>
<td valign=top align=right><H1><a href=/lists/><img src=/button_01.gif border=0 alt="Powered by Linux"></a></H1></td>
</tr></table>
<!--X-User-Footer-End-->
<script type="text/javascript"> 
 function initAddThis() {
    addthis.init()
 }
initAddThis();
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-760190-1', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
