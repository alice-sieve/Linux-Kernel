<!-- MHonArc v2.6.19 -->
<!--X-Subject: Re:  [PATCH 2/2] tree: add an option to dump the	tree sorted -->
<!--X-From-R13: Rnavry Hnprx &#60;arrykNerqung.pbz> -->
<!--X-Date: Thu, 12 Apr 2018 07:51:45 &#45;0700 -->
<!--X-Message-Id: CACjP9X_TqKsDYLhgz+R3LLEpU3OZVydbe+rhfZihx9r6chtkxA@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 1523533191&#45;28145&#45;1&#45;git&#45;send&#45;email&#45;neelx@redhat.com -->
<!--X-Reference: 1523533191&#45;28145&#45;3&#45;git&#45;send&#45;email&#45;neelx@redhat.com -->
<!--X-Reference: 272344189.20043476.1523541454052.JavaMail.zimbra@redhat.com -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-3422782820843221",
          enable_page_level_ads: true
     });
</script>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Re:  [PATCH 2/2] tree: add an option to dump the	tree sorted &mdash; Red Hat Crash Utility">
<style>
<!--
 pre {white-space: pre-wrap;}
-->
</style>
<title>Red Hat Crash Utility &mdash;  Re:  [PATCH 2/2] tree: add an option to dump the	tree sorted</title>
<link rel="alternate" type="application/rss+xml" title="Red Hat Crash Utility" href="//feeds.feedburner.com/RedHatCrashUtility">
</head>
<body itemscope itemtype="//schema.org/Article" vlink=green>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<form action="//www.google.com" id="cse-search-box" target="_blank">
  <div>
    <input type="hidden" name="cx" value="partner-pub-3422782820843221:9580497365" />
    <input type="hidden" name="ie" value="UTF-8" />
    <input type="text" name="q" size="25" />
    <input type="submit" name="sa" value="Search" />
  </div>
</form>
<script type="text/javascript" src="//www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en"></script>
<h1 itemprop="name">Re:  [PATCH 2/2] tree: add an option to dump the	tree sorted</h1>
[<a href="msg07440.html">Date Prev</a>][<a href="msg07442.html">Date Next</a>][<a href="msg07439.html">Thread Prev</a>][<a href="msg07442.html">Thread Next</a>][<a href="maillist.html#07441">Date Index</a>][<a href="index.html#07441">Thread Index</a>]
<script src="https://apis.google.com/js/platform.js" async defer></script>
<g:plusone size="small"></g:plusone>
<p>&nbsp;<br>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive test for archives -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="6345952567"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>Subject</em>: Re:  [PATCH 2/2] tree: add an option to dump the	tree sorted</li>
<li><em>From</em>: Daniel Vacek &lt;neelx@xxxxxxxxxx&gt;</li>
<li><em>Date</em>: Thu, 12 Apr 2018 16:51:37 +0200</li>
<li><em>Cc</em>: &quot;Discussion list for crash utility usage,	maintenance and development&quot; &lt;crash-utility@xxxxxxxxxx&gt;</li>
<li><em>In-reply-to</em>: &lt;<a href="msg07439.html">272344189.20043476.1523541454052.JavaMail.zimbra@redhat.com</a>&gt;</li>
<li><em>Reply-to</em>: &quot;Discussion list for crash utility usage,	maintenance and development&quot; &lt;crash-utility@xxxxxxxxxx&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_4"></a>
<a class="addthis_button_compact"></a>
<a class="addthis_counter addthis_bubble_style"></a>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5196c2ae1be43d18&async=1&domready=1" defer async></script>
<!-- AddThis Button END -->
<hr>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive link 1 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="8681825769"
     data-ad-format="link"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>
<div class="content" itemprop="articleBody">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>On Thu, Apr 12, 2018 at 3:57 PM, Dave Anderson &lt;anderson@xxxxxxxxxx&gt; wrote:
&gt;<i></i>
&gt;<i> Daniel,</i>
&gt;<i></i>
&gt;<i> Hmmm, when looking at your example, I just noticed it didn't use the -t argument,</i>
&gt;<i> but then looking at the code realized that the command defaults to rbtrees.  I</i>
&gt;<i> actually don't think that was the original intent, but maybe that fact should</i>
&gt;<i> should be indicated in the help page?  Although I can't come up with a compelling</i>
&gt;<i> argument why one should be the default.  Either that, or -t should be enforced.</i>

Wow. I didn't know this was not intended. I thought that red-black is
default as radix trees are only used in address_space of mapped files
(page cache), AFAIK. I usually do not need to specify the type as all
the major trees are red-black - being it cgroups, scheduler entities,
memory mappings, inodes, you name it.

Again, I didn't change anything with regards to this behavior.

&gt;<i> Anyway, you probably didn't notice that all help page output is constrained</i>
&gt;<i> to 80 columns.  Your example command alone is 162 bytes long, making it way</i>
&gt;<i> too confusing to figure out what the command is doing.  Can you just show</i>
&gt;<i> the command output without piping it to an external command, or make a much</i>
&gt;<i> simpler example?  And also keep it to 80 columns or less,</i>

I was thinking about wrapping the command to a second line but that's
what terminal will do anyways if narrower so I left it that way. The
rest of the pipe is just formatting/pretty printing the table.
Otherwise the output would be waaaay toooo loooong and not really
human readable. I do not think it can get any simpler than that. I can
get rid of one of the columns though, it does not need to contain both
the start and the end of the VMA range.

As an added value it also teaches eventual readers some advanced usage
techniques in general so I believe it can be useful. There is enough
simple examples already. Would you rather prefer something like this?

crash&gt; task -R mm
PID: 28682  TASK: ffff880036d4af10  CPU: 0   COMMAND: &quot;crash&quot;
  mm = 0xffff880074b5be80,

crash&gt; tree -lp -o vm_area_struct.vm_rb -r mm_struct.mm_rb 0xffff880074b5be80
ffff88001f2c50e0
  position: root/l/l/l/l/l
ffff88001f2c5290
  position: root/l/l/l/l
ffff880074bfc6c0
  position: root/l/l/l/l/r
ffff88001f2c4bd0
  position: root/l/l/l
ffff880074bfc948
  position: root/l/l/l/r/l/l
ffff880036e54510
  position: root/l/l/l/r/l/l/r
ffff88001f2c5bd8
  position: root/l/l/l/r/l
ffff880036e54af8
  position: root/l/l/l/r/l/r/l
ffff880036e54f30
  position: root/l/l/l/r/l/r
ffff88000e06aa20
  position: root/l/l/l/r/l/r/r
ffff88000e06b368
  position: root/l/l/l/r
ffff88000e06ba28
  position: root/l/l/l/r/r/l
ffff88000e06ae58
  position: root/l/l/l/r/r
ffff88000e06a6c0
  position: root/l/l/l/r/r/r
...
ffff88001f2c51b8
 position: root/l/r/r/r/l
ffff88001f2c4d80
  position: root/l/r/r/r
ffff880074bfd878
  position: root/l/r/r/r/r
ffff88001f2c5a28
  position: root
ffff88001f2c4a20
  position: root/r/l/l/l
ffff88001f2c4360
  position: root/r/l/l
ffff880074bfcaf8
  position: root/r/l/l/r
...
ffff88001f2c5e60
  position: root/r/r/l/l/l
ffff88001f2c4ca8
  position: root/r/r/l/l
ffff88001f2c5008
  position: root/r/r/l
ffff88001f2c5d88
  position: root/r/r/l/r
ffff880074bfd6c8
  position: root/r/r/l/r/r
ffff88001f2c4288
  position: root/r/r
ffff88001f2c4510
  position: root/r/r/r
ffff88001f2c5b00
  position: root/r/r/r/r

This is not as readable in my opinion. And also it does not show why
would one care about the order in the first place. See?

I do not believe a hard limit of 80 columns is useful for any serious
kernel debugging. For developing and maintaining a source code, yes.
For dumping a lot of debugging data in a human readable form, no.

For example if I type 'timer -r' I already get an output which is over
eighty. How would you copy/paste this to help? Or how do you feel
about the output itself?

  CLOCK: 1  HRTIMER_CLOCK_BASE: ffff8805ed82d9a0  [ktime_get_real]
        CURRENT
  1522436617507394900
      SOFTEXPIRES            EXPIRES            HRTIMER           FUNCTION
  1522436624101007000  1522436624101057000  ffff8805e08ebd60
ffffffff810a95c0  &lt;hrtimer_wakeup&gt;
  1522436628203647900  1522436628203697900  ffff8805e33fbd60
ffffffff810a95c0  &lt;hrtimer_wakeup&gt;
  1522436635368413000  1522436635368463000  ffff8805e07cfd60
ffffffff810a95c0  &lt;hrtimer_wakeup&gt;
  1522436652248574300  1522436652248624300  ffff8805e1acfd60
ffffffff810a95c0  &lt;hrtimer_wakeup&gt;
  1522436652257417000  1522436652257467000  ffff8805e07a3d60
ffffffff810a95c0  &lt;hrtimer_wakeup&gt;
  1522436664228364000  1522436664228414000  ffff8805e1347d60
ffffffff810a95c0  &lt;hrtimer_wakeup&gt;

That's about the same width as my example.
What do you suggest?

&gt;<i> and put the &quot;l&quot; argument in the synopsis line at the top.</i>

Nah. I missed that one. Will fix it. Or you can just amend it yourself.

--nX

&gt;<i> Thanks,</i>
&gt;<i>   Dave</i>
&gt;<i></i>
&gt;<i></i>
&gt;<i></i>
&gt;<i> ----- Original Message -----</i>
&gt;<i>&gt; ---</i>
&gt;<i>&gt;  defs.h  |  1 +</i>
&gt;<i>&gt;  help.c  | 80</i>
&gt;<i>&gt;  +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</i>
&gt;<i>&gt;  tools.c | 16 +++++++++++--</i>
&gt;<i>&gt;  3 files changed, 95 insertions(+), 2 deletions(-)</i>
&gt;<i>&gt;</i>
&gt;<i>&gt; diff --git a/defs.h b/defs.h</i>
&gt;<i>&gt; index adddb9f2748d..ec298cbd70be 100644</i>
&gt;<i>&gt; --- a/defs.h</i>
&gt;<i>&gt; +++ b/defs.h</i>
&gt;<i>&gt; @@ -2480,6 +2480,7 @@ struct tree_data {</i>
&gt;<i>&gt;  #define TREE_STRUCT_RADIX_16      (VERBOSE &lt;&lt; 6)</i>
&gt;<i>&gt;  #define TREE_PARSE_MEMBER         (VERBOSE &lt;&lt; 7)</i>
&gt;<i>&gt;  #define TREE_READ_MEMBER          (VERBOSE &lt;&lt; 8)</i>
&gt;<i>&gt; +#define TREE_LINEAR_ORDER         (VERBOSE &lt;&lt; 9)</i>
&gt;<i>&gt;</i>
&gt;<i>&gt;  #define ALIAS_RUNTIME  (1)</i>
&gt;<i>&gt;  #define ALIAS_RCLOCAL  (2)</i>
&gt;<i>&gt; diff --git a/help.c b/help.c</i>
&gt;<i>&gt; index c5cec5365962..e7df50fa2ef4 100644</i>
&gt;<i>&gt; --- a/help.c</i>
&gt;<i>&gt; +++ b/help.c</i>
&gt;<i>&gt; @@ -5698,6 +5698,8 @@ char *help_tree[] = {</i>
&gt;<i>&gt;  &quot;             indicates \&quot;root/l/r\&quot; means that the node is the right</i>
&gt;<i>&gt;  child&quot;,</i>
&gt;<i>&gt;  &quot;             of the left child of the root node.  For radix trees, the</i>
&gt;<i>&gt;  height&quot;,</i>
&gt;<i>&gt;  &quot;             and slot index values are shown with respect to the root.&quot;,</i>
&gt;<i>&gt; +&quot;         -l  Dump the tree sorted in linear order starting with the</i>
&gt;<i>&gt; leftmost&quot;,</i>
&gt;<i>&gt; +&quot;             node and progressing to the right.&quot;,</i>
&gt;<i>&gt;  &quot; &quot;,</i>
&gt;<i>&gt;  &quot;  The meaning of the \&quot;start\&quot; argument, which can be expressed either in&quot;,</i>
&gt;<i>&gt;  &quot;  hexadecimal format or symbolically, depends upon whether the -N option&quot;,</i>
&gt;<i>&gt; @@ -5823,6 +5825,84 @@ char *help_tree[] = {</i>
&gt;<i>&gt;  &quot;    ffffea000407de58&quot;,</i>
&gt;<i>&gt;  &quot;      position: root/3/28&quot;,</i>
&gt;<i>&gt;  &quot;&quot;,</i>
&gt;<i>&gt; +&quot;  List the tree in linear order from the leftmost node progressing&quot;,</i>
&gt;<i>&gt; +&quot;  to the right using the -l option:\n&quot;,</i>
&gt;<i>&gt; +&quot;    %s&gt; tree -lps vm_area_struct.vm_start,vm_end -o vm_area_struct.vm_rb -r</i>
&gt;<i>&gt; mm_struct.mm_rb 0xffff8805dee5e400 | sed 's/^  //' | paste - - - - | column</i>
&gt;<i>&gt; -ts'  '&quot;,</i>
&gt;<i>&gt; +&quot;    ffff8805e108f008  position: root/l/l/l/l/l/l/l/l/l  vm_start =</i>
&gt;<i>&gt; 0x7f6f9ca5f000  vm_end = 0x7f6f9d44c000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff880540d35d88  position: root/l/l/l/l/l/l/l/l    vm_start =</i>
&gt;<i>&gt; 0x7f6f9d44c000  vm_end = 0x7f6f9d454000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff8805def64d80  position: root/l/l/l/l/l/l/l      vm_start =</i>
&gt;<i>&gt; 0x7f6f9d454000  vm_end = 0x7f6f9d653000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff8805e0b46510  position: root/l/l/l/l/l/l/l/r/l  vm_start =</i>
&gt;<i>&gt; 0x7f6f9d653000  vm_end = 0x7f6f9d654000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff8805e108e288  position: root/l/l/l/l/l/l/l/r    vm_start =</i>
&gt;<i>&gt; 0x7f6f9d654000  vm_end = 0x7f6f9d655000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff8805def65bd8  position: root/l/l/l/l/l/l/l/r/r  vm_start =</i>
&gt;<i>&gt; 0x7f6f9d655000  vm_end = 0x7f6f9d661000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff8805def64ca8  position: root/l/l/l/l/l/l        vm_start =</i>
&gt;<i>&gt; 0x7f6f9d661000  vm_end = 0x7f6f9d860000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff8805def641b0  position: root/l/l/l/l/l/l/r/l    vm_start =</i>
&gt;<i>&gt; 0x7f6f9d860000  vm_end = 0x7f6f9d861000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff8805def64438  position: root/l/l/l/l/l/l/r/l/r  vm_start =</i>
&gt;<i>&gt; 0x7f6f9d861000  vm_end = 0x7f6f9d862000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff8805def65368  position: root/l/l/l/l/l/l/r      vm_start =</i>
&gt;<i>&gt; 0x7f6f9d862000  vm_end = 0x7f6f9d868000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff880540ec2e58  position: root/l/l/l/l/l/l/r/r    vm_start =</i>
&gt;<i>&gt; 0x7f6f9d868000  vm_end = 0x7f6f9d88c000&quot;,</i>
&gt;<i>&gt; +&quot;    ...&quot;,</i>
&gt;<i>&gt; +&quot;    ffff8805dfc08e58  position: root/l/r/r/l/r/l        vm_start =</i>
&gt;<i>&gt; 0x7f6fa020f000  vm_end = 0x7f6fa0216000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff880540ec35f0  position: root/l/r/r/l/r          vm_start =</i>
&gt;<i>&gt; 0x7f6fa0216000  vm_end = 0x7f6fa0217000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff8805dfc09cb0  position: root/l/r/r/l/r/r        vm_start =</i>
&gt;<i>&gt; 0x7f6fa0217000  vm_end = 0x7f6fa0338000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff8805dfc08360  position: root/l/r/r              vm_start =</i>
&gt;<i>&gt; 0x7f6fa0338000  vm_end = 0x7f6fa0538000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff8805dfc08bd0  position: root                    vm_start =</i>
&gt;<i>&gt; 0x7f6fa07af000  vm_end = 0x7f6fa09ae000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff8805dfc08288  position: root/r/l/l/l/l/l        vm_start =</i>
&gt;<i>&gt; 0x7f6fa09ae000  vm_end = 0x7f6fa09b2000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff880540ec31b8  position: root/r/l/l/l/l/l/r      vm_start =</i>
&gt;<i>&gt; 0x7f6fa09b2000  vm_end = 0x7f6fa09b3000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff8805dfc08ca8  position: root/r/l/l/l/l          vm_start =</i>
&gt;<i>&gt; 0x7f6fa09b3000  vm_end = 0x7f6fa09b4000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff8800f78c15f0  position: root/r/l/l/l/l/r        vm_start =</i>
&gt;<i>&gt; 0x7f6fa09b4000  vm_end = 0x7f6fa0b6c000&quot;,</i>
&gt;<i>&gt; +&quot;    ...&quot;,</i>
&gt;<i>&gt; +&quot;    ffff8805def651b8  position: root/r/r/r/r/l/l        vm_start =</i>
&gt;<i>&gt; 0x7f6fa2f42000  vm_end = 0x7f6fa2f43000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff880540d35e60  position: root/r/r/r/r/l          vm_start =</i>
&gt;<i>&gt; 0x7f6fa2f43000  vm_end = 0x7f6fa2f44000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff880540d35518  position: root/r/r/r/r/l/r        vm_start =</i>
&gt;<i>&gt; 0x7f6fa2f44000  vm_end = 0x7f6fa2f85000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff880540d356c8  position: root/r/r/r/r            vm_start =</i>
&gt;<i>&gt; 0x7f6fa3185000  vm_end = 0x7f6fa3187000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff8805def64000  position: root/r/r/r/r/r/l/l      vm_start =</i>
&gt;<i>&gt; 0x7f6fa3187000  vm_end = 0x7f6fa3188000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff880540d35cb0  position: root/r/r/r/r/r/l        vm_start =</i>
&gt;<i>&gt; 0x7f6fa3188000  vm_end = 0x7f6fa3189000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff8805def64798  position: root/r/r/r/r/r/l/r      vm_start =</i>
&gt;<i>&gt; 0x7f6fa4bf9000  vm_end = 0x7f6fa4c1a000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff880540d340d8  position: root/r/r/r/r/r          vm_start =</i>
&gt;<i>&gt; 0x7ffc2b386000  vm_end = 0x7ffc2b3a8000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff880540d35950  position: root/r/r/r/r/r/r        vm_start =</i>
&gt;<i>&gt; 0x7ffc2b3c2000  vm_end = 0x7ffc2b3c4000&quot;,</i>
&gt;<i>&gt; +&quot;&quot;,</i>
&gt;<i>&gt; +&quot;  Compared to the top/down order:\n&quot;,</i>
&gt;<i>&gt; +&quot;    %s&gt; tree -ps vm_area_struct.vm_start,vm_end -o vm_area_struct.vm_rb -r</i>
&gt;<i>&gt; mm_struct.mm_rb 0xffff8805dee5e400 | sed 's/^  //' | paste - - - - | column</i>
&gt;<i>&gt; -ts'  '&quot;,</i>
&gt;<i>&gt; +&quot;    ffff8805dfc08bd0  position: root                    vm_start =</i>
&gt;<i>&gt; 0x7f6fa07af000  vm_end = 0x7f6fa09ae000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff8805e0b79b00  position: root/l                  vm_start =</i>
&gt;<i>&gt; 0x7f6f9f585000  vm_end = 0x7f6f9f785000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff8805e0b79e60  position: root/l/l                vm_start =</i>
&gt;<i>&gt; 0x7f6f9ec2b000  vm_end = 0x7f6f9ee2b000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff8805e0b78bd0  position: root/l/l/l              vm_start =</i>
&gt;<i>&gt; 0x7f6f9e2c1000  vm_end = 0x7f6f9e4c0000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff8805e07f0bd0  position: root/l/l/l/l            vm_start =</i>
&gt;<i>&gt; 0x7f6f9da92000  vm_end = 0x7f6f9dc91000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff880540ec20d8  position: root/l/l/l/l/l          vm_start =</i>
&gt;<i>&gt; 0x7f6f9d88c000  vm_end = 0x7f6f9da8b000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff8805def64ca8  position: root/l/l/l/l/l/l        vm_start =</i>
&gt;<i>&gt; 0x7f6f9d661000  vm_end = 0x7f6f9d860000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff8805def64d80  position: root/l/l/l/l/l/l/l      vm_start =</i>
&gt;<i>&gt; 0x7f6f9d454000  vm_end = 0x7f6f9d653000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff880540d35d88  position: root/l/l/l/l/l/l/l/l    vm_start =</i>
&gt;<i>&gt; 0x7f6f9d44c000  vm_end = 0x7f6f9d454000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff8805e108f008  position: root/l/l/l/l/l/l/l/l/l  vm_start =</i>
&gt;<i>&gt; 0x7f6f9ca5f000  vm_end = 0x7f6f9d44c000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff8805e108e288  position: root/l/l/l/l/l/l/l/r    vm_start =</i>
&gt;<i>&gt; 0x7f6f9d654000  vm_end = 0x7f6f9d655000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff8805e0b46510  position: root/l/l/l/l/l/l/l/r/l  vm_start =</i>
&gt;<i>&gt; 0x7f6f9d653000  vm_end = 0x7f6f9d654000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff8805def65bd8  position: root/l/l/l/l/l/l/l/r/r  vm_start =</i>
&gt;<i>&gt; 0x7f6f9d655000  vm_end = 0x7f6f9d661000&quot;,</i>
&gt;<i>&gt; +&quot;    ...&quot;,</i>
&gt;<i>&gt; +&quot;    ffff8805dfc08360  position: root/l/r/r              vm_start =</i>
&gt;<i>&gt; 0x7f6fa0338000  vm_end = 0x7f6fa0538000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff8805dfc096c8  position: root/l/r/r/l            vm_start =</i>
&gt;<i>&gt; 0x7f6fa0010000  vm_end = 0x7f6fa020f000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff880540ec2870  position: root/l/r/r/l/l          vm_start =</i>
&gt;<i>&gt; 0x7f6f9ffe9000  vm_end = 0x7f6f9ffea000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff8805dfc09440  position: root/l/r/r/l/l/l        vm_start =</i>
&gt;<i>&gt; 0x7f6f9ffe8000  vm_end = 0x7f6f9ffe9000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff8805dfc09290  position: root/l/r/r/l/l/r        vm_start =</i>
&gt;<i>&gt; 0x7f6f9ffea000  vm_end = 0x7f6fa0010000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff880540ec35f0  position: root/l/r/r/l/r          vm_start =</i>
&gt;<i>&gt; 0x7f6fa0216000  vm_end = 0x7f6fa0217000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff8805dfc08e58  position: root/l/r/r/l/r/l        vm_start =</i>
&gt;<i>&gt; 0x7f6fa020f000  vm_end = 0x7f6fa0216000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff8805dfc09cb0  position: root/l/r/r/l/r/r        vm_start =</i>
&gt;<i>&gt; 0x7f6fa0217000  vm_end = 0x7f6fa0338000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff880540d346c0  position: root/r                  vm_start =</i>
&gt;<i>&gt; 0x7f6fa1f5a000  vm_end = 0x7f6fa2159000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff8800f78c10e0  position: root/r/l                vm_start =</i>
&gt;<i>&gt; 0x7f6fa135f000  vm_end = 0x7f6fa155f000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff8800f78c1440  position: root/r/l/l              vm_start =</i>
&gt;<i>&gt; 0x7f6fa0d8d000  vm_end = 0x7f6fa0f8d000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff8800f78c1950  position: root/r/l/l/l            vm_start =</i>
&gt;<i>&gt; 0x7f6fa0b6c000  vm_end = 0x7f6fa0d6c000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff8805dfc08ca8  position: root/r/l/l/l/l          vm_start =</i>
&gt;<i>&gt; 0x7f6fa09b3000  vm_end = 0x7f6fa09b4000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff8805dfc08288  position: root/r/l/l/l/l/l        vm_start =</i>
&gt;<i>&gt; 0x7f6fa09ae000  vm_end = 0x7f6fa09b2000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff880540ec31b8  position: root/r/l/l/l/l/l/r      vm_start =</i>
&gt;<i>&gt; 0x7f6fa09b2000  vm_end = 0x7f6fa09b3000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff8800f78c15f0  position: root/r/l/l/l/l/r        vm_start =</i>
&gt;<i>&gt; 0x7f6fa09b4000  vm_end = 0x7f6fa0b6c000&quot;,</i>
&gt;<i>&gt; +&quot;    ...&quot;,</i>
&gt;<i>&gt; +&quot;    ffff880540d356c8  position: root/r/r/r/r            vm_start =</i>
&gt;<i>&gt; 0x7f6fa3185000  vm_end = 0x7f6fa3187000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff880540d35e60  position: root/r/r/r/r/l          vm_start =</i>
&gt;<i>&gt; 0x7f6fa2f43000  vm_end = 0x7f6fa2f44000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff8805def651b8  position: root/r/r/r/r/l/l        vm_start =</i>
&gt;<i>&gt; 0x7f6fa2f42000  vm_end = 0x7f6fa2f43000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff880540d35518  position: root/r/r/r/r/l/r        vm_start =</i>
&gt;<i>&gt; 0x7f6fa2f44000  vm_end = 0x7f6fa2f85000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff880540d340d8  position: root/r/r/r/r/r          vm_start =</i>
&gt;<i>&gt; 0x7ffc2b386000  vm_end = 0x7ffc2b3a8000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff880540d35cb0  position: root/r/r/r/r/r/l        vm_start =</i>
&gt;<i>&gt; 0x7f6fa3188000  vm_end = 0x7f6fa3189000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff8805def64000  position: root/r/r/r/r/r/l/l      vm_start =</i>
&gt;<i>&gt; 0x7f6fa3187000  vm_end = 0x7f6fa3188000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff8805def64798  position: root/r/r/r/r/r/l/r      vm_start =</i>
&gt;<i>&gt; 0x7f6fa4bf9000  vm_end = 0x7f6fa4c1a000&quot;,</i>
&gt;<i>&gt; +&quot;    ffff880540d35950  position: root/r/r/r/r/r/r        vm_start =</i>
&gt;<i>&gt; 0x7ffc2b3c2000  vm_end = 0x7ffc2b3c4000&quot;,</i>
&gt;<i>&gt; +&quot;&quot;,</i>
&gt;<i>&gt;  &quot;  Alternatively, take the address of the radix_tree_node from the&quot;,</i>
&gt;<i>&gt;  &quot;  radix_tree_root structure in the address_space structure above,&quot;,</i>
&gt;<i>&gt;  &quot;  and display the tree with the -N option:\n&quot;,</i>
&gt;<i>&gt; diff --git a/tools.c b/tools.c</i>
&gt;<i>&gt; index 992f4776281a..1970e8bb136b 100644</i>
&gt;<i>&gt; --- a/tools.c</i>
&gt;<i>&gt; +++ b/tools.c</i>
&gt;<i>&gt; @@ -3926,7 +3926,7 @@ cmd_tree()</i>
&gt;<i>&gt;       td = &amp;tree_data;</i>
&gt;<i>&gt;       BZERO(td, sizeof(struct tree_data));</i>
&gt;<i>&gt;</i>
&gt;<i>&gt; -     while ((c = getopt(argcnt, args, &quot;xdt:r:o:s:S:pN&quot;)) != EOF) {</i>
&gt;<i>&gt; +     while ((c = getopt(argcnt, args, &quot;xdt:r:o:s:S:plN&quot;)) != EOF) {</i>
&gt;<i>&gt;               switch (c)</i>
&gt;<i>&gt;               {</i>
&gt;<i>&gt;               case 't':</i>
&gt;<i>&gt; @@ -3993,6 +3993,10 @@ cmd_tree()</i>
&gt;<i>&gt;                       td-&gt;flags |= TREE_POSITION_DISPLAY;</i>
&gt;<i>&gt;                       break;</i>
&gt;<i>&gt;</i>
&gt;<i>&gt; +             case 'l':</i>
&gt;<i>&gt; +                     td-&gt;flags |= TREE_LINEAR_ORDER;</i>
&gt;<i>&gt; +                     break;</i>
&gt;<i>&gt; +</i>
&gt;<i>&gt;               case 'N':</i>
&gt;<i>&gt;                       td-&gt;flags |= TREE_NODE_POINTER;</i>
&gt;<i>&gt;                       break;</i>
&gt;<i>&gt; @@ -4399,6 +4403,13 @@ rbtree_iteration(ulong node_p, struct tree_data *td,</i>
&gt;<i>&gt; char *pos)</i>
&gt;<i>&gt;</i>
&gt;<i>&gt;       struct_p = node_p - td-&gt;node_member_offset;</i>
&gt;<i>&gt;</i>
&gt;<i>&gt; +     if (td-&gt;flags &amp; TREE_LINEAR_ORDER &amp;&amp;</i>
&gt;<i>&gt; +             readmem(node_p+OFFSET(rb_node_rb_left), KVADDR, &amp;new_p,</i>
&gt;<i>&gt; +                     sizeof(void *), &quot;rb_node rb_left&quot;, RETURN_ON_ERROR)) {</i>
&gt;<i>&gt; +             sprintf(new_pos, &quot;%s/l&quot;, pos);</i>
&gt;<i>&gt; +             rbtree_iteration(new_p, td, new_pos);</i>
&gt;<i>&gt; +     }</i>
&gt;<i>&gt; +</i>
&gt;<i>&gt;       if (td-&gt;flags &amp; VERBOSE)</i>
&gt;<i>&gt;               fprintf(fp, &quot;%lx\n&quot;, struct_p);</i>
&gt;<i>&gt;</i>
&gt;<i>&gt; @@ -4430,7 +4441,8 @@ rbtree_iteration(ulong node_p, struct tree_data *td,</i>
&gt;<i>&gt; char *pos)</i>
&gt;<i>&gt;               }</i>
&gt;<i>&gt;       }</i>
&gt;<i>&gt;</i>
&gt;<i>&gt; -     if (    readmem(node_p+OFFSET(rb_node_rb_left), KVADDR, &amp;new_p,</i>
&gt;<i>&gt; +     if (!(td-&gt;flags &amp; TREE_LINEAR_ORDER) &amp;&amp;</i>
&gt;<i>&gt; +             readmem(node_p+OFFSET(rb_node_rb_left), KVADDR, &amp;new_p,</i>
&gt;<i>&gt;                       sizeof(void *), &quot;rb_node rb_left&quot;, RETURN_ON_ERROR)) {</i>
&gt;<i>&gt;               sprintf(new_pos, &quot;%s/l&quot;, pos);</i>
&gt;<i>&gt;               rbtree_iteration(new_p, td, new_pos);</i>
&gt;<i>&gt; --</i>
&gt;<i>&gt; 2.16.2</i>
&gt;<i>&gt;</i>
&gt;<i>&gt; --</i>
&gt;<i>&gt; Crash-utility mailing list</i>
&gt;<i>&gt; Crash-utility@xxxxxxxxxx</i>
&gt;<i>&gt; <a  rel="nofollow" href="https://www.redhat.com/mailman/listinfo/crash-utility">https://www.redhat.com/mailman/listinfo/crash-utility</a></i>
&gt;<i>&gt;</i>

--
Crash-utility mailing list
Crash-utility@xxxxxxxxxx
<a  rel="nofollow" href="https://www.redhat.com/mailman/listinfo/crash-utility">https://www.redhat.com/mailman/listinfo/crash-utility</a>


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div>
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="07443" href="msg07443.html">Re:  [PATCH 2/2] tree: add an option to dump the	tree sorted</a></strong>
<ul><li><em>From:</em> Daniel Vacek</li></ul></li>
<li><strong><a name="07442" href="msg07442.html">Re:  [PATCH 2/2] tree: add an option to dump the tree sorted</a></strong>
<ul><li><em>From:</em> Dave Anderson</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="07445" href="msg07445.html">[PATCH 0/2] couple of trivial tree patches</a></strong>
<ul><li><em>From:</em> Daniel Vacek</li></ul></li>
<li><strong><a name="07437" href="msg07437.html">[PATCH 2/2] tree: add an option to dump the tree	sorted</a></strong>
<ul><li><em>From:</em> Daniel Vacek</li></ul></li>
<li><strong><a name="07439" href="msg07439.html">Re:  [PATCH 2/2] tree: add an option to dump the tree sorted</a></strong>
<ul><li><em>From:</em> Dave Anderson</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg07440.html">Re:  [PATCH 1/2] tree: no need to bail out on tree corruption, skip the node and move on instead</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg07442.html">Re:  [PATCH 2/2] tree: add an option to dump the tree sorted</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg07439.html">Re:  [PATCH 2/2] tree: add an option to dump the tree sorted</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg07442.html">Re:  [PATCH 2/2] tree: add an option to dump the tree sorted</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#07441"><strong>Date</strong></a></li>
<li><a href="index.html#07441"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<center>
<font size=-1>
<a href=/lists/>[Index&nbsp;of&nbsp;Archives]</a>
&nbsp;
&nbsp;
<a href=/lists/fedora-devel/>[Fedora&nbsp;Development]</a>
&nbsp;
&nbsp;
<a href=/lists/fedora-desktop/>[Fedora&nbsp;Desktop]</a>
&nbsp;
&nbsp;
<a href=/lists/fedora-selinux/>[Fedora&nbsp;SELinux]</a>
&nbsp;
&nbsp;
<a href=https://yosemitenews.info>[Yosemite&nbsp;News]</a>
&nbsp;
&nbsp;
<a href=/lists/kde/>[KDE&nbsp;Users]</a>
&nbsp;
&nbsp;
<a href=/lists/fedora-tools/>[Fedora&nbsp;Tools]</a>
</font>
</center>
<hr>
<p>
<div>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-format="autorelaxed"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="1424524564"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<table width="100%">
<tr>
<td align=left>&nbsp;</td>
<td valign=top align=right><H1><a href=/lists/><img src=/button_01.gif border=0 alt="Powered by Linux"></a></H1></td>
</tr></table>
<!--X-User-Footer-End-->
<script type="text/javascript"> 
 function initAddThis() {
    addthis.init()
 }
initAddThis();
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-760190-1', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
