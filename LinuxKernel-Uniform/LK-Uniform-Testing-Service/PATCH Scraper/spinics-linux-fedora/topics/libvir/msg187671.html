<!-- MHonArc v2.6.19 -->
<!--X-Subject: Re:  [PATCH 0/5] network: xmlns dnsmasq option passthrough -->
<!--X-From-R13: Znvar Eghzc &#60;ynvarNynvar.bet> -->
<!--X-Date: Thu, 18 Jul 2019 08:09:06 &#45;0700 -->
<!--X-Message-Id: 2ba3ac99&#45;87d6&#45;5f5f&#45;2706&#45;e8ad800c5c65@laine.org -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: cover.1563148979.git.crobinso@redhat.com -->
<!--X-Reference: 95a76627&#45;eed3&#45;70f0&#45;4288&#45;b87c951d362c@laine.org -->
<!--X-Reference: 296b7f80&#45;8c04&#45;48f8&#45;d9e9&#45;e4f15461f03d@redhat.com -->
<!--X-Reference: 20190718085945.GB14821@redhat.com -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-3422782820843221",
          enable_page_level_ads: true
     });
</script>
<style>
<!--
 pre {white-space: pre-wrap;}
-->
</style>
<title>libvirt &mdash; Re:  [PATCH 0/5] network: xmlns dnsmasq option passthrough</title>
<meta name="description" content="libvirt: Re:  [PATCH 0/5] network: xmlns dnsmasq option passthrough">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="alternate" type="application/rss+xml" title="Libvirt Development" href="//feeds.feedburner.com/Libvir">
</head>
<body itemscope itemtype="//schema.org/Article" vlink=green>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<form action="//www.google.com" id="cse-search-box" target="_blank">
  <div>
    <input type="hidden" name="cx" value="partner-pub-3422782820843221:8422278960" />
    <input type="hidden" name="ie" value="UTF-8" />
    <input type="text" name="q" size="55" />
    <input type="submit" name="sa" value="Search" />
  </div>
</form>
<script type="text/javascript" src="//www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en"></script>
<h1>Re:  [PATCH 0/5] network: xmlns dnsmasq option passthrough</h1>
[<a href="msg187670.html">Date Prev</a>][<a href="msg187672.html">Date Next</a>][<a href="msg187630.html">Thread Prev</a>][<a href="msg187401.html">Thread Next</a>][<a href="maillist.html#187671">Date Index</a>][<a href="index.html#187671">Thread Index</a>] 


<p>&nbsp;<br>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive test for archives -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="6345952567"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>Subject</em>: Re:  [PATCH 0/5] network: xmlns dnsmasq option passthrough</li>
<li><em>From</em>: Laine Stump &lt;laine@xxxxxxxxx&gt;</li>
<li><em>Date</em>: Thu, 18 Jul 2019 11:08:51 -0400</li>
<li><em>In-reply-to</em>: &lt;<a href="msg187630.html">20190718085945.GB14821@redhat.com</a>&gt;</li>
<li><em>References</em>: &lt;<a href="msg187385.html">cover.1563148979.git.crobinso@redhat.com</a>&gt;	&lt;<a href="msg187596.html">95a76627-eed3-70f0-4288-b87c951d362c@laine.org</a>&gt;	&lt;<a href="msg187624.html">296b7f80-8c04-48f8-d9e9-e4f15461f03d@redhat.com</a>&gt;	&lt;<a href="msg187630.html">20190718085945.GB14821@redhat.com</a>&gt;</li>
<li><em>User-agent</em>: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101	Thunderbird/60.8.0</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_4"></a>
<a class="addthis_button_compact"></a>
<a class="addthis_counter addthis_bubble_style"></a>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5196c2ae1be43d18&async=1&domready=1" async></script>
<!-- AddThis Button END -->
<hr>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive link 1 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="8681825769"
     data-ad-format="link"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>
<div class="content" itemprop="articleBody">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">
On 7/18/19 4:59 AM, Daniel P. Berrang&#xE9; wrote:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
On Wed, Jul 17, 2019 at 05:38:51PM -0400, Cole Robinson wrote:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
On 7/17/19 12:49 PM, Laine Stump wrote:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
On 7/14/19 8:03 PM, Cole Robinson wrote:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
There's several unresolved RFEs for the &lt;network&gt; bridge
driver that are essentially requests to add XML wrappers
for underlying dnsmasq options.

This series adds a dnsmasq xmlns namespace for &lt;network&gt;
XML that allows passing option strings directly to the
generated dnsmasq config file. It will allow motivated
users to work around libvirt until those types of RFEs
are properly implemented.
</pre></blockquote><pre style="margin: 0em;">

This all looks like a reasonable facsimile of the qemu:commandline
stuff, and it worked in my tests (including not creating any problems
with all the existing networks I have on my test system).


My one reservation would be that it will tend to discourage adding
*supported* methods of configuring things that people will instead use
this backdoor to implement. But on the other hand, it makes it possible
to do new things without needing to wait for an officially supported
method (which could take a very long time, or simply never happen, as
we've seen).


(Actually I for some reason thought we already *had* support for the
specific example you used - CNAME records. I guess I had lumped it in
with SRV and TXT records in my memory. It really should be
straightforward to do, and should still be done, but that shouldn't stop
this patch series from going in).


This is for the entire series:


Reviewed-by: Laine Stump &lt;laine@xxxxxxxxx&gt;
</pre></blockquote><pre style="margin: 0em;">
Thanks, I've pushed this now.

Regarding the bigger point, I think it's worth considering whether we
should aim to expose every requested dnsmasq option as official XML or
not.
</pre></blockquote></blockquote><pre style="margin: 0em;">


</pre><tt>Definitely not; there's a lot of things that maybe only one person would 
</tt><tt>ever do, or it's just too difficult and pointless to try and abstract 
</tt><tt>the config in a way that retains full functionality while being 
</tt><tt>implementation agnostic (that's what stopped the dhcp options stuff in 
</tt><tt>its tracks - the original patches had a problem with escaped characters 
</tt><tt>or something, but once you started down the rabbit hole there was just 
</tt><tt>no end).
</tt><pre style="margin: 0em;">


</pre><tt>But if something is commonly used then it's better to have a 
</tt><tt>straightforward way to do it so that everybody does it the same way, and 
</tt><tt>we don't end up with all sorts of obscure questions because someone 
</tt><tt>follows some loosely connected bad advice they found on a random page on 
</tt><tt>the internet and their setup becomes completely broken.
</tt><pre style="margin: 0em;">


</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
We effectively have one network driver; there's an impl for vbox
and esx but they seem very basic. It doesn't look like we are going to
have another backend impl any time soon.
</pre></blockquote><pre style="margin: 0em;">
I wouldn't rule it out. I can't remember where it was, but a few months
ago I had a discussion with some folks precisely about replacing dnsmasq
with new daemon(s). Primarily the purpose would getting a more secure
solution modern solution written in a memory safe language.

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
Unless the requested option has some specific reason to be represented
in libvirt XML, like if another part of libvirt may need/want to
programmatically act on that data for some reason, maybe it's okay to
say that dnsmasq passthrough is the solution. Some examples might be

* dhcp-option: <a  rel="nofollow" href="https://bugzilla.redhat.com/show_bug.cgi?id=666556">https://bugzilla.redhat.com/show_bug.cgi?id=666556</a>
* auth-zone: <a  rel="nofollow" href="https://bugzilla.redhat.com/show_bug.cgi?id=1690943">https://bugzilla.redhat.com/show_bug.cgi?id=1690943</a>
* This bug has a lot of mentioned options:
<a  rel="nofollow" href="https://bugzilla.redhat.com/show_bug.cgi?id=824573">https://bugzilla.redhat.com/show_bug.cgi?id=824573</a>
</pre></blockquote><pre style="margin: 0em;">
Most of the stuff across these bugs is not really dnsmasq specific.
It would be applicable to any DNS/DHCP service, so its just a matter
of expressing it sensibly in the XML, so you're not tied to dnsmasq
specific syntax.
</pre></blockquote><pre style="margin: 0em;">


</pre><tt>Yeah, in the past we may have been trying too hard to make the XML 
</tt><tt>backend-agnostic. And even for domain XML, it's never been the case that 
</tt><tt>the exact same XML would work unmodified for both Xen and qemu, for 
</tt><tt>example. It definitely is good to work *towards* that though; makes it 
</tt><tt>less of a task in the case that a change in backend does happen (for 
</tt><tt>example, what Dan mentioned above).
</tt><pre style="margin: 0em;">


--
libvir-list mailing list
libvir-list@xxxxxxxxxx
<a  rel="nofollow" href="https://www.redhat.com/mailman/listinfo/libvir-list">https://www.redhat.com/mailman/listinfo/libvir-list</a>



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div>
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg187670.html">Re:  [PATCH] logging: pass binary name not logfile name when enabling logging</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg187672.html">Re:  [PATCH] logging: pass binary name not logfile name when enabling logging</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg187630.html">Re:  [PATCH 0/5] network: xmlns dnsmasq option passthrough</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg187401.html">[PATCH] all: don't wait for driver lock during startup</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#187671"><strong>Date</strong></a></li>
<li><a href="index.html#187671"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<center>
<font size=-1>
<a href=/lists/>[Index&nbsp;of&nbsp;Archives]</a>
&nbsp;
&nbsp;
<a href=/lists/virt-tools/>[Virt&nbsp;Tools]</a>
&nbsp;
&nbsp;
<a href=/linux/fedora/libvirt-users/>[Libvirt&nbsp;Users]</a>
&nbsp;
&nbsp;
<a href=/linux/fedora/libosinfo/>[Lib&nbsp;OS&nbsp;Info]</a>
&nbsp;
&nbsp;
<a href=/linux/fedora/fedora-users/>[Fedora&nbsp;Users]</a>
&nbsp;
&nbsp;
<a href=/lists/fedora-desktop/>[Fedora&nbsp;Desktop]</a>
&nbsp;
&nbsp;
<a href=/lists/fedora-selinux/>[Fedora&nbsp;SELinux]</a>
&nbsp;
&nbsp;
<a href=http://www.ske-art.com/z/biglist.php>[Big&nbsp;List&nbsp;of&nbsp;Linux&nbsp;Books]</a>
&nbsp;
&nbsp;
<a href=https://yosemitenews.info>[Yosemite&nbsp;News]</a>
&nbsp;
&nbsp;
<a href=/lists/kde/>[KDE&nbsp;Users]</a>
&nbsp;
&nbsp;
<a href=/lists/fedora-tools/>[Fedora&nbsp;Tools]</a>
</font>
</center>
<hr>
<p>
<div>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-format="autorelaxed"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="1424524564"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<table width=100%>
<tr>
<td align=left>&nbsp;</td>
<td align=right><a href=/lists/><img src=/button_01.gif border=0 alt="Powered by Linux"></a></td>
</tr>
</table>
<!--X-User-Footer-End-->
<script type="text/javascript"> 
 function initAddThis() {
    addthis.init()
 }
initAddThis();
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-760190-1', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
