<!-- MHonArc v2.6.19 -->
<!--X-Subject: Re:  [dockerfiles PATCH 2/3] refresh: Add libosinfo&#45;related projects -->
<!--X-From-R13: Rnavry =?hgs&#45;8?P?GQ4tCzHlpzThL8Ac?= &#60;oreenatrNerqung.pbz> -->
<!--X-Date: Thu, 18 Jul 2019 06:13:54 &#45;0700 -->
<!--X-Message-Id: 20190718131335.GB17063@redhat.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20190718122035.10156&#45;1&#45;abologna@redhat.com -->
<!--X-Reference: 20190718122035.10156&#45;3&#45;abologna@redhat.com -->
<!--X-Reference: 20190718123530.GF15411@redhat.com -->
<!--X-Reference: a015f2262823f819ac072027dcfa5ea9f50ab6c5.camel@redhat.com -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-3422782820843221",
          enable_page_level_ads: true
     });
</script>
<style>
<!--
 pre {white-space: pre-wrap;}
-->
</style>
<title>libvirt &mdash; Re:  [dockerfiles PATCH 2/3] refresh: Add libosinfo-related projects</title>
<meta name="description" content="libvirt: Re:  [dockerfiles PATCH 2/3] refresh: Add libosinfo-related projects">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="alternate" type="application/rss+xml" title="Libvirt Development" href="//feeds.feedburner.com/Libvir">
</head>
<body itemscope itemtype="//schema.org/Article" vlink=green>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<form action="//www.google.com" id="cse-search-box" target="_blank">
  <div>
    <input type="hidden" name="cx" value="partner-pub-3422782820843221:8422278960" />
    <input type="hidden" name="ie" value="UTF-8" />
    <input type="text" name="q" size="55" />
    <input type="submit" name="sa" value="Search" />
  </div>
</form>
<script type="text/javascript" src="//www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en"></script>
<h1>Re:  [dockerfiles PATCH 2/3] refresh: Add libosinfo-related projects</h1>
[<a href="msg187657.html">Date Prev</a>][<a href="msg187659.html">Date Next</a>][<a href="msg187654.html">Thread Prev</a>][<a href="msg187647.html">Thread Next</a>][<a href="maillist.html#187658">Date Index</a>][<a href="index.html#187658">Thread Index</a>] 


<p>&nbsp;<br>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive test for archives -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="6345952567"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>Subject</em>: Re:  [dockerfiles PATCH 2/3] refresh: Add libosinfo-related projects</li>
<li><em>From</em>: Daniel P. Berrang&#xE9; &lt;berrange@xxxxxxxxxx&gt;</li>
<li><em>Date</em>: Thu, 18 Jul 2019 14:13:35 +0100</li>
<li><em>Cc</em>: libvir-list@xxxxxxxxxx</li>
<li><em>In-reply-to</em>: &lt;<a href="msg187654.html">a015f2262823f819ac072027dcfa5ea9f50ab6c5.camel@redhat.com</a>&gt;</li>
<li><em>References</em>: &lt;<a href="msg187646.html">20190718122035.10156-1-abologna@redhat.com</a>&gt;	&lt;<a href="msg187649.html">20190718122035.10156-3-abologna@redhat.com</a>&gt;	&lt;<a href="msg187651.html">20190718123530.GF15411@redhat.com</a>&gt;	&lt;<a href="msg187654.html">a015f2262823f819ac072027dcfa5ea9f50ab6c5.camel@redhat.com</a>&gt;</li>
<li><em>Reply-to</em>: Daniel P. Berrang&#xE9; &lt;berrange@xxxxxxxxxx&gt;</li>
<li><em>User-agent</em>: Mutt/1.12.0 (2019-05-25)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_4"></a>
<a class="addthis_button_compact"></a>
<a class="addthis_counter addthis_bubble_style"></a>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5196c2ae1be43d18&async=1&domready=1" async></script>
<!-- AddThis Button END -->
<hr>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive link 1 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="8681825769"
     data-ad-format="link"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>
<div class="content" itemprop="articleBody">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>On Thu, Jul 18, 2019 at 03:05:16PM +0200, Andrea Bolognani wrote:
&gt; On Thu, 2019-07-18 at 13:35 +0100, Daniel P. Berrang&#xE9; wrote:
&gt; &gt; On Thu, Jul 18, 2019 at 02:20:34PM +0200, Andrea Bolognani wrote:
&gt; &gt; &gt;          self.projects = [
&gt; &gt; &gt; +            &quot;libosinfo&quot;,
&gt; &gt; &gt;              &quot;libvirt&quot;,
&gt; &gt; &gt; +            &quot;osinfo-db&quot;,
&gt; &gt; &gt; +            &quot;osinfo-db-tools&quot;,
&gt; &gt; &gt;          ]
&gt; &gt; 
&gt; &gt; We get away with this single container for libosinfo we don't have
&gt; &gt; any dependancies between components. It doesn't work in general
&gt; &gt; though.
&gt; &gt; 
&gt; &gt; ie the build deps for libvirt-perl skip 'libvirt' because they
&gt; &gt; assume we already chain built libvirt in the CI. This doesn't
&gt; &gt; happen except in Jenkins CI though.
&gt; 
&gt; Yeah, that's a good point.

I probably shouldn't have picked the perl bindings on reflection,
because they can't be built without the libvirt from git.

Python / go bindings would be better as they aim to keep buildable
with historic versions.

&gt; &gt; We've never created a solution for fully populating deps such
&gt; &gt; that the system is self-contained and doesn't need to chain
&gt; &gt; build other projects first.
&gt; 
&gt; I guess we would need basically an alternative mode where you tell
&gt; lcitool to make the resulting guest or container image entirely
&gt; self-contained... And in order to do that we'd also need to teach
&gt; it about relationships between projects, which is something that up
&gt; until now we have managed to live without.

We don't need to teach it about relationships between projects
in an explicit sense, in fact it could be helpful if we don't
teach that. Rather we just need two lists of package. One minimal
set for the chain build scenario, and one extra set for the
self-contanied build scenario.

eg

---
chain_build_packages:
  - python2
  - python2-devel
  - python2-lxml
  - python2-nose
  - python3
  - python3-devel
  - python3-lxml
  - python3-nose
isolated_build_packages:
  - libvirt

Doing it with package lists would give us flexibility. For example,
for python where we want to test against many libvirt versions, we
have the opiton to list many versions using my virt-ark repo for
example

---
chain_build_packages:
  - python2
  - python2-devel
  - python2-lxml
  - python2-nose
  - python3
  - python3-devel
  - python3-lxml
  - python3-nose
isolated_build_packages:
  - libvirt-ark-2_0_0
  - libvirt-ark-3_0_0
  - libvirt-ark-4_0_0


&gt; Even once we have that in place, though, the two modes can't quite
&gt; live side by side in the same container, so a project like for
&gt; example virt-manager will not be able to use the libvirt container
&gt; images but would have to prepare its own (using self-contained
&gt; mode)...
&gt; 
&gt; So perhaps we should not even consider merging this even though we
&gt; could still get away with it in this specific case, and instead have
&gt; the libosinfo project set up their own set of tailored container
&gt; images from day one?

Having containers per project looks reasonable, especially as we can
now more easily automate their creation so it isn't such an admin
burden as before.

Probably makes sense to still keep it all under the libvirt org,
since we're still reusing the libvirt jenkins toolchain.

We'd just need a project specific name prefix on each

Regards,
Daniel
-- 
|: <a  rel="nofollow" href="https://berrange.com">https://berrange.com</a>      -o-    <a  rel="nofollow" href="https://www.flickr.com/photos/dberrange">https://www.flickr.com/photos/dberrange</a> :|
|: <a  rel="nofollow" href="https://libvirt.org">https://libvirt.org</a>         -o-            <a  rel="nofollow" href="https://fstop138.berrange.com">https://fstop138.berrange.com</a> :|
|: <a  rel="nofollow" href="https://entangle-photo.org">https://entangle-photo.org</a>    -o-    <a  rel="nofollow" href="https://www.instagram.com/dberrange">https://www.instagram.com/dberrange</a> :|

--
libvir-list mailing list
libvir-list@xxxxxxxxxx
<a  rel="nofollow" href="https://www.redhat.com/mailman/listinfo/libvir-list">https://www.redhat.com/mailman/listinfo/libvir-list</a>



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div>
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg187657.html">[PATCH] util: command: Ignore bitmap errors when	enumerating file descriptors to close</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg187659.html">[PATCH] libvirt_private.syms: Properly expose virPCI*	function from virpci.h</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg187654.html">Re:  [dockerfiles PATCH 2/3] refresh: Add libosinfo-related projects</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg187647.html">[dockerfiles PATCH 1/3] refresh: Store projects in a more	convenient format</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#187658"><strong>Date</strong></a></li>
<li><a href="index.html#187658"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<center>
<font size=-1>
<a href=/lists/>[Index&nbsp;of&nbsp;Archives]</a>
&nbsp;
&nbsp;
<a href=/lists/virt-tools/>[Virt&nbsp;Tools]</a>
&nbsp;
&nbsp;
<a href=/linux/fedora/libvirt-users/>[Libvirt&nbsp;Users]</a>
&nbsp;
&nbsp;
<a href=/linux/fedora/libosinfo/>[Lib&nbsp;OS&nbsp;Info]</a>
&nbsp;
&nbsp;
<a href=/linux/fedora/fedora-users/>[Fedora&nbsp;Users]</a>
&nbsp;
&nbsp;
<a href=/lists/fedora-desktop/>[Fedora&nbsp;Desktop]</a>
&nbsp;
&nbsp;
<a href=/lists/fedora-selinux/>[Fedora&nbsp;SELinux]</a>
&nbsp;
&nbsp;
<a href=http://www.ske-art.com/z/biglist.php>[Big&nbsp;List&nbsp;of&nbsp;Linux&nbsp;Books]</a>
&nbsp;
&nbsp;
<a href=https://yosemitenews.info>[Yosemite&nbsp;News]</a>
&nbsp;
&nbsp;
<a href=/lists/kde/>[KDE&nbsp;Users]</a>
&nbsp;
&nbsp;
<a href=/lists/fedora-tools/>[Fedora&nbsp;Tools]</a>
</font>
</center>
<hr>
<p>
<div>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-format="autorelaxed"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="1424524564"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<table width=100%>
<tr>
<td align=left>&nbsp;</td>
<td align=right><a href=/lists/><img src=/button_01.gif border=0 alt="Powered by Linux"></a></td>
</tr>
</table>
<!--X-User-Footer-End-->
<script type="text/javascript"> 
 function initAddThis() {
    addthis.init()
 }
initAddThis();
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-760190-1', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
