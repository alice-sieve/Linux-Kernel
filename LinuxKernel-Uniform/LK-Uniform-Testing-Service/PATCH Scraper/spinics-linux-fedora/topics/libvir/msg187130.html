<!-- MHonArc v2.6.19 -->
<!--X-Subject: Re:  [PATCH v2 13/21] utils: Implement function to pass a buffer to send via a fd to virCommand -->
<!--X-From-R13: Egrsna Pretre &#60;fgrsnaoNyvahk.voz.pbz> -->
<!--X-Date: Thu, 11 Jul 2019 06:35:21 &#45;0700 -->
<!--X-Message-Id: df504f6e&#45;cd1e&#45;b6ac&#45;daef&#45;542c15c03a4d@linux.ibm.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20190710181208.1140833&#45;1&#45;stefanb@linux.vnet.ibm.com -->
<!--X-Reference: 20190710181208.1140833&#45;14&#45;stefanb@linux.vnet.ibm.com -->
<!--X-Reference: CAMxuvawXien6HyijbPJ7T38Rc_p5K3bmDhm+cTigZWy67oJWng@mail.gmail.com -->
<!--X-Reference: 247bd9a1&#45;d36a&#45;530a&#45;9a11&#45;66049dc65009@linux.ibm.com -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-3422782820843221",
          enable_page_level_ads: true
     });
</script>
<style>
<!--
 pre {white-space: pre-wrap;}
-->
</style>
<title>libvirt &mdash; Re:  [PATCH v2 13/21] utils: Implement function to pass a buffer to send via a fd to virCommand</title>
<meta name="description" content="libvirt: Re:  [PATCH v2 13/21] utils: Implement function to pass a buffer to send via a fd to virCommand">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="alternate" type="application/rss+xml" title="Libvirt Development" href="//feeds.feedburner.com/Libvir">
</head>
<body itemscope itemtype="//schema.org/Article" vlink=green>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<form action="//www.google.com" id="cse-search-box" target="_blank">
  <div>
    <input type="hidden" name="cx" value="partner-pub-3422782820843221:8422278960" />
    <input type="hidden" name="ie" value="UTF-8" />
    <input type="text" name="q" size="55" />
    <input type="submit" name="sa" value="Search" />
  </div>
</form>
<script type="text/javascript" src="//www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en"></script>
<h1>Re:  [PATCH v2 13/21] utils: Implement function to pass a buffer to send via a fd to virCommand</h1>
[<a href="msg187129.html">Date Prev</a>][<a href="msg187131.html">Date Next</a>][<a href="msg187118.html">Thread Prev</a>][<a href="msg187043.html">Thread Next</a>][<a href="maillist.html#187130">Date Index</a>][<a href="index.html#187130">Thread Index</a>] 


<p>&nbsp;<br>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive test for archives -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="6345952567"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>Subject</em>: Re:  [PATCH v2 13/21] utils: Implement function to pass a buffer to send via a fd to virCommand</li>
<li><em>From</em>: Stefan Berger &lt;stefanb@xxxxxxxxxxxxx&gt;</li>
<li><em>Date</em>: Thu, 11 Jul 2019 09:35:05 -0400</li>
<li><em>Cc</em>: libvir-list &lt;libvir-list@xxxxxxxxxx&gt;</li>
<li><em>In-reply-to</em>: &lt;<a href="msg187118.html">247bd9a1-d36a-530a-9a11-66049dc65009@linux.ibm.com</a>&gt;</li>
<li><em>References</em>: &lt;<a href="msg187034.html">20190710181208.1140833-1-stefanb@linux.vnet.ibm.com</a>&gt;	&lt;<a href="msg187042.html">20190710181208.1140833-14-stefanb@linux.vnet.ibm.com</a>&gt;	&lt;<a href="msg187066.html">CAMxuvawXien6HyijbPJ7T38Rc_p5K3bmDhm+cTigZWy67oJWng@mail.gmail.com</a>&gt;	&lt;<a href="msg187118.html">247bd9a1-d36a-530a-9a11-66049dc65009@linux.ibm.com</a>&gt;</li>
<li><em>User-agent</em>: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101	Thunderbird/60.6.1</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_4"></a>
<a class="addthis_button_compact"></a>
<a class="addthis_counter addthis_bubble_style"></a>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5196c2ae1be43d18&async=1&domready=1" async></script>
<!-- AddThis Button END -->
<hr>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive link 1 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="8681825769"
     data-ad-format="link"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>
<div class="content" itemprop="articleBody">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">
On 7/11/19 7:02 AM, Stefan Berger wrote:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
On 7/10/19 4:09 PM, Marc-Andr&#xE9; Lureau wrote:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
On Wed, Jul 10, 2019 at 10:12 PM Stefan Berger
&lt;stefanb@xxxxxxxxxxxxxxxxxx&gt; wrote:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
Implement virCommandSetSendBuffer() that allows the caller to pass a
file descriptor and buffer to virCommand. virCommand will write the
buffer into the file descriptor. That file descriptor could be the
write end of a pipe or one of the file descriptors of a socketpair.
The other file descriptor should be passed to the launched process to
read the data from.

Only implement the function to allocate memory for send buffers
and to free them later on.

Signed-off-by: Stefan Berger &lt;stefanb@xxxxxxxxxxxxx&gt;
</pre></blockquote><pre style="margin: 0em;">
that looks fine,
Reviewed-by: Marc-Andr&#xE9; Lureau &lt;marcandre.lureau@xxxxxxxxxx&gt;
</pre></blockquote><pre style="margin: 0em;">


</pre><tt>I may need to modify this patch here to set the file descriptor's 
</tt><tt>O_NONBLOCK flag...
</tt><pre style="margin: 0em;">


</pre></blockquote><tt>The poll behavior of a pipe is that it gets POLLOUT for as long as there 
</tt><tt>is room&#xA0; left to write, so we will fill it up in more or less passes 
</tt><tt>through the loop. I don't know how one could find out how much space 
</tt><tt>there is left to write on a pipe so that the loop at least would quiet 
</tt><tt>down after filling it up completely because this seems inefficient....
</tt><pre style="margin: 0em;">

--
libvir-list mailing list
libvir-list@xxxxxxxxxx
<a  rel="nofollow" href="https://www.redhat.com/mailman/listinfo/libvir-list">https://www.redhat.com/mailman/listinfo/libvir-list</a>



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div>
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg187129.html">Re:  [PATCH 1/5] lib: add API to query info about logged-in users</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg187131.html">Re:  [PATCH 04/23] util: add VIR_AUTOSTRUCT for directly calling a struct free function</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg187118.html">Re:  [PATCH v2 13/21] utils: Implement function to pass a buffer to send via a fd to virCommand</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg187043.html">[PATCH v2 11/21] tpm: Check whether previously found	executables were updated</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#187130"><strong>Date</strong></a></li>
<li><a href="index.html#187130"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<center>
<font size=-1>
<a href=/lists/>[Index&nbsp;of&nbsp;Archives]</a>
&nbsp;
&nbsp;
<a href=/lists/virt-tools/>[Virt&nbsp;Tools]</a>
&nbsp;
&nbsp;
<a href=/linux/fedora/libvirt-users/>[Libvirt&nbsp;Users]</a>
&nbsp;
&nbsp;
<a href=/linux/fedora/libosinfo/>[Lib&nbsp;OS&nbsp;Info]</a>
&nbsp;
&nbsp;
<a href=/linux/fedora/fedora-users/>[Fedora&nbsp;Users]</a>
&nbsp;
&nbsp;
<a href=/lists/fedora-desktop/>[Fedora&nbsp;Desktop]</a>
&nbsp;
&nbsp;
<a href=/lists/fedora-selinux/>[Fedora&nbsp;SELinux]</a>
&nbsp;
&nbsp;
<a href=http://www.ske-art.com/z/biglist.php>[Big&nbsp;List&nbsp;of&nbsp;Linux&nbsp;Books]</a>
&nbsp;
&nbsp;
<a href=https://yosemitenews.info>[Yosemite&nbsp;News]</a>
&nbsp;
&nbsp;
<a href=/lists/kde/>[KDE&nbsp;Users]</a>
&nbsp;
&nbsp;
<a href=/lists/fedora-tools/>[Fedora&nbsp;Tools]</a>
</font>
</center>
<hr>
<p>
<div>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-format="autorelaxed"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="1424524564"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<table width=100%>
<tr>
<td align=left>&nbsp;</td>
<td align=right><a href=/lists/><img src=/button_01.gif border=0 alt="Powered by Linux"></a></td>
</tr>
</table>
<!--X-User-Footer-End-->
<script type="text/javascript"> 
 function initAddThis() {
    addthis.init()
 }
initAddThis();
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-760190-1', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
