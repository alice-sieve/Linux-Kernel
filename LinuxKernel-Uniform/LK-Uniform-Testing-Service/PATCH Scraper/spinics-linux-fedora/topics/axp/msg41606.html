<!-- MHonArc v2.6.19 -->
<!--X-Subject: [PATCH 2.6.19 2/6] tgafb: Fix copying overlapping areas -->
<!--X-From-R13: "[npvrw I. Dbmlpxv" &#60;znpebNyvahk&#45;zvcf.bet> -->
<!--X-Date: Wed, 13 Dec 2006 12:10:46 &#45;0500 -->
<!--X-Message-Id: Pine.LNX.4.64N.0612131600360.24220@blysk.ds.pg.gda.pl -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<title>Linux AXP &mdash; [PATCH 2.6.19 2/6] tgafb: Fix copying overlapping areas</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Linux AXP, [PATCH 2.6.19 2/6] tgafb: Fix copying overlapping areas">
<style>
<!--
 pre {white-space: pre-wrap;}
-->
</style>
<meta name="keywords" content="[PATCH 2.6.19 2/6] tgafb: Fix copying overlapping areas, fedora, red hat, linux, rpm, package, packaging, archive">
<link rel="alternate" type="application/rss+xml" title="Linux AXP" href="maillist.rdf">
</head>
<body itemscope itemtype="//schema.org/Article" vlink=green>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<form action="//www.google.com" id="cse-search-box" target="_blank">
  <div>
    <input type="hidden" name="cx" value="partner-pub-3422782820843221:9580497365" />
    <input type="hidden" name="ie" value="UTF-8" />
    <input type="text" name="q" size="35" />
    <input type="submit" name="sa" value="Search" />
  </div>
</form>
<script type="text/javascript" src="//www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en"></script>
<h1 itemprop="name">[PATCH 2.6.19 2/6] tgafb: Fix copying overlapping areas</h1>
[<a href="msg41605.html">Date Prev</a>][<a href="msg41607.html">Date Next</a>][<a href="msg41605.html">Thread Prev</a>][<a href="msg41607.html">Thread Next</a>][<a href="maillist.html#41606">Date Index</a>][<a href="index.html#41606">Thread Index</a>]


<p>&nbsp;<br>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive test for archives -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="6345952567"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>Subject</em>: [PATCH 2.6.19 2/6] tgafb: Fix copying overlapping areas</li>
<li><em>From</em>: &quot;Maciej W. Rozycki&quot; &lt;<a href="mailto:macro@DOMAIN.HIDDEN">macro@xxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Wed, 13 Dec 2006 17:10:36 +0000 (GMT)</li>
<li><em>Cc</em>: <a href="mailto:axp-list@DOMAIN.HIDDEN">axp-list@xxxxxxxxxx</a>, <a href="mailto:linux-fbdev-devel@DOMAIN.HIDDEN">linux-fbdev-devel@xxxxxxxxxxxxxxxxxxxxx</a>,	<a href="mailto:linux-kernel@DOMAIN.HIDDEN">linux-kernel@xxxxxxxxxxxxxxx</a></li>
<li><em>Reply-to</em>: Linux on Alpha processors &lt;<a href="mailto:axp-list@DOMAIN.HIDDEN">axp-list@xxxxxxxxxx</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_4"></a>
<a class="addthis_button_compact"></a>
<a class="addthis_counter addthis_bubble_style"></a>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5196c2ae1be43d18"></script>
<!-- AddThis Button END -->
<hr>
<script type="text/javascript"><!--
google_ad_client = "ca-pub-3422782820843221";
/* lists link unit 728x15, created 7/7/08 */
google_ad_slot = "9367657018";
google_ad_width = 728;
google_ad_height = 15;
//-->
</script>
<script type="text/javascript"
src="//pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
<p>
<div class="content" itemprop="articleBody">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre> The direction of copying in the copyarea functions is selected 
incorrectly, resulting in corruption.  This is a fix.

Signed-off-by: Maciej W. Rozycki &lt;macro@xxxxxxxxxxxxxx&gt;
---

 It looks like these functions are not used by the console code as image 
blitting is preferred for scrolling and hence the bug has escaped 
unnoticed for so long.  Still it is not an excuse for these functions to 
be wrong.

 Please apply.

  Maciej

patch-mips-2.6.18-20060920-tgafb-copyarea-1
diff -up --recursive --new-file linux-mips-2.6.18-20060920.macro/drivers/video/tgafb.c linux-mips-2.6.18-20060920/drivers/video/tgafb.c
--- linux-mips-2.6.18-20060920.macro/drivers/video/tgafb.c	2006-09-20 20:50:52.000000000 +0000
+++ linux-mips-2.6.18-20060920/drivers/video/tgafb.c	2006-12-12 05:15:28.000000000 +0000
@@ -919,7 +919,7 @@ copyarea_line_8bpp(struct fb_info *info,
 
 	n64 = (height * width) / 64;
 
-	if (dy &lt; sy) {
+	if (sy &lt; dy) {
 		spos = (sy + height) * width;
 		dpos = (dy + height) * width;
 
@@ -967,7 +967,7 @@ copyarea_line_32bpp(struct fb_info *info
 
 	n16 = (height * width) / 16;
 
-	if (dy &lt; sy) {
+	if (sy &lt; dy) {
 		src = tga_fb + (sy + height) * width * 4;
 		dst = tga_fb + (dy + height) * width * 4;
 

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div>
<hr>
[<a href="msg41605.html">Date Prev</a>][<a href="msg41607.html">Date Next</a>][<a href="msg41605.html">Thread Prev</a>][<a href="msg41607.html">Thread Next</a>][<a href="maillist.html#41606">Date Index</a>][<a href="index.html#41606">Thread Index</a>]
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg41605.html">[PATCH 2.6.19 0/6] tgafb: Various fixes</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg41607.html">[PATCH 2.6.19 3/6] tgafb: Support the DirectColor visual</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg41605.html">[PATCH 2.6.19 0/6] tgafb: Various fixes</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg41607.html">[PATCH 2.6.19 3/6] tgafb: Support the DirectColor visual</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#41606"><strong>Date</strong></a></li>
<li><a href="index.html#41606"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<center>
<font size=-1>
<a href=/lists/>[Index&nbsp;of&nbsp;Archives]</a>
&nbsp;
&nbsp;
<a href=/lists/fedora-devel/>[Fedora&nbsp;Development]</a>
&nbsp;
&nbsp;
<a href=/linux/fedora/fedora-users/>[Fedora&nbsp;Users]</a>
&nbsp;
&nbsp;
<a href=/lists/fedora-desktop/>[Fedora&nbsp;Desktop]</a>
&nbsp;
&nbsp;
<a href=/lists/fedora-selinux/>[Fedora&nbsp;SELinux]</a>
&nbsp;
&nbsp;
<a href=/linux/biglist.html>[Big&nbsp;List&nbsp;of&nbsp;Linux&nbsp;Books]</a>
&nbsp;
&nbsp;
<a href=https://yosemitenews.info>[Yosemite&nbsp;News]</a>
&nbsp;
&nbsp;
<a href=/lists/kde/>[KDE&nbsp;Users]</a>
&nbsp;
&nbsp;
<a href=/lists/fedora-tools/>[Fedora&nbsp;Tools]</a>
</font>
</center>
<!--X-User-Footer-End-->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-760190-1', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
