<!-- MHonArc v2.6.19 -->
<!--X-Subject: Re: [PATCH] pykickstart: don't set bootProto if &#45;&#45;noipv4 -->
<!--X-From-R13: Quevf Zhzraf &#60;pyhzrafNerqung.pbz> -->
<!--X-Date: Mon, 19 Oct 2015 11:10:38 &#45;0700 -->
<!--X-Message-Id: 20151019180219.GN29734@exeter.usersys.redhat.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 1445030406&#45;19215&#45;1&#45;git&#45;send&#45;email&#45;jbacik@fb.com -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-3422782820843221",
          enable_page_level_ads: true
     });
</script>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Kickstart, Re: [PATCH] pykickstart: don't set bootProto if --noipv4">
<style>
<!--
 pre {white-space: pre-wrap;}
-->
</style>
<title>Kickstart &mdash; Re: [PATCH] pykickstart: don't set bootProto if --noipv4</title>
<link rel="alternate" type="application/rss+xml" title="Kickstart" href="maillist.rdf">
</head>
<body itemscope itemtype="//schema.org/Article" vlink=green>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<form action="//www.google.com" id="cse-search-box" target="_blank">
  <div>
    <input type="hidden" name="cx" value="partner-pub-3422782820843221:9580497365" />
    <input type="hidden" name="ie" value="UTF-8" />
    <input type="text" name="q" size="55" />
    <input type="submit" name="sa" value="Search" />
  </div>
</form>
<script type="text/javascript" src="//www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en"></script>
<h1 itemprop="name">Re: [PATCH] pykickstart: don't set bootProto if --noipv4</h1>
[<a href="msg11630.html">Date Prev</a>][<a href="msg11632.html">Date Next</a>][<a href="msg11630.html">Thread Prev</a>][<a href="msg11632.html">Thread Next</a>][<a href="maillist.html#11631">Date Index</a>][<a href="index.html#11631">Thread Index</a>]


<p>&nbsp;<br>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive test for archives -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="6345952567"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>Subject</em>: Re: [PATCH] pykickstart: don't set bootProto if --noipv4</li>
<li><em>From</em>: Chris Lumens &lt;<a href="mailto:clumens@DOMAIN.HIDDEN">clumens@xxxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Mon, 19 Oct 2015 14:02:19 -0400</li>
<li><em>In-reply-to</em>: &lt;<a href="msg11630.html">1445030406-19215-1-git-send-email-jbacik@fb.com</a>&gt;</li>
<li><em>Mail-followup-to</em>: <a href="mailto:kickstart-list@DOMAIN.HIDDEN">kickstart-list@xxxxxxxxxx</a></li>
<li><em>References</em>: &lt;<a href="msg11630.html">1445030406-19215-1-git-send-email-jbacik@fb.com</a>&gt;</li>
<li><em>Reply-to</em>: Discussion list about Kickstart &lt;<a href="mailto:kickstart-list@DOMAIN.HIDDEN">kickstart-list@xxxxxxxxxx</a>&gt;</li>
<li><em>User-agent</em>: Mutt/1.5.23 (2014-03-12)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_4"></a>
<a class="addthis_button_compact"></a>
<a class="addthis_counter addthis_bubble_style"></a>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5196c2ae1be43d18&async=1&domready=1" async></script>
<!-- AddThis Button END -->
<hr>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive link 1 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="8681825769"
     data-ad-format="link"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>
<div class="content" itemprop="articleBody">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>&gt; diff --git a/pykickstart/commands/network.py b/pykickstart/commands/network.py
&gt; index 818be79..58992c3 100644
&gt; --- a/pykickstart/commands/network.py
&gt; +++ b/pykickstart/commands/network.py
&gt; @@ -399,6 +399,15 @@ class FC6_Network(FC4_Network):
&gt;                        default=False)
&gt;          return op
&gt;  
&gt; +    def parse(self, args):
&gt; +        retval = FC4_Network.parse(self, args)
&gt; +
&gt; +        # If we specify noipv4 then we need to make sure bootproto is zero'ed
&gt; +        # out
&gt; +        if retval.noipv4:
&gt; +            retval.bootProto = &quot;&quot;
&gt; +        return retval
&gt; +
&gt;  class F8_Network(FC6_Network):
&gt;      removedKeywords = FC6_Network.removedKeywords
&gt;      removedAttrs = FC6_Network.removedAttrs
&gt; diff --git a/tests/commands/network.py b/tests/commands/network.py
&gt; index dbad1f9..0645555 100644
&gt; --- a/tests/commands/network.py
&gt; +++ b/tests/commands/network.py
&gt; @@ -35,6 +35,16 @@ class F20_TestCase(CommandTest):
&gt;          cmd = &quot;network --device team0 --bootproto dhcp --teamslaves=p3p1,p3p2 --teamconfig=\&quot;{\\\&quot;runner\\\&quot;: {\\\&quot;name\\\&quot;: \\\&quot;roundrobin\\\&quot;}}\&quot; --activate&quot;
&gt;          self.assert_parse(cmd)
&gt;  
&gt; +        cmd = &quot;network --noipv4 --activate --hostname=blah.test.com --ipv6=1:2:3:4:5:6:7:8 --device eth0 --nameserver=1:1:1:1::,2:2:2:2::&quot;
&gt; +        nd = self.assert_parse(cmd)
&gt; +        self.assertEquals(nd.bootProto, &quot;&quot;)
&gt; +        self.assertEquals(nd.hostname, &quot;blah.test.com&quot;)
&gt; +        self.assertTrue(nd.noipv4)
&gt; +        self.assertEquals(nd.ipv6, &quot;1:2:3:4:5:6:7:8&quot;)
&gt; +        self.assertIn(&quot;1:1:1:1::&quot;, nd.nameserver)
&gt; +        self.assertIn(&quot;2:2:2:2::&quot;, nd.nameserver)
&gt; +        self.assertEquals(nd.device, &quot;eth0&quot;)
&gt; +
&gt;          # --teamslaves
&gt;          # --teamslaves=&quot;&lt;DEV1&gt;['&lt;CONFIG1&gt;'],&lt;DEV2&gt;['&lt;CONFIG2&gt;'],...&quot;
&gt;          # CONFIGX is json with &quot; escaped to \&quot;

Annoying as it is, I think this fix belongs in an F24 version of the
network command.  It's possible changing this all the way back to FC6
will break some user of pykickstart that's relying on it.

- Chris

_______________________________________________
Kickstart-list mailing list
Kickstart-list@xxxxxxxxxx
<a  rel="nofollow" href="https://www.redhat.com/mailman/listinfo/kickstart-list">https://www.redhat.com/mailman/listinfo/kickstart-list</a>


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div>
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg11630.html">[PATCH] pykickstart: don't set bootProto if --noipv4</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg11632.html">Re: [PATCH] pykickstart: don't set bootProto if --noipv4</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg11630.html">[PATCH] pykickstart: don't set bootProto if --noipv4</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg11632.html">Re: [PATCH] pykickstart: don't set bootProto if --noipv4</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#11631"><strong>Date</strong></a></li>
<li><a href="index.html#11631"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<center>
<font size=-1>
<a href=/lists/>[Index&nbsp;of&nbsp;Archives]</a>
&nbsp;
&nbsp;
<a href=/lists/redhat/>[Red&nbsp;Hat&nbsp;General]</a>
&nbsp;
&nbsp;
<a href=/lists/centos/>[CentOS&nbsp;Users]</a>
&nbsp;
&nbsp;
<a href=/linux/fedora/fedora-users/>[Fedora&nbsp;Users]</a>
&nbsp;
&nbsp;
<a href=/linux/fedora/fedora-maintainers/>[Fedora&nbsp;Maintainers]</a>
&nbsp;
&nbsp;
<a href=/lists/fedora-desktop/>[Fedora&nbsp;Desktop]</a>
&nbsp;
&nbsp;
<a href=/lists/fedora-selinux/>[Fedora&nbsp;SELinux]</a>
&nbsp;
&nbsp;
<a href=http://www.ske-art.com/z//biglist.php>[Big&nbsp;List&nbsp;of&nbsp;Linux&nbsp;Books]</a>
&nbsp;
&nbsp;
<a href=https://yosemitenews.info>[Yosemite&nbsp;News]</a>
&nbsp;
&nbsp;
<a href=/lists/kde/>[KDE&nbsp;Users]</a>
</font>
</center>
<hr>
<p>
<div>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-format="autorelaxed"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="1424524564"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<table width=100%>
<tr>
<td align=left>&nbsp;</td>
<td align=right><a href=/lists/><img src=/button_01.gif border=0 alt="Powered by Linux"></a></td>
</tr>
</table>
<!--X-User-Footer-End-->
<script type="text/javascript"> 
 function initAddThis() {
    addthis.init()
 }
initAddThis();
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-760190-1', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
