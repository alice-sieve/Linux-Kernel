<!-- MHonArc v2.6.19 -->
<!--X-Subject: Re: [PATCH v2] use pkg&#45;config to search for libtirpc to fix cross&#45;compilation -->
<!--X-From-R13: Inyqrzne Pebqxbeo &#60;jokNbcranqx.bet> -->
<!--X-Date: Thu, 29 Jun 2017 02:08:17 &#45;0700 -->
<!--X-Message-Id: 20170629090814.GD26922@waldemar&#45;brodkorb.de -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20170628102950.GA7247@waldemar&#45;brodkorb.de -->
<!--X-Reference: 1498694049.2734.0.camel@themaw.net -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-3422782820843221",
          enable_page_level_ads: true
     });
</script>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Re: [PATCH v2] use pkg-config to search for libtirpc to fix cross-compilation &mdash; Linux AutoFS">
<style>
<!--
 pre {white-space: pre-wrap;}
-->
</style>
<title>Re: [PATCH v2] use pkg-config to search for libtirpc to fix cross-compilation &mdash; Linux AutoFS</title>
<link rel="alternate" type="application/rss+xml" title="Linux AutoFS" href="//feeds.feedburner.com/autofs">
<script type="text/javascript">
var addthis_config = addthis_config||{};
addthis_config.data_track_addressbar = false;
</script>
</head>
<body itemscope itemtype="//schema.org/Article" vlink=green>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<form action="//www.google.com/cse" id="cse-search-box" target="_blank">
  <div>
    <input type="hidden" name="cx" value="partner-pub-3422782820843221:isdiegq275o" />
    <input type="hidden" name="ie" value="ISO-8859-1" />
    <input type="text" name="q" size="37" />
    <input type="submit" name="sa" value="Search" />
  </div>
</form>
<script type="text/javascript" src="//www.google.com/cse/brand?form=cse-search-box&amp;lang=en"></script>
<h1 itemprop="name">Re: [PATCH v2] use pkg-config to search for libtirpc to fix cross-compilation</h1>
[<a href="msg01627.html">Date Prev</a>][<a href="msg01629.html">Date Next</a>][<a href="msg01627.html">Thread Prev</a>][<a href="msg01629.html">Thread Next</a>][<a href="maillist.html#01628">Date Index</a>][<a href="index.html#01628">Thread Index</a>]


<p>&nbsp;<br>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive test for archives -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="6345952567"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: Ian Kent &lt;raven@xxxxxxxxxx&gt;</li>
<li><em>Subject</em>: Re: [PATCH v2] use pkg-config to search for libtirpc to fix cross-compilation</li>
<li><em>From</em>: Waldemar Brodkorb &lt;wbx@xxxxxxxxxxx&gt;</li>
<li><em>Date</em>: Thu, 29 Jun 2017 11:08:14 +0200</li>
<li><em>Cc</em>: Waldemar Brodkorb &lt;wbx@xxxxxxxxxxx&gt;, autofs@xxxxxxxxxxxxxxx</li>
<li><em>In-reply-to</em>: &lt;<a href="msg01627.html">1498694049.2734.0.camel@themaw.net</a>&gt;</li>
<li><em>References</em>: &lt;<a href="msg01626.html">20170628102950.GA7247@waldemar-brodkorb.de</a>&gt; &lt;<a href="msg01627.html">1498694049.2734.0.camel@themaw.net</a>&gt;</li>
<li><em>User-agent</em>: Mutt/1.5.23 (2014-03-12)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_4"></a>
<a class="addthis_button_compact"></a>
<a class="addthis_counter addthis_bubble_style"></a>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5196c2ae1be43d18&async=1&domready=1" async></script>
<!-- AddThis Button END -->
<hr>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive link 1 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="8681825769"
     data-ad-format="link"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>
<div class="content" itemprop="articleBody">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Hi,
Ian Kent wrote,

&gt; On Wed, 2017-06-28 at 12:29 +0200, Waldemar Brodkorb wrote:
&gt; &gt; When trying to cross-compile autofs for example with a buildsystem
&gt; &gt; like buildroot, the compilation fails in case the user wants to use
&gt; &gt; libtirpc library as RPC implementation. A hard coded include path
&gt; &gt; in aclocal.m4 is used. Other opensource software like rpcbind or
&gt; &gt; nfs-utils are suing autotools pkgconfig infrastructure to find
&gt; &gt; the libtirpc headers and to pass the correct linker flags.
&gt; &gt; 
&gt; &gt; Convert configure.in to use PKG_CHECK_MODULES and remove the
&gt; &gt; hand written autoconf macros from aclocal.m4.
&gt; &gt; 
&gt; &gt; To autoreconf the package you need pkg-config or pkgconf installed,
&gt; &gt; which provides the needed autoconf macros in pkg.m4. For an
&gt; &gt; non-automake project a full path to pkg.m4 is required.
&gt; &gt; 
&gt; &gt; This fixes cross-compilation of autofs and allows to use
&gt; &gt; alternative C libraries as uClibc-ng without internal RPC
&gt; &gt; support to be used in cross-compiling environments.
&gt; &gt; 
&gt; &gt; Signed-off-by: Waldemar Brodkorb &lt;wbx@xxxxxxxxxxx&gt;
&gt; &gt; ---
&gt; &gt; v1 -&gt; v2:
&gt; &gt; &#xA0; - add a better commit decription
&gt; &gt; &#xA0; - add back missing TIRPC_WORKAROUND/WITH_LIBTIRPC defines
&gt; &gt; &#xA0; - add back AC_CHECK_FUNCS([getrpcbyname getservbyname])
&gt; &gt; 
&gt; &gt; For autoheader/autoconf to generate configure/config.h you
&gt; &gt; need to have pkg-config installed on your development machine.
&gt; &gt; When the user does not have installed pkg-config later, he
&gt; &gt; can use autofs without libtirpc as before.&#xA0;
&gt; &gt; Configure will fail when the user use --with-libtirpc and
&gt; &gt; pkg-config is not installed.
&gt; 
&gt; Thanks for this, I'll have a look through it.
&gt; 
&gt; &gt; +# for pkg-config macros
&gt; &gt; +m4_include([/usr/share/aclocal/pkg.m4])
&gt; &gt; +

Yann (Buildroot developer) found out, that this include
can be avoided when the aclocal.m4 would be moved.
It seems autoconf does not search for macros in any
global directories, if this file is in the current
directory found.

Add this to configure.in: AC_CONFIG_MACRO_DIR([m4])
mkdir m4
git mv aclocal.m4 m4/autofs-macros.m4

Should I update the patch, according to this?

best regards
 Waldemar
--
To unsubscribe from this list: send the line &quot;unsubscribe autofs&quot; in


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div>
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="01629" href="msg01629.html">Re: [PATCH v2] use pkg-config to search for libtirpc to fix cross-compilation</a></strong>
<ul><li><em>From:</em> Ian Kent</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="01626" href="msg01626.html">[PATCH v2] use pkg-config to search for libtirpc to fix cross-compilation</a></strong>
<ul><li><em>From:</em> Waldemar Brodkorb</li></ul></li>
<li><strong><a name="01627" href="msg01627.html">Re: [PATCH v2] use pkg-config to search for libtirpc to fix cross-compilation</a></strong>
<ul><li><em>From:</em> Ian Kent</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg01627.html">Re: [PATCH v2] use pkg-config to search for libtirpc to fix cross-compilation</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg01629.html">Re: [PATCH v2] use pkg-config to search for libtirpc to fix cross-compilation</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg01627.html">Re: [PATCH v2] use pkg-config to search for libtirpc to fix cross-compilation</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg01629.html">Re: [PATCH v2] use pkg-config to search for libtirpc to fix cross-compilation</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#01628"><strong>Date</strong></a></li>
<li><a href="index.html#01628"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<center>
<font size=-1>
<a href=/lists/>[Index&nbsp;of&nbsp;Archives]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-fsdevel/>[Linux&nbsp;Filesystem&nbsp;Development]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-ext4/>[Linux&nbsp;Ext4]</a>
&nbsp;
&nbsp;
<a href=/lists/arm-kernel/>[Linux&nbsp;ARM&nbsp;Kernel]</a>
&nbsp;
&nbsp;
<a href=/lists/arm/>[Linux&nbsp;ARM]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-omap/>[Linux&nbsp;Omap]</a>
&nbsp;
&nbsp;
<a href=/linux/fedora/fedora-arm/>[Fedora&nbsp;ARM]</a>
&nbsp;
&nbsp;
<a href=/lists/ietf-ann/>[IETF&nbsp;Annouce]</a>
&nbsp;
&nbsp;
<a href=/lists/security/>[Security]</a>
&nbsp;
&nbsp;
<a href=/lists/bugtraq/>[Bugtraq]</a>
&nbsp;
&nbsp;
<a href=/linux/>[Linux]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-omap/>[Linux&nbsp;OMAP]</a>
&nbsp;
&nbsp;
<a href=/lists/mips/>[Linux&nbsp;MIPS]</a>
&nbsp;
&nbsp;
<a href=/lists/ecos/>[ECOS]</a>
&nbsp;
&nbsp;
<a href=/lists/asterisk/>[Asterisk&nbsp;Internet&nbsp;PBX]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-api/>[Linux&nbsp;API]</a>
</font>
</center>
<hr>
<p>
<div>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-format="autorelaxed"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="1424524564"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<table width=100%>
<tr>
<td align=left>&nbsp;</td>
<td align=right><a href=/lists/><img src=/button_01.gif border=0 alt="Powered by Linux"></a></td>
</tr>
</table>
<!--X-User-Footer-End-->
<script type="text/javascript"> 
 function initAddThis() {
    addthis.init()
 }
initAddThis();
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-760190-1', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
