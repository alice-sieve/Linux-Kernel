<!-- MHonArc v2.6.19 -->
<!--X-Subject: Re: [PATCH 1/8] vfs &#45; change d_manage() to take a struct path -->
<!--X-From-R13: Wna Yrag &#60;eniraNgurznj.arg> -->
<!--X-Date: Wed, 26 Oct 2016 19:48:01 &#45;0700 -->
<!--X-Message-Id: 1477536470.2898.12.camel@themaw.net -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20161011053352.27645.83962.stgit@pluto.themaw.net -->
<!--X-Reference: 20161019124031.94a44fbdd0970989f05d1893@linux&#45;foundation.org -->
<!--X-Reference: 1477006776.3207.14.camel@themaw.net -->
<!--X-Reference: 20161027021111.GI19539@ZenIV.linux.org.uk -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-3422782820843221",
          enable_page_level_ads: true
     });
</script>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Re: [PATCH 1/8] vfs - change d_manage() to take a struct path &mdash; Linux AutoFS">
<style>
<!--
 pre {white-space: pre-wrap;}
-->
</style>
<title>Re: [PATCH 1/8] vfs - change d_manage() to take a struct path &mdash; Linux AutoFS</title>
<link rel="alternate" type="application/rss+xml" title="Linux AutoFS" href="//feeds.feedburner.com/autofs">
<script type="text/javascript">
var addthis_config = addthis_config||{};
addthis_config.data_track_addressbar = false;
</script>
</head>
<body itemscope itemtype="//schema.org/Article" vlink=green>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<form action="//www.google.com/cse" id="cse-search-box" target="_blank">
  <div>
    <input type="hidden" name="cx" value="partner-pub-3422782820843221:isdiegq275o" />
    <input type="hidden" name="ie" value="ISO-8859-1" />
    <input type="text" name="q" size="37" />
    <input type="submit" name="sa" value="Search" />
  </div>
</form>
<script type="text/javascript" src="//www.google.com/cse/brand?form=cse-search-box&amp;lang=en"></script>
<h1 itemprop="name">Re: [PATCH 1/8] vfs - change d_manage() to take a struct path</h1>
[<a href="msg01492.html">Date Prev</a>][<a href="msg01494.html">Date Next</a>][<a href="msg01491.html">Thread Prev</a>][<a href="msg01495.html">Thread Next</a>][<a href="maillist.html#01493">Date Index</a>][<a href="index.html#01493">Thread Index</a>]


<p>&nbsp;<br>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive test for archives -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="6345952567"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: Al Viro &lt;viro@xxxxxxxxxxxxxxxxxx&gt;</li>
<li><em>Subject</em>: Re: [PATCH 1/8] vfs - change d_manage() to take a struct path</li>
<li><em>From</em>: Ian Kent &lt;raven@xxxxxxxxxx&gt;</li>
<li><em>Date</em>: Thu, 27 Oct 2016 10:47:50 +0800</li>
<li><em>Cc</em>: Andrew Morton &lt;akpm@xxxxxxxxxxxxxxxxxxxx&gt;,        autofs mailing list &lt;autofs@xxxxxxxxxxxxxxx&gt;,        Kernel Mailing List &lt;linux-kernel@xxxxxxxxxxxxxxx&gt;,        &quot;Eric W. Biederman&quot; &lt;ebiederm@xxxxxxxxxxxx&gt;,        linux-fsdevel &lt;linux-fsdevel@xxxxxxxxxxxxxxx&gt;,        Omar Sandoval &lt;osandov@xxxxxxxxxxx&gt;</li>
<li><em>In-reply-to</em>: &lt;<a href="msg01491.html">20161027021111.GI19539@ZenIV.linux.org.uk</a>&gt;</li>
<li><em>References</em>: &lt;<a href="msg01441.html">20161011053352.27645.83962.stgit@pluto.themaw.net</a>&gt;         &lt;<a href="msg01451.html">20161019124031.94a44fbdd0970989f05d1893@linux-foundation.org</a>&gt;         &lt;<a href="msg01452.html">1477006776.3207.14.camel@themaw.net</a>&gt;         &lt;<a href="msg01491.html">20161027021111.GI19539@ZenIV.linux.org.uk</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_4"></a>
<a class="addthis_button_compact"></a>
<a class="addthis_counter addthis_bubble_style"></a>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5196c2ae1be43d18&async=1&domready=1" async></script>
<!-- AddThis Button END -->
<hr>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive link 1 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="8681825769"
     data-ad-format="link"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>
<div class="content" itemprop="articleBody">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>On Thu, 2016-10-27 at 03:11 +0100, Al Viro wrote:
&gt; On Fri, Oct 21, 2016 at 07:39:36AM +0800, Ian Kent wrote:
&gt; 
&gt; &gt; 
&gt; &gt; Maybe Al has been too busy to comment, he has been on the Cc from the start.
&gt; That's... a very mild version of what's been going on.&#xA0;&#xA0;Let's just say that
&gt; the last few weeks had been really interesting.&#xA0;&#xA0;Not that the shit has
&gt; settled, but there was some slackening in the shitstorm last few days.
&gt; Unlikely to last, I'm afraid, but...
&gt; &#xA0;
&gt; &gt; 
&gt; &gt; Hopefully this email will prompt a review, Al?
&gt; Aside of the Eric's note re constifying struct path (strongly seconded),
&gt; I'm not sure if expiration-related side of that is correct.&#xA0;&#xA0;OTOH,
&gt; since the expiration happens from userland...

Sure, I have a follow up series to do the constifying as recommended by Eric and
now yourself.

&gt; 
&gt; How much testing did it get?&#xA0;&#xA0;I've several test setups involving
&gt; autofs, but they are nowhere near exhaustive and I don't have good
&gt; enough feel of the codebase to slap together something with decent
&gt; coverage...

It got my standard testing.

For that I use a modified version of the autofs Connectathon system.

It's more about testing a wide variety of syntax and map setups and so exercises
a large number of different types of autofs mounts.

It's meant to check normal operation but not so much stress testing even though
it does perform quite a few mounts (around 250-300, not to mention the autofs
mounts themselves).

I have another standard test I call the submount-test and it was originally done
to stress test the most common problem I see, concurrent expire to mount.

I didn't see any problems I couldn't explain in these but I might need to re-
visit the submount-test to see if it is still doing what I want.

OTOH, the pattern of mount and umount I see when the submount-test is run does
look like it is doing what I want but it might not be getting all the way to the
top of the tree of mounts enough times over the course of the test.

So I'm happy with my testing, just not as happy as I could be.

Ian
--
To unsubscribe from this list: send the line &quot;unsubscribe autofs&quot; in


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div>
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="01495" href="msg01495.html">Re: [PATCH 1/8] vfs - change d_manage() to take a struct path</a></strong>
<ul><li><em>From:</em> Ian Kent</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="01441" href="msg01441.html">[PATCH 1/8] vfs - change d_manage() to take a struct path</a></strong>
<ul><li><em>From:</em> Ian Kent</li></ul></li>
<li><strong><a name="01451" href="msg01451.html">Re: [PATCH 1/8] vfs - change d_manage() to take a struct path</a></strong>
<ul><li><em>From:</em> Andrew Morton</li></ul></li>
<li><strong><a name="01452" href="msg01452.html">Re: [PATCH 1/8] vfs - change d_manage() to take a struct path</a></strong>
<ul><li><em>From:</em> Ian Kent</li></ul></li>
<li><strong><a name="01491" href="msg01491.html">Re: [PATCH 1/8] vfs - change d_manage() to take a struct path</a></strong>
<ul><li><em>From:</em> Al Viro</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg01492.html">Re: [PATCH 6/8] autofs - use path_is_mountpoint() to fix unreliable d_mountpoint() checks</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg01494.html">Re: [PATCH 6/8] autofs - use path_is_mountpoint() to fix unreliable d_mountpoint() checks</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg01491.html">Re: [PATCH 1/8] vfs - change d_manage() to take a struct path</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg01495.html">Re: [PATCH 1/8] vfs - change d_manage() to take a struct path</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#01493"><strong>Date</strong></a></li>
<li><a href="index.html#01493"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<center>
<font size=-1>
<a href=/lists/>[Index&nbsp;of&nbsp;Archives]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-fsdevel/>[Linux&nbsp;Filesystem&nbsp;Development]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-ext4/>[Linux&nbsp;Ext4]</a>
&nbsp;
&nbsp;
<a href=/lists/arm-kernel/>[Linux&nbsp;ARM&nbsp;Kernel]</a>
&nbsp;
&nbsp;
<a href=/lists/arm/>[Linux&nbsp;ARM]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-omap/>[Linux&nbsp;Omap]</a>
&nbsp;
&nbsp;
<a href=/linux/fedora/fedora-arm/>[Fedora&nbsp;ARM]</a>
&nbsp;
&nbsp;
<a href=/lists/ietf-ann/>[IETF&nbsp;Annouce]</a>
&nbsp;
&nbsp;
<a href=/lists/security/>[Security]</a>
&nbsp;
&nbsp;
<a href=/lists/bugtraq/>[Bugtraq]</a>
&nbsp;
&nbsp;
<a href=/linux/>[Linux]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-omap/>[Linux&nbsp;OMAP]</a>
&nbsp;
&nbsp;
<a href=/lists/mips/>[Linux&nbsp;MIPS]</a>
&nbsp;
&nbsp;
<a href=/lists/ecos/>[ECOS]</a>
&nbsp;
&nbsp;
<a href=/lists/asterisk/>[Asterisk&nbsp;Internet&nbsp;PBX]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-api/>[Linux&nbsp;API]</a>
</font>
</center>
<hr>
<p>
<div>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-format="autorelaxed"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="1424524564"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<table width=100%>
<tr>
<td align=left>&nbsp;</td>
<td align=right><a href=/lists/><img src=/button_01.gif border=0 alt="Powered by Linux"></a></td>
</tr>
</table>
<!--X-User-Footer-End-->
<script type="text/javascript"> 
 function initAddThis() {
    addthis.init()
 }
initAddThis();
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-760190-1', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
