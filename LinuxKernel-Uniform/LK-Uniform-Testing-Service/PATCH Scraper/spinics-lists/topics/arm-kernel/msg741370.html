<!-- MHonArc v2.6.19 -->
<!--X-Subject: [PATCH v3 02/11] dt&#45;bindings: clock: imx&#45;lpcg: add support to parse clocks from device tree -->
<!--X-From-R13: Rbat Ovfurat &#60;nvfurat.qbatNakc.pbz> -->
<!--X-Date: Tue, 16 Jul 2019 08:24:53 &#45;0700 -->
<!--X-Message-Id: 1563289265&#45;10977&#45;3&#45;git&#45;send&#45;email&#45;aisheng.dong@nxp.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 1563289265&#45;10977&#45;1&#45;git&#45;send&#45;email&#45;aisheng.dong@nxp.com -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-3422782820843221",
          enable_page_level_ads: true
     });
</script>
<style>
<!--
 pre {white-space: pre-wrap;}
-->
</style>
<meta name="description" content="Linux ARM, OMAP, Xscale Kernel: [PATCH v3 02/11] dt-bindings: clock: imx-lpcg: add support to parse clocks from device tree">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>[PATCH v3 02/11] dt-bindings: clock: imx-lpcg: add support to parse clocks from device tree &mdash; ARM, OMAP, Xscale Linux Kernel</title>
<link rel="alternate" type="application/rss+xml" title="Linux ARM Kernel" href="//feedproxy.google.com/LinuxArmKernel">
<link rel="alternate" type="application/rss+xml" title="Linux ARM Kernel" href="//feeds.feedburner.com/LinuxArmxscaleEtc">
<link rel="alternate" type="application/rss+xml" title="Fedora ARM" href="//feeds.feedburner.com/FedoraArm">
<link rel="alternate" type="application/rss+xml" title="Linux for OMAP" href="//feedproxy.google.com/LinuxOmap">
</head>
<body itemscope itemtype="//schema.org/Article" vlink=green>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<td align=right><form action="//www.google.com/cse" id="cse-search-box" target="_blank">
  <div>
    <input type="hidden" name="cx" value="partner-pub-3422782820843221:isdiegq275o" />
    <input type="hidden" name="ie" value="ISO-8859-1" />
    <input type="text" name="q" size="37" />
    <input type="submit" name="sa" value="Search" />
  </div>
</form>
<script type="text/javascript" src="//www.google.com/cse/brand?form=cse-search-box&amp;lang=en" async></script>
<h1 itemprop="name">[PATCH v3 02/11] dt-bindings: clock: imx-lpcg: add support to parse clocks from device tree</h1>
[<a href="msg741369.html">Date Prev</a>][<a href="msg741371.html">Date Next</a>][<a href="msg741369.html">Thread Prev</a>][<a href="msg741371.html">Thread Next</a>][<a href="maillist.html#741370">Date Index</a>][<a href="threads.html#741370">Thread Index</a>] 
<p>&nbsp;<br>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive test for archives -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="6345952567"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>Subject</em>: [PATCH v3 02/11] dt-bindings: clock: imx-lpcg: add support to parse clocks from device tree</li>
<li><em>From</em>: Dong Aisheng &lt;aisheng.dong@xxxxxxx&gt;</li>
<li><em>Date</em>: Tue, 16 Jul 2019 23:00:56 +0800</li>
<li><em>In-reply-to</em>: &lt;<a href="msg741365.html">1563289265-10977-1-git-send-email-aisheng.dong@nxp.com</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_4"></a>
<a class="addthis_button_compact"></a>
<a class="addthis_counter addthis_bubble_style"></a>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5196c2ae1be43d18&async=1&domready=1" async></script>
<!-- AddThis Button END -->
<hr>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive link 1 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="8681825769"
     data-ad-format="link"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<div class="content" itemprop="articleBody">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>MX8QM and MX8QXP LPCG Clocks are mostly the same except they may reside
in different subsystems across CPUs and also vary a bit on the availability.

Same as SCU clock, we want to move the clock definition into device tree
which can fully decouple the dependency of Clock ID definition from device
tree and make us be able to write a fully generic lpcg clock driver.

And we can also use the existence of clock nodes in device tree to address
the device and clock availability differences across different SoCs.

Cc: Rob Herring &lt;robh+dt@xxxxxxxxxx&gt;
Cc: Stephen Boyd &lt;sboyd@xxxxxxxxxx&gt;
Cc: Shawn Guo &lt;shawnguo@xxxxxxxxxx&gt;
Cc: Sascha Hauer &lt;kernel@xxxxxxxxxxxxxx&gt;
Cc: Michael Turquette &lt;mturquette@xxxxxxxxxxxx&gt;
Cc: devicetree@xxxxxxxxxxxxxxx
Signed-off-by: Dong Aisheng &lt;aisheng.dong@xxxxxxx&gt;
---
ChangeLog:
v2-&gt;v3:
 * no changes
v1-&gt;v2:
 * Update example
 * Add power domain property
---
 .../devicetree/bindings/clock/imx8qxp-lpcg.txt     | 34 ++++++++++++++++++----
 1 file changed, 28 insertions(+), 6 deletions(-)

diff --git a/Documentation/devicetree/bindings/clock/imx8qxp-lpcg.txt b/Documentation/devicetree/bindings/clock/imx8qxp-lpcg.txt
index 965cfa4..6fc2fd8 100644
--- a/Documentation/devicetree/bindings/clock/imx8qxp-lpcg.txt
+++ b/Documentation/devicetree/bindings/clock/imx8qxp-lpcg.txt
@@ -11,6 +11,21 @@ enabled by these control bits, it might still not be running based
 on the base resource.
 
 Required properties:
+- compatible:		Should be one of:
+			  &quot;fsl,imx8qxp-lpcg&quot;
+			  &quot;fsl,imx8qm-lpcg&quot; followed by &quot;fsl,imx8qxp-lpcg&quot;.
+- reg:			Address and length of the register set.
+- #clock-cells:		Should be 1. One LPCG supports multiple clocks.
+- clocks:		Input parent clocks phandle array for each clock.
+- bit-offset:		An integer array indicating the bit offset for each clock.
+- hw-autogate:		Boolean array indicating whether supports HW autogate for
+			each clock.
+- clock-output-names:	Shall be the corresponding names of the outputs.
+			NOTE this property must be specified in the same order
+			as the clock bit-offset and hw-autogate property.
+- power-domains:	Should contain the power domain used by this clock.
+
+Legacy binding (DEPRECATED):
 - compatible:	Should be one of:
 		  &quot;fsl,imx8qxp-lpcg-adma&quot;,
 		  &quot;fsl,imx8qxp-lpcg-conn&quot;,
@@ -33,10 +48,17 @@ Examples:
 
 #include &lt;dt-bindings/clock/imx8qxp-clock.h&gt;
 
-conn_lpcg: clock-controller@5b200000 {
-	compatible = &quot;fsl,imx8qxp-lpcg-conn&quot;;
-	reg = &lt;0x5b200000 0xb0000&gt;;
+sdhc0_lpcg: clock-controller@5b200000 {
+	compatible = &quot;fsl,imx8qxp-lpcg&quot;;
+	reg = &lt;0x5b200000 0x10000&gt;;
 	#clock-cells = &lt;1&gt;;
+	clocks = &lt;&amp;sdhc0_clk IMX_SC_PM_CLK_PER&gt;,
+		 &lt;&amp;conn_ipg_clk&gt;, &lt;&amp;conn_axi_clk&gt;;
+	bit-offset = &lt;0 16 20&gt;;
+	clock-output-names = &quot;sdhc0_lpcg_per_clk&quot;,
+			     &quot;sdhc0_lpcg_ipg_clk&quot;,
+			     &quot;sdhc0_lpcg_ahb_clk&quot;;
+	power-domains = &lt;&amp;pd IMX_SC_R_SDHC_0&gt;;
 };
 
 usdhc1: mmc@5b010000 {
@@ -44,8 +66,8 @@ usdhc1: mmc@5b010000 {
 	interrupt-parent = &lt;&amp;gic&gt;;
 	interrupts = &lt;GIC_SPI 232 IRQ_TYPE_LEVEL_HIGH&gt;;
 	reg = &lt;0x5b010000 0x10000&gt;;
-	clocks = &lt;&amp;conn_lpcg IMX8QXP_CONN_LPCG_SDHC0_IPG_CLK&gt;,
-		 &lt;&amp;conn_lpcg IMX8QXP_CONN_LPCG_SDHC0_PER_CLK&gt;,
-		 &lt;&amp;conn_lpcg IMX8QXP_CONN_LPCG_SDHC0_HCLK&gt;;
+	clocks = &lt;&amp;sdhc0_lpcg 1&gt;,
+		 &lt;&amp;sdhc0_lpcg 0&gt;,
+		 &lt;&amp;sdhc0_lpcg 2&gt;;
 	clock-names = &quot;ipg&quot;, &quot;per&quot;, &quot;ahb&quot;;
 };
-- 
2.7.4


_______________________________________________
linux-arm-kernel mailing list
linux-arm-kernel@xxxxxxxxxxxxxxxxxxx
<a  rel="nofollow" href="http://lists.infradead.org/mailman/listinfo/linux-arm-kernel">http://lists.infradead.org/mailman/listinfo/linux-arm-kernel</a>


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div>
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="741365" href="msg741365.html">[PATCH v3 00/11] clk: imx8: add new clock binding for better pm support</a></strong>
<ul><li><em>From:</em> Dong Aisheng</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg741369.html">[PATCH v3 05/11] clk: imx: scu: allow scu clk to take device pointer</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg741371.html">[PATCH v3 01/11] dt-bindings: firmware: imx-scu: new binding to parse clocks from device tree</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg741369.html">[PATCH v3 05/11] clk: imx: scu: allow scu clk to take device pointer</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg741371.html">[PATCH v3 01/11] dt-bindings: firmware: imx-scu: new binding to parse clocks from device tree</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#741370"><strong>Date</strong></a></li>
<li><a href="threads.html#741370"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<center>
<font size=-1>
<a href=/lists/>[Index&nbsp;of&nbsp;Archives]</a>
&nbsp;
&nbsp;
<a href=/lists/kernel/>[Linux&nbsp;Kernel]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-arm/>[Linux&nbsp;ARM&nbsp;(vger)]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-arm-msm/>[Linux&nbsp;ARM&nbsp;MSM]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-omap/>[Linux&nbsp;Omap]</a>
&nbsp;
&nbsp;
<a href=/lists/centos-arm-devel/>[CentOS&nbsp;ARM]</a>
&nbsp;
&nbsp;
<a href=/lists/arm/>[Linux&nbsp;Arm]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-tegra/>[Linux&nbsp;Tegra]</a>
&nbsp;
&nbsp;
<a href=/linux/fedora/fedora-arm/>[Fedora&nbsp;ARM]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-samsung-soc/>[Linux&nbsp;for&nbsp;Samsung&nbsp;SOC]</a>
&nbsp;
&nbsp;
<a href=/lists/ecos/>[eCos]</a>
&nbsp;
&nbsp;
<a href=/lists/fastboot/>[Linux&nbsp;Fastboot]</a>
&nbsp;
&nbsp;
<a href=/lists/gcchelp/>[Gcc&nbsp;Help]</a>
&nbsp;
&nbsp;
<a href=/lists/git/>[Git]</a>
&nbsp;
&nbsp;
<a href=/lists/dccp/>[DCCP]</a>
&nbsp;
&nbsp;
<a href=/lists/ietf-ann>[IETF&nbsp;Announce]</a>
&nbsp;
&nbsp;
<a href=/lists/security/>[Security]</a>
&nbsp;
&nbsp;
<a href=/lists/mips/>[Linux&nbsp;MIPS]</a>
</font>
</center>
<hr>
<p>
<div>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-format="autorelaxed"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="1424524564"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<table width=100%>
<tr>
<td align=left>&nbsp;</td>
<td align=right><a href=/lists/><img src=/button_01.gif border=0 alt="Powered by Linux"></a></td>
</tr>
</table>
<!--X-User-Footer-End-->
<script type="text/javascript"> 
 function initAddThis() {
    addthis.init()
 }

initAddThis();
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-760190-1', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
