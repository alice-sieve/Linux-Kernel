<!-- MHonArc v2.6.19 -->
<!--X-Subject: [gnulib PATCH 0/2] Work around glibc 2.25 deprecation warnings -->
<!--X-From-R13: Sevp Pynxr &#60;roynxrNerqung.pbz> -->
<!--X-Date: Wed, 14 Sep 2016 18:06:09 &#45;0700 -->
<!--X-Message-Id: 1473901523&#45;7416&#45;1&#45;git&#45;send&#45;email&#45;eblake@redhat.com -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-3422782820843221",
          enable_page_level_ads: true
     });
</script>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Gnu Autoconf: [gnulib PATCH 0/2] Work around glibc 2.25 deprecation warnings ">
<style>
<!--
 pre {white-space: pre-wrap;}
-->
</style>
<title>Gnu Autoconf &mdash; [gnulib PATCH 0/2] Work around glibc 2.25 deprecation warnings</title>
<link rel="alternate" type="application/rss+xml" title="Autoconf" href="//feeds.feedburner.com/GnuAutoconf">
<script type="text/javascript">
var addthis_config = addthis_config||{};
addthis_config.data_track_addressbar = false;
</script>
</head>
<body itemscope itemtype="//schema.org/Article" vlink=green>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<form action="//www.google.com/cse" id="cse-search-box" target="_blank">
  <div>
    <input type="hidden" name="cx" value="partner-pub-3422782820843221:isdiegq275o" />
    <input type="hidden" name="ie" value="ISO-8859-1" />
    <input type="text" name="q" size="37" />
    <input type="submit" name="sa" value="Search" />
  </div>
</form>
<script type="text/javascript" src="//www.google.com/cse/brand?form=cse-search-box&amp;lang=en"></script>
<h1 itemprop="name">[gnulib PATCH 0/2] Work around glibc 2.25 deprecation warnings</h1>
[<a href="msg12887.html">Date Prev</a>][<a href="msg12889.html">Date Next</a>][<a href="msg12886.html">Thread Prev</a>][<a href="msg12889.html">Thread Next</a>][<a href="maillist.html#12888">Date Index</a>][<a href="threads.html#12888">Thread Index</a>]


<p>&nbsp;<br>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- generic lists white -->
<ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="9313458966"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: bug-gnulib@xxxxxxx</li>
<li><em>Subject</em>: [gnulib PATCH 0/2] Work around glibc 2.25 deprecation warnings</li>
<li><em>From</em>: Eric Blake &lt;eblake@xxxxxxxxxx&gt;</li>
<li><em>Date</em>: Wed, 14 Sep 2016 20:05:21 -0500</li>
<li><em>Cc</em>: libvir-list@xxxxxxxxxx, autoconf@xxxxxxx</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_4"></a>
<a class="addthis_button_compact"></a>
<a class="addthis_counter addthis_bubble_style"></a>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5196c2ae1be43d18&async=1&domready=1" async></script>
<!-- AddThis Button END -->
<hr>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive link 1 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="8681825769"
     data-ad-format="link"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>
<div class="content" itemprop="articleBody">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Fedora rawhide builds of libvirt.git at commit d53fa838^ failed
due to the new glibc 2.25 deprecation warning for use of major()
from just &lt;sys/types.h&gt;; I also found that the same warning is
provoked by gnulib's mountlist module.  Libvirt commit d53fa838
was a temporary hack to work around the problem, and I will be
reverting that and updating to newer gnulib once this goes in.

I've tested that libvirt on Fedora rawhide with d53fa838 reverted
and gnulib updated to this commit was once again able to build.

Comments welcome, particularly for my choice of wording in
documentation changes.  The final push will differ slightly from
this, especially if the autoconf patch going in first changes
slightly due to review there, but this should give a good idea
of the fix.

Eric Blake (2):
  mountlist: include sysmacros.h for glibc
  sys_types: avoid glibc 2.25 warnings about major()

 ChangeLog                                | 15 +++++++++++++++
 doc/glibc-functions/gnu_dev_major.texi   |  4 ++++
 doc/glibc-functions/gnu_dev_makedev.texi |  4 ++++
 doc/glibc-functions/gnu_dev_minor.texi   |  4 ++++
 doc/posix-headers/sys_types.texi         |  6 ++++++
 lib/mountlist.c                          |  6 ++++++
 m4/mountlist.m4                          |  3 ++-
 m4/sys_types_h.m4                        | 27 ++++++++++++++++++++++++++-
 8 files changed, 67 insertions(+), 2 deletions(-)

-- 
2.7.4


_______________________________________________
Autoconf mailing list
Autoconf@xxxxxxx
<a  rel="nofollow" href="https://lists.gnu.org/mailman/listinfo/autoconf">https://lists.gnu.org/mailman/listinfo/autoconf</a>


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div>
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="12890" href="msg12890.html">[PATCH 1/2] mountlist: include sysmacros.h for glibc</a></strong>
<ul><li><em>From:</em> Eric Blake</li></ul></li>
<li><strong><a name="12889" href="msg12889.html">[PATCH 2/2] sys_types: avoid glibc 2.25 warnings about major()</a></strong>
<ul><li><em>From:</em> Eric Blake</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg12887.html">Re: m4_divert_text</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg12889.html">[PATCH 2/2] sys_types: avoid glibc 2.25 warnings about major()</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg12886.html">m4_divert_text</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg12889.html">[PATCH 2/2] sys_types: avoid glibc 2.25 warnings about major()</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#12888"><strong>Date</strong></a></li>
<li><a href="threads.html#12888"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<center>
<font size=-1>
<a href=/lists/>[Index&nbsp;of&nbsp;Archives]</a>
&nbsp;
&nbsp;
<a href=/lists/gcchelp/>[GCC&nbsp;Help]</a>
&nbsp;
&nbsp;
<a href=/lists/kernel/>[Kernel&nbsp;Discussion]</a>
&nbsp;
&nbsp;
<a href=/lists/rpm/>[RPM&nbsp;Discussion]</a>
&nbsp;
&nbsp;
<a href=/lists/rh-devel/>[Red&nbsp;Hat&nbsp;Development]</a>
&nbsp;
&nbsp;
<a href=https://yosemitenews.info>[Yosemite&nbsp;News]</a>
&nbsp;
&nbsp;
<a href=/lists/usb/>[Linux&nbsp;USB]</a>
&nbsp;
&nbsp;
<a href=/lists/samba/>[Samba]</a>
</font>
</center>
<hr>
<p>
<div>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-format="autorelaxed"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="1424524564"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<table width=100%>
<tr>
<td align=left>&nbsp;</td>
<td align=right><a href=/lists/><img src=/button_01.gif border=0 alt="Powered by Linux"></a></td>
</tr>
</table>
<!--X-User-Footer-End-->
<script type="text/javascript"> 
 function initAddThis() {
    addthis.init()
 }
initAddThis();
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-760190-1', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
