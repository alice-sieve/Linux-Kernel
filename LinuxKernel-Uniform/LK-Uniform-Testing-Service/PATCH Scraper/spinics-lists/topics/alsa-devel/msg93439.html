<!-- MHonArc v2.6.19 -->
<!--X-Subject: [PATCH v2 resend 0/3] ASoC: SOF: fix suspend ordering	with runtime idle -->
<!--X-From-R13: Ynv Hruznara &#60;xnv.iruznaraNyvahk.vagry.pbz> -->
<!--X-Date: Tue, 2 Jul 2019 06:24:25 &#45;0700 -->
<!--X-Message-Id: 20190702132428.13129&#45;1&#45;kai.vehmanen@linux.intel.com -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-3422782820843221",
          enable_page_level_ads: true
     });
</script>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="[PATCH v2 resend 0/3] ASoC: SOF: fix suspend ordering	with runtime idle &mdash; ALSA Devel">
<style>
<!--
 pre {white-space: pre-wrap;}
-->
</style>
<title>[PATCH v2 resend 0/3] ASoC: SOF: fix suspend ordering	with runtime idle &mdash; ALSA Devel</title>
<link rel="alternate" type="application/rss+xml" title="ALSA Devel" href="//feedproxy.google.com/AlsaDevel">
</head>
<body itemscope itemtype="//schema.org/Article" vlink=green>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<form action="//www.google.com" id="cse-search-box" target="_blank">
  <div>
    <input type="hidden" name="cx" value="partner-pub-3422782820843221:9580497365" />
    <input type="hidden" name="ie" value="UTF-8" />
    <input type="text" name="q" size="25" />
    <input type="submit" name="sa" value="Search" />
  </div>
</form>
<script type="text/javascript" src="//www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en"></script>
<h1 itemprop="name">[PATCH v2 resend 0/3] ASoC: SOF: fix suspend ordering	with runtime idle</h1>
[<a href="msg93438.html">Date Prev</a>][<a href="msg93440.html">Date Next</a>][<a href="msg93435.html">Thread Prev</a>][<a href="msg93440.html">Thread Next</a>][<a href="maillist.html#93439">Date Index</a>][<a href="threads.html#93439">Thread Index</a>]


<p>&nbsp;<br>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive test for archives -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="6345952567"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: broonie@xxxxxxxxxx</li>
<li><em>Subject</em>: [PATCH v2 resend 0/3] ASoC: SOF: fix suspend ordering	with runtime idle</li>
<li><em>From</em>: Kai Vehmanen &lt;kai.vehmanen@xxxxxxxxxxxxxxx&gt;</li>
<li><em>Date</em>: Tue,  2 Jul 2019 16:24:25 +0300</li>
<li><em>Cc</em>: tiwai@xxxxxxx, libin.yang@xxxxxxxxx, alsa-devel@xxxxxxxxxxxxxxxx,        pierre-louis.bossart@xxxxxxxxxxxxxxx, kai.vehmanen@xxxxxxxxxxxxxxx</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_4"></a>
<a class="addthis_button_compact"></a>
<a class="addthis_counter addthis_bubble_style"></a>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5196c2ae1be43d18&async=1&domready=1" async></script>
<!-- AddThis Button END -->
<hr>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive link 1 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="8681825769"
     data-ad-format="link"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>
<div class="content" itemprop="articleBody">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Hi all,
this series addresses issues with ordering of HDA codec and controller
suspends in the runtime PM flows. The implemented logic for SOF is
similar to what has been used by the Intel AZX HDA driver.

To implement this, first a fix is needed to hdac_hdmic ASoC codec
driver. SOF framework also needs to be extended to allow SOF devices
to implement a runtime_idle callback. Third, concrete implementation
is in a separate patch for APL/CNL Intel hardware, for which strict
ordering of codec-controller power down sequence needs to be
maintained.

As this extends the SOF device interface, Pierre asked me to
send to the list for wider review. This series has been prereviewd
at SOF github as:
<a  rel="nofollow" href="https://github.com/thesofproject/linux/pull/1003">https://github.com/thesofproject/linux/pull/1003</a>

v2 resend:
  - no changes since v2 -- resending as 2 weeks has passed and
    multiple reviewed-by acks already received
v2:
  - Rebased on broonie/for-next, there was a conflict with patch
    &quot;ASoC: SOF: Intel: hda: release link DMA for paused streams during suspend&quot;
  - Added Reviewed-by tags from v1 round

Kai Vehmanen (3):
  ASoC: hdac_hdmi: report codec link up/down status to bus
  ASoC: SOF: add runtime idle callback
  ASoC: SOF: Intel: implement runtime idle for CNL/APL

 sound/soc/codecs/hdac_hdmi.c  |  2 ++
 sound/soc/sof/intel/apl.c     |  1 +
 sound/soc/sof/intel/cnl.c     |  1 +
 sound/soc/sof/intel/hda-dsp.c | 13 +++++++++++++
 sound/soc/sof/intel/hda.h     |  1 +
 sound/soc/sof/ops.h           |  8 ++++++++
 sound/soc/sof/pm.c            |  8 ++++++++
 sound/soc/sof/sof-acpi-dev.c  |  2 +-
 sound/soc/sof/sof-pci-dev.c   |  2 +-
 sound/soc/sof/sof-priv.h      |  2 ++
 10 files changed, 38 insertions(+), 2 deletions(-)

-- 
2.17.1

_______________________________________________
Alsa-devel mailing list
Alsa-devel@xxxxxxxxxxxxxxxx
<a  rel="nofollow" href="https://mailman.alsa-project.org/mailman/listinfo/alsa-devel">https://mailman.alsa-project.org/mailman/listinfo/alsa-devel</a>


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div>
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="93444" href="msg93444.html">[PATCH v2 resend 3/3] ASoC: SOF: Intel: implement	runtime idle for CNL/APL</a></strong>
<ul><li><em>From:</em> Kai Vehmanen</li></ul></li>
<li><strong><a name="93443" href="msg93443.html">[PATCH v2 2/3] ASoC: SOF: add runtime idle callback</a></strong>
<ul><li><em>From:</em> Kai Vehmanen</li></ul></li>
<li><strong><a name="93440" href="msg93440.html">[PATCH v2 resend 1/3] ASoC: hdac_hdmi: report codec	link up/down status to bus</a></strong>
<ul><li><em>From:</em> Kai Vehmanen</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg93438.html">Re:  [PATCH -next] ASoC: madera: Remove duplicated include from cs47l35.c</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg93440.html">[PATCH v2 resend 1/3] ASoC: hdac_hdmi: report codec	link up/down status to bus</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg93435.html">Applied &quot;ASoC: cirrus: ep93xx-i2s.c: use	devm_snd_soc_register_component()&quot; to the asoc tree</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg93440.html">[PATCH v2 resend 1/3] ASoC: hdac_hdmi: report codec	link up/down status to bus</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#93439"><strong>Date</strong></a></li>
<li><a href="threads.html#93439"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<center>
<font size=-1>
<a href=/lists/>[Index&nbsp;of&nbsp;Archives]</a>
&nbsp;
&nbsp;
<a href=/linux/fedora/alsa-user/>[ALSA&nbsp;User]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-audio-users/>[Linux&nbsp;Audio&nbsp;Users]</a>
&nbsp;
&nbsp;
<a href=/lists/pulse-audio/>[Pulse&nbsp;Audio]</a>
&nbsp;
&nbsp;
<a href=/lists/kernel/>[Kernel&nbsp;Archive]</a>
&nbsp;
&nbsp;
<a href=/lists/asterisk/>[Asterisk&nbsp;PBX]</a>
&nbsp;
&nbsp;
<a href=http://yosemitephotos.net/>[Photo&nbsp;Sharing]</a>
&nbsp;
&nbsp;
<a href=/linux/fedora/linux-sound/>[Linux&nbsp;Sound]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-media/>[Video&nbsp;4&nbsp;Linux]</a>
&nbsp;
&nbsp;
<a href=/lists/gimp/>[Gimp]</a>
&nbsp;
&nbsp;
<a href=https://yosemitenews.info>[Yosemite&nbsp;News]</a>
</font>
</center>
<hr>
<p>
<div>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-format="autorelaxed"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="1424524564"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<table width=100%>
<tr>
<td align=left>&nbsp;</td>
<td align=right><a href=/lists/><img src=/button_01.gif border=0 alt="Powered by Linux"></a></td>
</tr>
</table>
<!--X-User-Footer-End-->
<script type="text/javascript"> 
 function initAddThis() {
    addthis.init()
 }
initAddThis();
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-760190-1', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
