<!-- MHonArc v2.6.19 -->
<!--X-Subject: [PATCH &#45; use build platform compiler while cross compilation 1/1] use build compilers in cross compilation setup -->
<!--X-From-R13: Rvat Jvnat Trv &#60;qvatkvnatsrv2009Ntznvy.pbz> -->
<!--X-Date: Tue, 2 Jul 2019 11:34:11 &#45;0700 -->
<!--X-Message-Id: dc15537e&#45;6c63&#45;5fa6&#45;7ef6&#45;0b16050dad70@gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-3422782820843221",
          enable_page_level_ads: true
     });
</script>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="[PATCH - use build platform compiler while cross compilation 1/1] use build compilers in cross compilation setup &mdash; ALSA Devel">
<style>
<!--
 pre {white-space: pre-wrap;}
-->
</style>
<title>[PATCH - use build platform compiler while cross compilation 1/1] use build compilers in cross compilation setup &mdash; ALSA Devel</title>
<link rel="alternate" type="application/rss+xml" title="ALSA Devel" href="//feedproxy.google.com/AlsaDevel">
</head>
<body itemscope itemtype="//schema.org/Article" vlink=green>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<form action="//www.google.com" id="cse-search-box" target="_blank">
  <div>
    <input type="hidden" name="cx" value="partner-pub-3422782820843221:9580497365" />
    <input type="hidden" name="ie" value="UTF-8" />
    <input type="text" name="q" size="25" />
    <input type="submit" name="sa" value="Search" />
  </div>
</form>
<script type="text/javascript" src="//www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en"></script>
<h1 itemprop="name">[PATCH - use build platform compiler while cross compilation 1/1] use build compilers in cross compilation setup</h1>
[<a href="msg93453.html">Date Prev</a>][<a href="msg93455.html">Date Next</a>][<a href="msg93453.html">Thread Prev</a>][<a href="msg93466.html">Thread Next</a>][<a href="maillist.html#93454">Date Index</a>][<a href="threads.html#93454">Thread Index</a>]


<p>&nbsp;<br>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive test for archives -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="6345952567"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: patch@xxxxxxxxxxxxxxxx</li>
<li><em>Subject</em>: [PATCH - use build platform compiler while cross compilation 1/1] use build compilers in cross compilation setup</li>
<li><em>From</em>: Ding Xiang Fei &lt;dingxiangfei2009@xxxxxxxxx&gt;</li>
<li><em>Date</em>: Sat, 29 Jun 2019 19:07:04 +0800</li>
<li><em>Cc</em>: alsa-devel@xxxxxxxxxxxxxxxx</li>
<li><em>User-agent</em>: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101 Thunderbird/60.7.2</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_4"></a>
<a class="addthis_button_compact"></a>
<a class="addthis_counter addthis_bubble_style"></a>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5196c2ae1be43d18&async=1&domready=1" async></script>
<!-- AddThis Button END -->
<hr>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive link 1 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="8681825769"
     data-ad-format="link"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>
<div class="content" itemprop="articleBody">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>
This patch is to make the build script always use the build platform
compilers, especially during the cross compilation process, since the
Makefile will pick up the cross compilers instead of the compilers on
the build machine.

Signed-off-by: Ding Xiang Fei &lt;dingxiangfei2009@xxxxxxxxx&gt;

diff --git a/compile b/compile
new file mode 120000
index 0000000..349ac66
--- /dev/null
+++ b/compile
@@ -0,0 +1 @@
+/nix/store/hwcmvzv53jzws5vnaga16l5dmqvslwkz-automake-1.16.1/share/automake-1.16/compile
\ No newline at end of file
diff --git a/configure.ac b/configure.ac
index 368854e..ee0e242 100644
--- a/configure.ac
+++ b/configure.ac
@@ -1,6 +1,8 @@
&#xA0;AC_PREREQ(2.59)
&#xA0;AC_INIT(alsa-firmware, 1.0.29)
+AC_CONFIG_MACRO_DIR([m4])
&#xA0;AC_PROG_CC
+AC_PROG_CC_FOR_BUILD
&#xA0;AC_PROG_INSTALL
&#xA0;AC_PROG_LN_S
&#xA0;AC_HEADER_STDC
diff --git a/echoaudio/Makefile.am b/echoaudio/Makefile.am
index 815742f..5ef6086 100644
--- a/echoaudio/Makefile.am
+++ b/echoaudio/Makefile.am
@@ -74,33 +74,42 @@ hotplugfwdir =
&#xA0;hotplugfw_DATA =
&#xA0;endif
&#xA0;
-$(firmware_files): fw_writer
-&#xA0;&#xA0; &#xA0;./fw_writer DSP/LoaderDSP.c loader_dsp.fw
-&#xA0;&#xA0; &#xA0;./fw_writer DSP/Darla20DSP.c darla20_dsp.fw
-&#xA0;&#xA0; &#xA0;./fw_writer DSP/Gina20DSP.c gina20_dsp.fw
-&#xA0;&#xA0; &#xA0;./fw_writer DSP/Layla20DSP.c layla20_dsp.fw
-&#xA0;&#xA0; &#xA0;./fw_writer ASIC/LaylaASIC.c layla20_asic.fw
-&#xA0;&#xA0; &#xA0;./fw_writer DSP/Darla24DSP.c darla24_dsp.fw
-&#xA0;&#xA0; &#xA0;./fw_writer DSP/Gina24DSP.c gina24_301_dsp.fw
-&#xA0;&#xA0; &#xA0;./fw_writer ASIC/Gina24ASIC.c gina24_301_asic.fw
-&#xA0;&#xA0; &#xA0;./fw_writer DSP/Gina24_361DSP.c gina24_361_dsp.fw
-&#xA0;&#xA0; &#xA0;./fw_writer ASIC/Gina24ASIC_361.c gina24_361_asic.fw
-&#xA0;&#xA0; &#xA0;./fw_writer DSP/Layla24DSP.c layla24_dsp.fw
-&#xA0;&#xA0; &#xA0;./fw_writer ASIC/Layla24_1ASIC.c layla24_1_asic.fw
-&#xA0;&#xA0; &#xA0;./fw_writer ASIC/Layla24_2A_ASIC.c layla24_2A_asic.fw
-&#xA0;&#xA0; &#xA0;./fw_writer ASIC/Layla24_2S_ASIC.c layla24_2S_asic.fw
-&#xA0;&#xA0; &#xA0;./fw_writer DSP/MonaDSP.c mona_301_dsp.fw
-&#xA0;&#xA0; &#xA0;./fw_writer ASIC/Mona1ASIC48.c mona_301_1_asic_48.fw
-&#xA0;&#xA0; &#xA0;./fw_writer ASIC/Mona1ASIC96.c mona_301_1_asic_96.fw
-&#xA0;&#xA0; &#xA0;./fw_writer DSP/Mona361DSP.c mona_361_dsp.fw
-&#xA0;&#xA0; &#xA0;./fw_writer ASIC/Mona1ASIC48_361.c mona_361_1_asic_48.fw
-&#xA0;&#xA0; &#xA0;./fw_writer ASIC/Mona1ASIC96_361.c mona_361_1_asic_96.fw
-&#xA0;&#xA0; &#xA0;./fw_writer ASIC/Mona2ASIC.c mona_2_asic.fw
-&#xA0;&#xA0; &#xA0;./fw_writer DSP/MiaDSP.c mia_dsp.fw
-&#xA0;&#xA0; &#xA0;./fw_writer DSP/Echo3gDSP.c echo3g_dsp.fw
-&#xA0;&#xA0; &#xA0;./fw_writer ASIC/3G_ASIC.c 3g_asic.fw
-&#xA0;&#xA0; &#xA0;./fw_writer DSP/IndigoDSP.c indigo_dsp.fw
-&#xA0;&#xA0; &#xA0;./fw_writer DSP/IndigoIODSP.c indigo_io_dsp.fw
-&#xA0;&#xA0; &#xA0;./fw_writer DSP/IndigoIOxDSP.c indigo_iox_dsp.fw
-&#xA0;&#xA0; &#xA0;./fw_writer DSP/IndigoDJDSP.c indigo_dj_dsp.fw
-&#xA0;&#xA0; &#xA0;./fw_writer DSP/IndigoDJxDSP.c indigo_djx_dsp.fw
+LINK_FOR_BUILD.c = $(CC_FOR_BUILD) $(CFLAGS_FOR_BUILD) $(CPPFLAGS_FOR_BUILD) $(LDFLAGS_FOR_BUILD) $(TARGET_ARCH_FOR_BUILD)
+
+$(fw_writer_OBJECTS) : CC=$(CC_FOR_BUILD)
+$(fw_writer_OBJECTS) : CFLAGS=$(CFLAGS_FOR_BUILD)
+$(fw_writer_OBJECTS) : CPPFLAGS=$(CPPFLAGS_FOR_BUILD)
+
+fw_writer$(BUILD_EXEEXT): $(tobin_OBJECTS)
+&#xA0;&#xA0; &#xA0;$(LINK_FOR_BUILD.c) $^ $(LOADLIBES_FOR_BUILD) $(LDLIBS_FOR_BUILD) -o $@
+
+$(firmware_files): fw_writer$(BUILD_EXEEXT)
+&#xA0;&#xA0; &#xA0;./fw_writer$(BUILD_EXEEXT) DSP/LoaderDSP.c loader_dsp.fw
+&#xA0;&#xA0; &#xA0;./fw_writer$(BUILD_EXEEXT) DSP/Darla20DSP.c darla20_dsp.fw
+&#xA0;&#xA0; &#xA0;./fw_writer$(BUILD_EXEEXT) DSP/Gina20DSP.c gina20_dsp.fw
+&#xA0;&#xA0; &#xA0;./fw_writer$(BUILD_EXEEXT) DSP/Layla20DSP.c layla20_dsp.fw
+&#xA0;&#xA0; &#xA0;./fw_writer$(BUILD_EXEEXT) ASIC/LaylaASIC.c layla20_asic.fw
+&#xA0;&#xA0; &#xA0;./fw_writer$(BUILD_EXEEXT) DSP/Darla24DSP.c darla24_dsp.fw
+&#xA0;&#xA0; &#xA0;./fw_writer$(BUILD_EXEEXT) DSP/Gina24DSP.c gina24_301_dsp.fw
+&#xA0;&#xA0; &#xA0;./fw_writer$(BUILD_EXEEXT) ASIC/Gina24ASIC.c gina24_301_asic.fw
+&#xA0;&#xA0; &#xA0;./fw_writer$(BUILD_EXEEXT) DSP/Gina24_361DSP.c gina24_361_dsp.fw
+&#xA0;&#xA0; &#xA0;./fw_writer$(BUILD_EXEEXT) ASIC/Gina24ASIC_361.c gina24_361_asic.fw
+&#xA0;&#xA0; &#xA0;./fw_writer$(BUILD_EXEEXT) DSP/Layla24DSP.c layla24_dsp.fw
+&#xA0;&#xA0; &#xA0;./fw_writer$(BUILD_EXEEXT) ASIC/Layla24_1ASIC.c layla24_1_asic.fw
+&#xA0;&#xA0; &#xA0;./fw_writer$(BUILD_EXEEXT) ASIC/Layla24_2A_ASIC.c layla24_2A_asic.fw
+&#xA0;&#xA0; &#xA0;./fw_writer$(BUILD_EXEEXT) ASIC/Layla24_2S_ASIC.c layla24_2S_asic.fw
+&#xA0;&#xA0; &#xA0;./fw_writer$(BUILD_EXEEXT) DSP/MonaDSP.c mona_301_dsp.fw
+&#xA0;&#xA0; &#xA0;./fw_writer$(BUILD_EXEEXT) ASIC/Mona1ASIC48.c mona_301_1_asic_48.fw
+&#xA0;&#xA0; &#xA0;./fw_writer$(BUILD_EXEEXT) ASIC/Mona1ASIC96.c mona_301_1_asic_96.fw
+&#xA0;&#xA0; &#xA0;./fw_writer$(BUILD_EXEEXT) DSP/Mona361DSP.c mona_361_dsp.fw
+&#xA0;&#xA0; &#xA0;./fw_writer$(BUILD_EXEEXT) ASIC/Mona1ASIC48_361.c mona_361_1_asic_48.fw
+&#xA0;&#xA0; &#xA0;./fw_writer$(BUILD_EXEEXT) ASIC/Mona1ASIC96_361.c mona_361_1_asic_96.fw
+&#xA0;&#xA0; &#xA0;./fw_writer$(BUILD_EXEEXT) ASIC/Mona2ASIC.c mona_2_asic.fw
+&#xA0;&#xA0; &#xA0;./fw_writer$(BUILD_EXEEXT) DSP/MiaDSP.c mia_dsp.fw
+&#xA0;&#xA0; &#xA0;./fw_writer$(BUILD_EXEEXT) DSP/Echo3gDSP.c echo3g_dsp.fw
+&#xA0;&#xA0; &#xA0;./fw_writer$(BUILD_EXEEXT) ASIC/3G_ASIC.c 3g_asic.fw
+&#xA0;&#xA0; &#xA0;./fw_writer$(BUILD_EXEEXT) DSP/IndigoDSP.c indigo_dsp.fw
+&#xA0;&#xA0; &#xA0;./fw_writer$(BUILD_EXEEXT) DSP/IndigoIODSP.c indigo_io_dsp.fw
+&#xA0;&#xA0; &#xA0;./fw_writer$(BUILD_EXEEXT) DSP/IndigoIOxDSP.c indigo_iox_dsp.fw
+&#xA0;&#xA0; &#xA0;./fw_writer$(BUILD_EXEEXT) DSP/IndigoDJDSP.c indigo_dj_dsp.fw
+&#xA0;&#xA0; &#xA0;./fw_writer$(BUILD_EXEEXT) DSP/IndigoDJxDSP.c indigo_djx_dsp.fw
diff --git a/emu/Makefile.am b/emu/Makefile.am
index 3a633c0..e5a3017 100644
--- a/emu/Makefile.am
+++ b/emu/Makefile.am
@@ -22,5 +22,14 @@ hotplugfwdir =
&#xA0;hotplugfw_DATA =
&#xA0;endif
&#xA0;
-$(firmware_files): fw_writer
-&#xA0;&#xA0; &#xA0;./fw_writer
+LINK_FOR_BUILD.c = $(CC_FOR_BUILD) $(CFLAGS_FOR_BUILD) $(CPPFLAGS_FOR_BUILD) $(LDFLAGS_FOR_BUILD) $(TARGET_ARCH_FOR_BUILD)
+
+$(fw_writer_OBJECTS) : CC=$(CC_FOR_BUILD)
+$(fw_writer_OBJECTS) : CFLAGS=$(CFLAGS_FOR_BUILD)
+$(fw_writer_OBJECTS) : CPPFLAGS=$(CPPFLAGS_FOR_BUILD)
+
+fw_writer$(BUILD_EXEEXT): $(tobin_OBJECTS)
+&#xA0;&#xA0; &#xA0;$(LINK_FOR_BUILD.c) $^ $(LOADLIBES_FOR_BUILD) $(LDLIBS_FOR_BUILD) -o $@
+
+$(firmware_files): fw_writer$(BUILD_EXEEXT)
+&#xA0;&#xA0; &#xA0;./fw_writer$(BUILD_EXEEXT)
diff --git a/hdsploader/Makefile.am b/hdsploader/Makefile.am
index 48802a6..b13245b 100644
--- a/hdsploader/Makefile.am
+++ b/hdsploader/Makefile.am
@@ -32,5 +32,14 @@ EXTRA_DIST = $(dsp_hex_files:%.bin=%.dat) \
&#xA0;&#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0;&#xA0; tobin.c
&#xA0;CLEANFILES = $(dsp_hex_files)
&#xA0;
-$(dsp_hex_files): tobin
-&#xA0;&#xA0; &#xA0;./tobin
+LINK_FOR_BUILD.c = $(CC_FOR_BUILD) $(CFLAGS_FOR_BUILD) $(CPPFLAGS_FOR_BUILD) $(LDFLAGS_FOR_BUILD) $(TARGET_ARCH_FOR_BUILD)
+
+$(tobin_OBJECTS) : CC=$(CC_FOR_BUILD)
+$(tobin_OBJECTS) : CFLAGS=$(CFLAGS_FOR_BUILD)
+$(tobin_OBJECTS) : CPPFLAGS=$(CPPFLAGS_FOR_BUILD)
+
+tobin$(BUILD_EXEEXT): $(tobin_OBJECTS)
+&#xA0;&#xA0; &#xA0;$(LINK_FOR_BUILD.c) $^ $(LOADLIBES_FOR_BUILD) $(LDLIBS_FOR_BUILD) -o $@
+
+$(dsp_hex_files): tobin$(BUILD_EXEEXT)
+&#xA0;&#xA0; &#xA0;./$&lt;
diff --git a/m4/ax_prog_cc_for_build.m4 b/m4/ax_prog_cc_for_build.m4
new file mode 100644
index 0000000..12cb005
--- /dev/null
+++ b/m4/ax_prog_cc_for_build.m4
@@ -0,0 +1,125 @@
+# ===========================================================================
+#&#xA0;&#xA0; <a  rel="nofollow" href="https://www.gnu.org/software/autoconf-archive/ax_prog_cc_for_build.html">https://www.gnu.org/software/autoconf-archive/ax_prog_cc_for_build.html</a>
+# ===========================================================================
+#
+# SYNOPSIS
+#
+#&#xA0;&#xA0; AX_PROG_CC_FOR_BUILD
+#
+# DESCRIPTION
+#
+#&#xA0;&#xA0; This macro searches for a C compiler that generates native executables,
+#&#xA0;&#xA0; that is a C compiler that surely is not a cross-compiler. This can be
+#&#xA0;&#xA0; useful if you have to generate source code at compile-time like for
+#&#xA0;&#xA0; example GCC does.
+#
+#&#xA0;&#xA0; The macro sets the CC_FOR_BUILD and CPP_FOR_BUILD macros to anything
+#&#xA0;&#xA0; needed to compile or link (CC_FOR_BUILD) and preprocess (CPP_FOR_BUILD).
+#&#xA0;&#xA0; The value of these variables can be overridden by the user by specifying
+#&#xA0;&#xA0; a compiler with an environment variable (like you do for standard CC).
+#
+#&#xA0;&#xA0; It also sets BUILD_EXEEXT and BUILD_OBJEXT to the executable and object
+#&#xA0;&#xA0; file extensions for the build platform, and GCC_FOR_BUILD to `yes' if
+#&#xA0;&#xA0; the compiler we found is GCC. All these variables but GCC_FOR_BUILD are
+#&#xA0;&#xA0; substituted in the Makefile.
+#
+# LICENSE
+#
+#&#xA0;&#xA0; Copyright (c) 2008 Paolo Bonzini &lt;bonzini@xxxxxxx&gt;
+#
+#&#xA0;&#xA0; Copying and distribution of this file, with or without modification, are
+#&#xA0;&#xA0; permitted in any medium without royalty provided the copyright notice
+#&#xA0;&#xA0; and this notice are preserved. This file is offered as-is, without any
+#&#xA0;&#xA0; warranty.
+
+#serial 9
+
+AU_ALIAS([AC_PROG_CC_FOR_BUILD], [AX_PROG_CC_FOR_BUILD])
+AC_DEFUN([AX_PROG_CC_FOR_BUILD], [dnl
+AC_REQUIRE([AC_PROG_CC])dnl
+AC_REQUIRE([AC_PROG_CPP])dnl
+AC_REQUIRE([AC_EXEEXT])dnl
+AC_REQUIRE([AC_CANONICAL_HOST])dnl
+
+dnl Use the standard macros, but make them use other variable names
+dnl
+pushdef([ac_cv_prog_CPP], ac_cv_build_prog_CPP)dnl
+pushdef([ac_cv_prog_gcc], ac_cv_build_prog_gcc)dnl
+pushdef([ac_cv_prog_cc_works], ac_cv_build_prog_cc_works)dnl
+pushdef([ac_cv_prog_cc_cross], ac_cv_build_prog_cc_cross)dnl
+pushdef([ac_cv_prog_cc_g], ac_cv_build_prog_cc_g)dnl
+pushdef([ac_cv_exeext], ac_cv_build_exeext)dnl
+pushdef([ac_cv_objext], ac_cv_build_objext)dnl
+pushdef([ac_exeext], ac_build_exeext)dnl
+pushdef([ac_objext], ac_build_objext)dnl
+pushdef([CC], CC_FOR_BUILD)dnl
+pushdef([CPP], CPP_FOR_BUILD)dnl
+pushdef([CFLAGS], CFLAGS_FOR_BUILD)dnl
+pushdef([CPPFLAGS], CPPFLAGS_FOR_BUILD)dnl
+pushdef([LDFLAGS], LDFLAGS_FOR_BUILD)dnl
+pushdef([host], build)dnl
+pushdef([host_alias], build_alias)dnl
+pushdef([host_cpu], build_cpu)dnl
+pushdef([host_vendor], build_vendor)dnl
+pushdef([host_os], build_os)dnl
+pushdef([ac_cv_host], ac_cv_build)dnl
+pushdef([ac_cv_host_alias], ac_cv_build_alias)dnl
+pushdef([ac_cv_host_cpu], ac_cv_build_cpu)dnl
+pushdef([ac_cv_host_vendor], ac_cv_build_vendor)dnl
+pushdef([ac_cv_host_os], ac_cv_build_os)dnl
+pushdef([ac_cpp], ac_build_cpp)dnl
+pushdef([ac_compile], ac_build_compile)dnl
+pushdef([ac_link], ac_build_link)dnl
+
+save_cross_compiling=$cross_compiling
+save_ac_tool_prefix=$ac_tool_prefix
+cross_compiling=no
+ac_tool_prefix=
+
+AC_PROG_CC
+AC_PROG_CPP
+AC_EXEEXT
+
+ac_tool_prefix=$save_ac_tool_prefix
+cross_compiling=$save_cross_compiling
+
+dnl Restore the old definitions
+dnl
+popdef([ac_link])dnl
+popdef([ac_compile])dnl
+popdef([ac_cpp])dnl
+popdef([ac_cv_host_os])dnl
+popdef([ac_cv_host_vendor])dnl
+popdef([ac_cv_host_cpu])dnl
+popdef([ac_cv_host_alias])dnl
+popdef([ac_cv_host])dnl
+popdef([host_os])dnl
+popdef([host_vendor])dnl
+popdef([host_cpu])dnl
+popdef([host_alias])dnl
+popdef([host])dnl
+popdef([LDFLAGS])dnl
+popdef([CPPFLAGS])dnl
+popdef([CFLAGS])dnl
+popdef([CPP])dnl
+popdef([CC])dnl
+popdef([ac_objext])dnl
+popdef([ac_exeext])dnl
+popdef([ac_cv_objext])dnl
+popdef([ac_cv_exeext])dnl
+popdef([ac_cv_prog_cc_g])dnl
+popdef([ac_cv_prog_cc_cross])dnl
+popdef([ac_cv_prog_cc_works])dnl
+popdef([ac_cv_prog_gcc])dnl
+popdef([ac_cv_prog_CPP])dnl
+
+dnl Finally, set Makefile variables
+dnl
+BUILD_EXEEXT=$ac_build_exeext
+BUILD_OBJEXT=$ac_build_objext
+AC_SUBST(BUILD_EXEEXT)dnl
+AC_SUBST(BUILD_OBJEXT)dnl
+AC_SUBST([CFLAGS_FOR_BUILD])dnl
+AC_SUBST([CPPFLAGS_FOR_BUILD])dnl
+AC_SUBST([LDFLAGS_FOR_BUILD])dnl
+])
diff --git a/maestro3/Makefile.am b/maestro3/Makefile.am
index 7544f12..0826570 100644
--- a/maestro3/Makefile.am
+++ b/maestro3/Makefile.am
@@ -17,5 +17,14 @@ hotplugfwdir =
&#xA0;hotplugfw_DATA =
&#xA0;endif
&#xA0;
-$(firmware_files): fw_writer
-&#xA0;&#xA0; &#xA0;./fw_writer
+LINK_FOR_BUILD.c = $(CC_FOR_BUILD) $(CFLAGS_FOR_BUILD) $(CPPFLAGS_FOR_BUILD) $(LDFLAGS_FOR_BUILD) $(TARGET_ARCH_FOR_BUILD)
+
+$(fw_writer_OBJECTS) : CC=$(CC_FOR_BUILD)
+$(fw_writer_OBJECTS) : CFLAGS=$(CFLAGS_FOR_BUILD)
+$(fw_writer_OBJECTS) : CPPFLAGS=$(CPPFLAGS_FOR_BUILD)
+
+fw_writer$(BUILD_EXEEXT): $(tobin_OBJECTS)
+&#xA0;&#xA0; &#xA0;$(LINK_FOR_BUILD.c) $^ $(LOADLIBES_FOR_BUILD) $(LDLIBS_FOR_BUILD) -o $@
+
+$(firmware_files): fw_writer$(BUILD_EXEEXT)
+&#xA0;&#xA0; &#xA0;./fw_writer$(BUILD_EXEEXT)
diff --git a/sb16/Makefile.am b/sb16/Makefile.am
index 17eead9..58d0032 100644
--- a/sb16/Makefile.am
+++ b/sb16/Makefile.am
@@ -18,5 +18,14 @@ hotplugfwdir =
&#xA0;hotplugfw_DATA =
&#xA0;endif
&#xA0;
-$(firmware_files): fw_writer
-&#xA0;&#xA0; &#xA0;./fw_writer
+LINK_FOR_BUILD.c = $(CC_FOR_BUILD) $(CFLAGS_FOR_BUILD) $(CPPFLAGS_FOR_BUILD) $(LDFLAGS_FOR_BUILD) $(TARGET_ARCH_FOR_BUILD)
+
+$(fw_writer_OBJECTS) : CC=$(CC_FOR_BUILD)
+$(fw_writer_OBJECTS) : CFLAGS=$(CFLAGS_FOR_BUILD)
+$(fw_writer_OBJECTS) : CPPFLAGS=$(CPPFLAGS_FOR_BUILD)
+
+fw_writer$(BUILD_EXEEXT): $(tobin_OBJECTS)
+&#xA0;&#xA0; &#xA0;$(LINK_FOR_BUILD.c) $^ $(LOADLIBES_FOR_BUILD) $(LDLIBS_FOR_BUILD) -o $@
+
+$(firmware_files): fw_writer$(BUILD_EXEEXT)
+&#xA0;&#xA0; &#xA0;./fw_writer$(BUILD_EXEEXT)
diff --git a/vxloader/Makefile.am b/vxloader/Makefile.am
index ca21494..adcc204 100644
--- a/vxloader/Makefile.am
+++ b/vxloader/Makefile.am
@@ -43,5 +43,14 @@ hotplugfwdir =
&#xA0;hotplugfw_DATA =
&#xA0;endif
&#xA0;
-%.xlx: %.rbt toxlx
-&#xA0;&#xA0; &#xA0;./toxlx &lt; $&lt; &gt; $@
+LINK_FOR_BUILD.c = $(CC_FOR_BUILD) $(CFLAGS_FOR_BUILD) $(CPPFLAGS_FOR_BUILD) $(LDFLAGS_FOR_BUILD) $(TARGET_ARCH_FOR_BUILD)
+
+$(toxlx_OBJECTS) : CC=$(CC_FOR_BUILD)
+$(toxlx_OBJECTS) : CFLAGS=$(CFLAGS_FOR_BUILD)
+$(toxlx_OBJECTS) : CPPFLAGS=$(CPPFLAGS_FOR_BUILD)
+
+toxlx$(BUILD_EXEEXT): $(toxlx_OBJECTS)
+&#xA0;&#xA0; &#xA0;$(LINK_FOR_BUILD.c) $^ $(LOADLIBES_FOR_BUILD) $(LDLIBS_FOR_BUILD) -o $@
+
+%.xlx: %.rbt toxlx$(BUILD_EXEEXT)
+&#xA0;&#xA0; &#xA0;./toxlx$(BUILD_EXEEXT) &lt; $&lt; &gt; $@
diff --git a/wavefront/Makefile.am b/wavefront/Makefile.am
index e8c9fe1..8f67b59 100644
--- a/wavefront/Makefile.am
+++ b/wavefront/Makefile.am
@@ -17,5 +17,14 @@ hotplugfwdir =
&#xA0;hotplugfw_DATA =
&#xA0;endif
&#xA0;
-$(firmware_files): fw_writer
-&#xA0;&#xA0; &#xA0;./fw_writer
+LINK_FOR_BUILD.c = $(CC_FOR_BUILD) $(CFLAGS_FOR_BUILD) $(CPPFLAGS_FOR_BUILD) $(LDFLAGS_FOR_BUILD) $(TARGET_ARCH_FOR_BUILD)
+
+$(fw_writer_OBJECTS) : CC=$(CC_FOR_BUILD)
+$(fw_writer_OBJECTS) : CFLAGS=$(CFLAGS_FOR_BUILD)
+$(fw_writer_OBJECTS) : CPPFLAGS=$(CPPFLAGS_FOR_BUILD)
+
+fw_writer$(BUILD_EXEEXT): $(tobin_OBJECTS)
+&#xA0;&#xA0; &#xA0;$(LINK_FOR_BUILD.c) $^ $(LOADLIBES_FOR_BUILD) $(LDLIBS_FOR_BUILD) -o $@
+
+$(firmware_files): fw_writer$(BUILD_EXEEXT)
+&#xA0;&#xA0; &#xA0;./fw_writer$(BUILD_EXEEXT)
diff --git a/ymfpci/Makefile.am b/ymfpci/Makefile.am
index 8795fbc..645b471 100644
--- a/ymfpci/Makefile.am
+++ b/ymfpci/Makefile.am
@@ -17,5 +17,14 @@ hotplugfwdir =
&#xA0;hotplugfw_DATA =
&#xA0;endif
&#xA0;
-$(firmware_files): fw_writer
-&#xA0;&#xA0; &#xA0;./fw_writer
+LINK_FOR_BUILD.c = $(CC_FOR_BUILD) $(CFLAGS_FOR_BUILD) $(CPPFLAGS_FOR_BUILD) $(LDFLAGS_FOR_BUILD) $(TARGET_ARCH_FOR_BUILD)
+
+$(fw_writer_OBJECTS) : CC=$(CC_FOR_BUILD)
+$(fw_writer_OBJECTS) : CFLAGS=$(CFLAGS_FOR_BUILD)
+$(fw_writer_OBJECTS) : CPPFLAGS=$(CPPFLAGS_FOR_BUILD)
+
+fw_writer$(BUILD_EXEEXT): $(tobin_OBJECTS)
+&#xA0;&#xA0; &#xA0;$(LINK_FOR_BUILD.c) $^ $(LOADLIBES_FOR_BUILD) $(LDLIBS_FOR_BUILD) -o $@
+
+$(firmware_files): fw_writer$(BUILD_EXEEXT)
+&#xA0;&#xA0; &#xA0;./fw_writer$(BUILD_EXEEXT)
-- 
2.22.0

_______________________________________________
Alsa-devel mailing list
Alsa-devel@xxxxxxxxxxxxxxxx
<a  rel="nofollow" href="https://mailman.alsa-project.org/mailman/listinfo/alsa-devel">https://mailman.alsa-project.org/mailman/listinfo/alsa-devel</a>



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div>
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg93453.html">[PATCH] sound/soc/codecs/tas5720.c: add ACPI support</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg93455.html">Re:  [PATCH] sound/soc/codecs/tas5720.c: add ACPI	support</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg93453.html">[PATCH] sound/soc/codecs/tas5720.c: add ACPI support</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg93466.html">[PATCH V2 0/2] recover the channel swap after xrun</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#93454"><strong>Date</strong></a></li>
<li><a href="threads.html#93454"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<center>
<font size=-1>
<a href=/lists/>[Index&nbsp;of&nbsp;Archives]</a>
&nbsp;
&nbsp;
<a href=/linux/fedora/alsa-user/>[ALSA&nbsp;User]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-audio-users/>[Linux&nbsp;Audio&nbsp;Users]</a>
&nbsp;
&nbsp;
<a href=/lists/pulse-audio/>[Pulse&nbsp;Audio]</a>
&nbsp;
&nbsp;
<a href=/lists/kernel/>[Kernel&nbsp;Archive]</a>
&nbsp;
&nbsp;
<a href=/lists/asterisk/>[Asterisk&nbsp;PBX]</a>
&nbsp;
&nbsp;
<a href=http://yosemitephotos.net/>[Photo&nbsp;Sharing]</a>
&nbsp;
&nbsp;
<a href=/linux/fedora/linux-sound/>[Linux&nbsp;Sound]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-media/>[Video&nbsp;4&nbsp;Linux]</a>
&nbsp;
&nbsp;
<a href=/lists/gimp/>[Gimp]</a>
&nbsp;
&nbsp;
<a href=https://yosemitenews.info>[Yosemite&nbsp;News]</a>
</font>
</center>
<hr>
<p>
<div>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-format="autorelaxed"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="1424524564"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<table width=100%>
<tr>
<td align=left>&nbsp;</td>
<td align=right><a href=/lists/><img src=/button_01.gif border=0 alt="Powered by Linux"></a></td>
</tr>
</table>
<!--X-User-Footer-End-->
<script type="text/javascript"> 
 function initAddThis() {
    addthis.init()
 }
initAddThis();
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-760190-1', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
