<!-- MHonArc v2.6.19 -->
<!--X-Subject: Re:  [PATCH] Advertise Telephony service class	when	device offers headset AG or handsfree AG -->
<!--X-From-R13: [nepry Vbygznaa &#60;znepryNubygznaa.bet> -->
<!--X-Date: Sat, 30 Aug 2008 01:46:50 &#45;0700 -->
<!--X-Message-Id: 1220093197.7145.81.camel@californication -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 1220050803&#45;30362&#45;1&#45;git&#45;send&#45;email&#45;npelly@google.com -->
<!--X-Reference: 1220086722.7145.33.camel@californication -->
<!--X-Reference: 35c90d960808300016t1ea8b8eq638a399e7d04b1e9@mail.gmail.com -->
<!--X-Reference: 1220088521.7145.51.camel@californication -->
<!--X-Reference: 35c90d960808300037h242dbf5fkd584bf552ed50190@mail.gmail.com -->
<!--X-Reference: 1220090659.7145.71.camel@californication -->
<!--X-Reference: 35c90d960808300132t959e1difc2d8f4c0eca0f95@mail.gmail.com -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-3422782820843221",
          enable_page_level_ads: true
     });
</script>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Bluez Devel: Re:  [PATCH] Advertise Telephony service class	when	device offers headset AG or handsfree AG">
<style>
<!--
 pre {white-space: pre-wrap;}
-->
</style>
<title>Re:  [PATCH] Advertise Telephony service class	when	device offers headset AG or handsfree AG &mdash; Bluez Devel</title>
<link rel="alternate" type="application/rss+xml" title="Bluez Devel" href="maillist.rdf">
</head>
<body itemscope itemtype="//schema.org/Article" vlink=green>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<form action="//www.google.com" id="cse-search-box" target="_blank">
  <div>
    <input type="hidden" name="cx" value="partner-pub-3422782820843221:9580497365" />
    <input type="hidden" name="ie" value="UTF-8" />
    <input type="text" name="q" size="55" />
    <input type="submit" name="sa" value="Search" />
  </div>
</form>
<script type="text/javascript" src="//www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en"></script>
<h1 itemprop="name">Re:  [PATCH] Advertise Telephony service class	when	device offers headset AG or handsfree AG</h1>
[<a href="msg00515.html">Date Prev</a>][<a href="msg00517.html">Date Next</a>][<a href="msg00515.html">Thread Prev</a>][<a href="msg00518.html">Thread Next</a>][<a href="maillist.html#00516">Date Index</a>][<a href="index.html#00516">Thread Index</a>]


<p>&nbsp;<br>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive test for archives -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="6345952567"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>Subject</em>: Re:  [PATCH] Advertise Telephony service class	when	device offers headset AG or handsfree AG</li>
<li><em>From</em>: Marcel Holtmann &lt;<a href="mailto:marcel@DOMAIN.HIDDEN">marcel@xxxxxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Sat, 30 Aug 2008 12:46:37 +0200</li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:35c90d960808300132t959e1difc2d8f4c0eca0f95@DOMAIN.HIDDEN">35c90d960808300132t959e1difc2d8f4c0eca0f95@xxxxxxxxxxxxxx</a>&gt;</li>
<li><em>References</em>: &lt;<a href="mailto:1220050803-30362-1-git-send-email-npelly@DOMAIN.HIDDEN">1220050803-30362-1-git-send-email-npelly@xxxxxxxxxx</a>&gt;	&lt;<a href="mailto:1220086722.7145.33.camel@DOMAIN.HIDDEN"><a href="msg00509.html">1220086722.7145.33.camel@californication</a></a>&gt;	&lt;<a href="mailto:35c90d960808300016t1ea8b8eq638a399e7d04b1e9@DOMAIN.HIDDEN">35c90d960808300016t1ea8b8eq638a399e7d04b1e9@xxxxxxxxxxxxxx</a>&gt;	&lt;<a href="mailto:1220088521.7145.51.camel@DOMAIN.HIDDEN"><a href="msg00512.html">1220088521.7145.51.camel@californication</a></a>&gt;	&lt;<a href="mailto:35c90d960808300037h242dbf5fkd584bf552ed50190@DOMAIN.HIDDEN">35c90d960808300037h242dbf5fkd584bf552ed50190@xxxxxxxxxxxxxx</a>&gt;	&lt;<a href="mailto:1220090659.7145.71.camel@DOMAIN.HIDDEN"><a href="msg00514.html">1220090659.7145.71.camel@californication</a></a>&gt;	&lt;<a href="mailto:35c90d960808300132t959e1difc2d8f4c0eca0f95@DOMAIN.HIDDEN">35c90d960808300132t959e1difc2d8f4c0eca0f95@xxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Reply-to</em>: BlueZ development &lt;<a href="mailto:bluez-devel@DOMAIN.HIDDEN">bluez-devel@xxxxxxxxxxxxxxxxxxxxx</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_4"></a>
<a class="addthis_button_compact"></a>
<a class="addthis_counter addthis_bubble_style"></a>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5196c2ae1be43d18&async=1&domready=1" defer async></script>
<!-- AddThis Button END -->
<hr>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- responsive link 1 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="8681825769"
     data-ad-format="link"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p>
<div class="content" itemprop="articleBody">
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Hi Nick,

&gt;<i> &gt;&gt; So I looked at the headset and handsfree spec, they do not require</i>
&gt;<i> &gt;&gt; that AG's set the telephony bit. sigh.</i>
&gt;<i> &gt;&gt;</i>
&gt;<i> &gt;&gt; But I can tell you for a fact that the Nokia 616 carkit will not pair</i>
&gt;<i> &gt;&gt; unless you set the telephony bit. That is what triggered this patch.</i>
&gt;<i> &gt;</i>
&gt;<i> &gt; that looks like a really broken device to me. How can it pass the</i>
&gt;<i> &gt; qualification if it mandates that bit. Is PTS setting it by accident.</i>
&gt;<i> &gt;</i>
&gt;<i> &gt;&gt; We have yet to find a device (and we have tested hundreds now) that is</i>
&gt;<i> &gt;&gt; not compatible because of the telephony bit. It is a safe change to</i>
&gt;<i> &gt;&gt; make.</i>
&gt;<i> &gt;</i>
&gt;<i> &gt; Check your patch with PTS headset/handsfree and the IOP part.</i>
&gt;<i> </i>
&gt;<i> Yeah thats worth checking. I can't check until Wednesday when I am</i>
&gt;<i> back in the office with the PTS tester. I'll post back results.</i>

you can also file an errata to have the headset and handsfree
specification fixed. If they agree that the telephony bit should been
set.

&gt;<i> &gt; I am not</i>
&gt;<i> &gt; sure if we can just enable service bits as we like.</i>
&gt;<i> &gt;</i>
&gt;<i> &gt; So in case I can be convinced to take this patch, it has to be in a</i>
&gt;<i> &gt; separate case statement and with a comment that the Nokia 616 is just a</i>
&gt;<i> &gt; plain stupid broken device and that is why we did it. The spec. doesn't</i>
&gt;<i> &gt; mandate this.</i>
&gt;<i> &gt;</i>
&gt;<i> &gt; I also realized that the Nokia 616 might just is lucky in the interop</i>
&gt;<i> &gt; department since most phones also implement DUN, FAX or SAP and thus the</i>
&gt;<i> &gt; telephony bit is set.</i>
&gt;<i> &gt;</i>
&gt;<i> &gt; This brings me to another question, why don't you just use the serial</i>
&gt;<i> &gt; proxy support we have and point it to one of the multiplexed TTYs of</i>
&gt;<i> &gt; your GSM unit. Then you get DUN support and that broken Nokia device</i>
&gt;<i> &gt; would also work :)</i>
&gt;<i> </i>
&gt;<i> I wish, but this is not an option for us.</i>

That might be actually the reason why the Nokia 616 is so stupid. They
only tested it with phones that also implement DUN or SAP. And you can
still contact Nokia and point them to the headset/handsfree specs. for
this issue.

&gt;<i> &gt; So what about the desktop case that enables HS-AG and HF-AG? Are these</i>
&gt;<i> &gt; phones? Does headset profile really mean that you have to be phone. Not</i>
&gt;<i> &gt; likely. With the GSM requirements of handsfree, maybe.</i>
&gt;<i> </i>
&gt;<i> Both HSP and HFP are intended for telephony. I can't see any harm in</i>
&gt;<i> the desktop case in setting the telephony bit, after all it will let</i>
&gt;<i> them work with the Nokia 616.</i>

It is really not about harm or not. We have to make sure to be compliant
here. The service class bits are not the brightest that the SIG ever
produced, but at least the specs. are pretty clear when to set them and
when not.

If other companies would finally implement Simple Pairing and thus be
allowed to enable Extended Inquiry Response, then this problem would
finally go away. With EIR you get the UUID and can easily identify which
service is available. Did I mention that BlueZ does already support
Simple Pairing and Extended Inquiry Response :)

And don't try to convince me for the headset case. I am not fixing that
one. The spec. says here what it says. For the handsfree we can debate
this, but currently I am in a more restrictive mode and push back on
what the spec. says. It is up to you to proof that this will not break
other application or profile qualification.

Regards

Marcel



-------------------------------------------------------------------------
This SF.Net email is sponsored by the Moblin Your Move Developer's challenge
Build the coolest Linux based applications with Moblin SDK &amp; win great prizes
Grand prize is a trip for two to an Open Source event anywhere in the world
<a  rel="nofollow" href="http://moblin-contest.org/redirect.php?banner_id=100&amp;url=/">http://moblin-contest.org/redirect.php?banner_id=100&amp;url=/</a>
_______________________________________________
Bluez-devel mailing list
Bluez-devel@xxxxxxxxxxxxxxxxxxxxx
<a  rel="nofollow" href="https://lists.sourceforge.net/lists/listinfo/bluez-devel">https://lists.sourceforge.net/lists/listinfo/bluez-devel</a>
</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
</div>
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00508" href="msg00508.html">[PATCH] Advertise Telephony service class when device	offers headset AG or handsfree AG</a></strong>
<ul><li><em>From:</em> Nick Pelly</li></ul></li>
<li><strong><a name="00509" href="msg00509.html">Re:  [PATCH] Advertise Telephony service class	when	device offers headset AG or handsfree AG</a></strong>
<ul><li><em>From:</em> Marcel Holtmann</li></ul></li>
<li><strong><a name="00511" href="msg00511.html">Re:  [PATCH] Advertise Telephony service class when	device offers headset AG or handsfree AG</a></strong>
<ul><li><em>From:</em> Nick Pelly</li></ul></li>
<li><strong><a name="00512" href="msg00512.html">Re:  [PATCH] Advertise Telephony service class	when	device offers headset AG or handsfree AG</a></strong>
<ul><li><em>From:</em> Marcel Holtmann</li></ul></li>
<li><strong><a name="00513" href="msg00513.html">Re:  [PATCH] Advertise Telephony service class when	device offers headset AG or handsfree AG</a></strong>
<ul><li><em>From:</em> Nick Pelly</li></ul></li>
<li><strong><a name="00514" href="msg00514.html">Re:  [PATCH] Advertise Telephony service class	when	device offers headset AG or handsfree AG</a></strong>
<ul><li><em>From:</em> Marcel Holtmann</li></ul></li>
<li><strong><a name="00515" href="msg00515.html">Re:  [PATCH] Advertise Telephony service class when	device offers headset AG or handsfree AG</a></strong>
<ul><li><em>From:</em> Nick Pelly</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00515.html">Re:  [PATCH] Advertise Telephony service class when	device offers headset AG or handsfree AG</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00517.html">Re:  sixpair2 - Whre did it go?</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00515.html">Re:  [PATCH] Advertise Telephony service class when	device offers headset AG or handsfree AG</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00518.html">Re:  [PATCH] Advertise Telephony service class when	device offers headset AG or handsfree AG</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00516"><strong>Date</strong></a></li>
<li><a href="index.html#00516"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<center>
<font size=-1>
<a href=/lists/>[Index&nbsp;of&nbsp;Archives]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-bluetooth/>[Linux&nbsp;Bluetooth&nbsp;Devel]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-usb/>[Linux&nbsp;USB&nbsp;Devel]</a>
&nbsp;
&nbsp;
<a href=/lists/netdev/>[Network&nbsp;Devel]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-audio-users/>[Linux&nbsp;Audio&nbsp;Users]</a>
&nbsp;
&nbsp;
<a href=https://yosemitenews.info/>[Yosemite&nbsp;News]</a>
&nbsp;
&nbsp;
<a href=/lists/linux-scsi/>[Linux&nbsp;SCSI]</a>
</font>
</center>
<hr>
<p>
<div>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-format="autorelaxed"
     data-ad-client="ca-pub-3422782820843221"
     data-ad-slot="1424524564"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<table width=100%>
<tr>
<td align=left>&nbsp;</td>
<td align=right><a href=/lists/><img src=/button_01.gif border=0 alt="Powered by Linux"></a></td>
</tr>
</table>
<!--X-User-Footer-End-->
<script type="text/javascript"> 
 function initAddThis() {
    addthis.init()
 }
initAddThis();
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-760190-1', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
